(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Sn(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Pt={},Oe=[],Xt=()=>{},ul=()=>!1,ai=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Cn=t=>t.startsWith("onUpdate:"),It=Object.assign,wn=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},cl=Object.prototype.hasOwnProperty,St=(t,e)=>cl.call(t,e),dt=Array.isArray,nr=t=>oi(t)==="[object Map]",fl=t=>oi(t)==="[object Set]",pt=t=>typeof t=="function",Ot=t=>typeof t=="string",De=t=>typeof t=="symbol",At=t=>t!==null&&typeof t=="object",Zo=t=>(At(t)||pt(t))&&pt(t.then)&&pt(t.catch),dl=Object.prototype.toString,oi=t=>dl.call(t),pl=t=>oi(t).slice(8,-1),gl=t=>oi(t)==="[object Object]",xn=t=>Ot(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ar=Sn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),si=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},vl=/-(\w)/g,he=si(t=>t.replace(vl,(e,n)=>n?n.toUpperCase():"")),_l=/\B([A-Z])/g,Ce=si(t=>t.replace(_l,"-$1").toLowerCase()),ts=si(t=>t.charAt(0).toUpperCase()+t.slice(1)),bi=si(t=>t?`on${ts(t)}`:""),me=(t,e)=>!Object.is(t,e),Si=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},es=(t,e,n,a=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:a,value:n})},yl=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Yn;const li=()=>Yn||(Yn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Pn(t){if(dt(t)){const e={};for(let n=0;n<t.length;n++){const a=t[n],l=Ot(a)?Cl(a):Pn(a);if(l)for(const u in l)e[u]=l[u]}return e}else if(Ot(t)||At(t))return t}const ml=/;(?![^(]*\))/g,bl=/:([^]+)/,Sl=/\/\*[^]*?\*\//g;function Cl(t){const e={};return t.replace(Sl,"").split(ml).forEach(n=>{if(n){const a=n.split(bl);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function Tn(t){let e="";if(Ot(t))e=t;else if(dt(t))for(let n=0;n<t.length;n++){const a=Tn(t[n]);a&&(e+=a+" ")}else if(At(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const wl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xl=Sn(wl);function rs(t){return!!t||t===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lt;class Pl{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lt,!e&&Lt&&(this.index=(Lt.scopes||(Lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Lt;try{return Lt=this,e()}finally{Lt=n}}}on(){Lt=this}off(){Lt=this.parent}stop(e){if(this._active){this._active=!1;let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(this.effects.length=0,n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const l=this.parent.scopes.pop();l&&l!==this&&(this.parent.scopes[this.index]=l,l.index=this.index)}this.parent=void 0}}}function Tl(){return Lt}let xt;const Ci=new WeakSet;class is{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lt&&Lt.active&&Lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ci.has(this)&&(Ci.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||as(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xn(this),os(this);const e=xt,n=Ht;xt=this,Ht=!0;try{return this.fn()}finally{ss(this),xt=e,Ht=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Mn(e);this.deps=this.depsTail=void 0,Xn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ci.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){un(this)&&this.run()}get dirty(){return un(this)}}let ns=0,or,sr;function as(t,e=!1){if(t.flags|=8,e){t.next=sr,sr=t;return}t.next=or,or=t}function An(){ns++}function On(){if(--ns>0)return;if(sr){let e=sr;for(sr=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;or;){let e=or;for(or=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(a){t||(t=a)}e=n}}if(t)throw t}function os(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ss(t){let e,n=t.depsTail,a=n;for(;a;){const l=a.prevDep;a.version===-1?(a===n&&(n=l),Mn(a),Al(a)):e=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=l}t.deps=e,t.depsTail=n}function un(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ls(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ls(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===fr))return;t.globalVersion=fr;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!un(t)){t.flags&=-3;return}const n=xt,a=Ht;xt=t,Ht=!0;try{os(t);const l=t.fn(t._value);(e.version===0||me(l,t._value))&&(t._value=l,e.version++)}catch(l){throw e.version++,l}finally{xt=n,Ht=a,ss(t),t.flags&=-3}}function Mn(t,e=!1){const{dep:n,prevSub:a,nextSub:l}=t;if(a&&(a.nextSub=l,t.prevSub=void 0),l&&(l.prevSub=a,t.nextSub=void 0),n.subs===t&&(n.subs=a,!a&&n.computed)){n.computed.flags&=-5;for(let u=n.computed.deps;u;u=u.nextDep)Mn(u,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Al(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Ht=!0;const hs=[];function ue(){hs.push(Ht),Ht=!1}function ce(){const t=hs.pop();Ht=t===void 0?!0:t}function Xn(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=xt;xt=void 0;try{e()}finally{xt=n}}}let fr=0;class Ol{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class us{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!xt||!Ht||xt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xt)n=this.activeLink=new Ol(xt,this),xt.deps?(n.prevDep=xt.depsTail,xt.depsTail.nextDep=n,xt.depsTail=n):xt.deps=xt.depsTail=n,cs(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const a=n.nextDep;a.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=a),n.prevDep=xt.depsTail,n.nextDep=void 0,xt.depsTail.nextDep=n,xt.depsTail=n,xt.deps===n&&(xt.deps=a)}return n}trigger(e){this.version++,fr++,this.notify(e)}notify(e){An();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{On()}}}function cs(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let a=e.deps;a;a=a.nextDep)cs(a)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const cn=new WeakMap,be=Symbol(""),fn=Symbol(""),dr=Symbol("");function Ft(t,e,n){if(Ht&&xt){let a=cn.get(t);a||cn.set(t,a=new Map);let l=a.get(n);l||(a.set(n,l=new us),l.map=a,l.key=n),l.track()}}function re(t,e,n,a,l,u){const p=cn.get(t);if(!p){fr++;return}const c=s=>{s&&s.trigger()};if(An(),e==="clear")p.forEach(c);else{const s=dt(t),i=s&&xn(n);if(s&&n==="length"){const r=Number(a);p.forEach((o,g)=>{(g==="length"||g===dr||!De(g)&&g>=r)&&c(o)})}else switch((n!==void 0||p.has(void 0))&&c(p.get(n)),i&&c(p.get(dr)),e){case"add":s?i&&c(p.get("length")):(c(p.get(be)),nr(t)&&c(p.get(fn)));break;case"delete":s||(c(p.get(be)),nr(t)&&c(p.get(fn)));break;case"set":nr(t)&&c(p.get(be));break}}On()}function we(t){const e=wt(t);return e===t?e:(Ft(e,"iterate",dr),$t(t)?e:e.map(zt))}function En(t){return Ft(t=wt(t),"iterate",dr),t}const Ml={__proto__:null,[Symbol.iterator](){return wi(this,Symbol.iterator,zt)},concat(...t){return we(this).concat(...t.map(e=>dt(e)?we(e):e))},entries(){return wi(this,"entries",t=>(t[1]=zt(t[1]),t))},every(t,e){return te(this,"every",t,e,void 0,arguments)},filter(t,e){return te(this,"filter",t,e,n=>n.map(zt),arguments)},find(t,e){return te(this,"find",t,e,zt,arguments)},findIndex(t,e){return te(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return te(this,"findLast",t,e,zt,arguments)},findLastIndex(t,e){return te(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return te(this,"forEach",t,e,void 0,arguments)},includes(...t){return xi(this,"includes",t)},indexOf(...t){return xi(this,"indexOf",t)},join(t){return we(this).join(t)},lastIndexOf(...t){return xi(this,"lastIndexOf",t)},map(t,e){return te(this,"map",t,e,void 0,arguments)},pop(){return Ie(this,"pop")},push(...t){return Ie(this,"push",t)},reduce(t,...e){return $n(this,"reduce",t,e)},reduceRight(t,...e){return $n(this,"reduceRight",t,e)},shift(){return Ie(this,"shift")},some(t,e){return te(this,"some",t,e,void 0,arguments)},splice(...t){return Ie(this,"splice",t)},toReversed(){return we(this).toReversed()},toSorted(t){return we(this).toSorted(t)},toSpliced(...t){return we(this).toSpliced(...t)},unshift(...t){return Ie(this,"unshift",t)},values(){return wi(this,"values",zt)}};function wi(t,e,n){const a=En(t),l=a[e]();return a!==t&&!$t(t)&&(l._next=l.next,l.next=()=>{const u=l._next();return u.value&&(u.value=n(u.value)),u}),l}const El=Array.prototype;function te(t,e,n,a,l,u){const p=En(t),c=p!==t&&!$t(t),s=p[e];if(s!==El[e]){const o=s.apply(t,u);return c?zt(o):o}let i=n;p!==t&&(c?i=function(o,g){return n.call(this,zt(o),g,t)}:n.length>2&&(i=function(o,g){return n.call(this,o,g,t)}));const r=s.call(p,i,a);return c&&l?l(r):r}function $n(t,e,n,a){const l=En(t);let u=n;return l!==t&&($t(t)?n.length>3&&(u=function(p,c,s){return n.call(this,p,c,s,t)}):u=function(p,c,s){return n.call(this,p,zt(c),s,t)}),l[e](u,...a)}function xi(t,e,n){const a=wt(t);Ft(a,"iterate",dr);const l=a[e](...n);return(l===-1||l===!1)&&Dn(n[0])?(n[0]=wt(n[0]),a[e](...n)):l}function Ie(t,e,n=[]){ue(),An();const a=wt(t)[e].apply(t,n);return On(),ce(),a}const Fl=Sn("__proto__,__v_isRef,__isVue"),fs=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(De));function Rl(t){De(t)||(t=String(t));const e=wt(this);return Ft(e,"has",t),e.hasOwnProperty(t)}class ds{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,a){if(n==="__v_skip")return e.__v_skip;const l=this._isReadonly,u=this._isShallow;if(n==="__v_isReactive")return!l;if(n==="__v_isReadonly")return l;if(n==="__v_isShallow")return u;if(n==="__v_raw")return a===(l?u?Bl:_s:u?vs:gs).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(a)?e:void 0;const p=dt(e);if(!l){let s;if(p&&(s=Ml[n]))return s;if(n==="hasOwnProperty")return Rl}const c=Reflect.get(e,n,Gt(e)?e:a);return(De(n)?fs.has(n):Fl(n))||(l||Ft(e,"get",n),u)?c:Gt(c)?p&&xn(n)?c:c.value:At(c)?l?ys(c):Rn(c):c}}class ps extends ds{constructor(e=!1){super(!1,e)}set(e,n,a,l){let u=e[n];if(!this._isShallow){const s=Fe(u);if(!$t(a)&&!Fe(a)&&(u=wt(u),a=wt(a)),!dt(e)&&Gt(u)&&!Gt(a))return s?!1:(u.value=a,!0)}const p=dt(e)&&xn(n)?Number(n)<e.length:St(e,n),c=Reflect.set(e,n,a,Gt(e)?e:l);return e===wt(l)&&(p?me(a,u)&&re(e,"set",n,a):re(e,"add",n,a)),c}deleteProperty(e,n){const a=St(e,n);e[n];const l=Reflect.deleteProperty(e,n);return l&&a&&re(e,"delete",n,void 0),l}has(e,n){const a=Reflect.has(e,n);return(!De(n)||!fs.has(n))&&Ft(e,"has",n),a}ownKeys(e){return Ft(e,"iterate",dt(e)?"length":be),Reflect.ownKeys(e)}}class Nl extends ds{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Dl=new ps,Gl=new Nl,Il=new ps(!0);const dn=t=>t,Sr=t=>Reflect.getPrototypeOf(t);function kl(t,e,n){return function(...a){const l=this.__v_raw,u=wt(l),p=nr(u),c=t==="entries"||t===Symbol.iterator&&p,s=t==="keys"&&p,i=l[t](...a),r=n?dn:e?pn:zt;return!e&&Ft(u,"iterate",s?fn:be),{next(){const{value:o,done:g}=i.next();return g?{value:o,done:g}:{value:c?[r(o[0]),r(o[1])]:r(o),done:g}},[Symbol.iterator](){return this}}}}function Cr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ll(t,e){const n={get(l){const u=this.__v_raw,p=wt(u),c=wt(l);t||(me(l,c)&&Ft(p,"get",l),Ft(p,"get",c));const{has:s}=Sr(p),i=e?dn:t?pn:zt;if(s.call(p,l))return i(u.get(l));if(s.call(p,c))return i(u.get(c));u!==p&&u.get(l)},get size(){const l=this.__v_raw;return!t&&Ft(wt(l),"iterate",be),Reflect.get(l,"size",l)},has(l){const u=this.__v_raw,p=wt(u),c=wt(l);return t||(me(l,c)&&Ft(p,"has",l),Ft(p,"has",c)),l===c?u.has(l):u.has(l)||u.has(c)},forEach(l,u){const p=this,c=p.__v_raw,s=wt(c),i=e?dn:t?pn:zt;return!t&&Ft(s,"iterate",be),c.forEach((r,o)=>l.call(u,i(r),i(o),p))}};return It(n,t?{add:Cr("add"),set:Cr("set"),delete:Cr("delete"),clear:Cr("clear")}:{add(l){!e&&!$t(l)&&!Fe(l)&&(l=wt(l));const u=wt(this);return Sr(u).has.call(u,l)||(u.add(l),re(u,"add",l,l)),this},set(l,u){!e&&!$t(u)&&!Fe(u)&&(u=wt(u));const p=wt(this),{has:c,get:s}=Sr(p);let i=c.call(p,l);i||(l=wt(l),i=c.call(p,l));const r=s.call(p,l);return p.set(l,u),i?me(u,r)&&re(p,"set",l,u):re(p,"add",l,u),this},delete(l){const u=wt(this),{has:p,get:c}=Sr(u);let s=p.call(u,l);s||(l=wt(l),s=p.call(u,l)),c&&c.call(u,l);const i=u.delete(l);return s&&re(u,"delete",l,void 0),i},clear(){const l=wt(this),u=l.size!==0,p=l.clear();return u&&re(l,"clear",void 0,void 0),p}}),["keys","values","entries",Symbol.iterator].forEach(l=>{n[l]=kl(l,t,e)}),n}function Fn(t,e){const n=Ll(t,e);return(a,l,u)=>l==="__v_isReactive"?!t:l==="__v_isReadonly"?t:l==="__v_raw"?a:Reflect.get(St(n,l)&&l in a?n:a,l,u)}const zl={get:Fn(!1,!1)},Ul={get:Fn(!1,!0)},Vl={get:Fn(!0,!1)};const gs=new WeakMap,vs=new WeakMap,_s=new WeakMap,Bl=new WeakMap;function Hl(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ql(t){return t.__v_skip||!Object.isExtensible(t)?0:Hl(pl(t))}function Rn(t){return Fe(t)?t:Nn(t,!1,Dl,zl,gs)}function Wl(t){return Nn(t,!1,Il,Ul,vs)}function ys(t){return Nn(t,!0,Gl,Vl,_s)}function Nn(t,e,n,a,l){if(!At(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const u=l.get(t);if(u)return u;const p=ql(t);if(p===0)return t;const c=new Proxy(t,p===2?a:n);return l.set(t,c),c}function lr(t){return Fe(t)?lr(t.__v_raw):!!(t&&t.__v_isReactive)}function Fe(t){return!!(t&&t.__v_isReadonly)}function $t(t){return!!(t&&t.__v_isShallow)}function Dn(t){return t?!!t.__v_raw:!1}function wt(t){const e=t&&t.__v_raw;return e?wt(e):t}function jl(t){return!St(t,"__v_skip")&&Object.isExtensible(t)&&es(t,"__v_skip",!0),t}const zt=t=>At(t)?Rn(t):t,pn=t=>At(t)?ys(t):t;function Gt(t){return t?t.__v_isRef===!0:!1}function Kl(t){return Gt(t)?t.value:t}const Yl={get:(t,e,n)=>e==="__v_raw"?t:Kl(Reflect.get(t,e,n)),set:(t,e,n,a)=>{const l=t[e];return Gt(l)&&!Gt(n)?(l.value=n,!0):Reflect.set(t,e,n,a)}};function ms(t){return lr(t)?t:new Proxy(t,Yl)}class Xl{constructor(e,n,a){this.fn=e,this.setter=n,this._value=void 0,this.dep=new us(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return as(this,!0),!0}get value(){const e=this.dep.track();return ls(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function $l(t,e,n=!1){let a,l;return pt(t)?a=t:(a=t.get,l=t.set),new Xl(a,l,n)}const wr={},Qr=new WeakMap;let _e;function Jl(t,e=!1,n=_e){if(n){let a=Qr.get(n);a||Qr.set(n,a=[]),a.push(t)}}function Ql(t,e,n=Pt){const{immediate:a,deep:l,once:u,scheduler:p,augmentJob:c,call:s}=n,i=d=>l?d:$t(d)||l===!1||l===0?le(d,1):le(d);let r,o,g,f,v=!1,_=!1;if(Gt(t)?(o=()=>t.value,v=$t(t)):lr(t)?(o=()=>i(t),v=!0):dt(t)?(_=!0,v=t.some(d=>lr(d)||$t(d)),o=()=>t.map(d=>{if(Gt(d))return d.value;if(lr(d))return i(d);if(pt(d))return s?s(d,2):d()})):pt(t)?e?o=s?()=>s(t,2):t:o=()=>{if(g){ue();try{g()}finally{ce()}}const d=_e;_e=r;try{return s?s(t,3,[f]):t(f)}finally{_e=d}}:o=Xt,e&&l){const d=o,y=l===!0?1/0:l;o=()=>le(d(),y)}const m=Tl(),S=()=>{r.stop(),m&&m.active&&wn(m.effects,r)};if(u&&e){const d=e;e=(...y)=>{d(...y),S()}}let C=_?new Array(t.length).fill(wr):wr;const h=d=>{if(!(!(r.flags&1)||!r.dirty&&!d))if(e){const y=r.run();if(l||v||(_?y.some((x,A)=>me(x,C[A])):me(y,C))){g&&g();const x=_e;_e=r;try{const A=[y,C===wr?void 0:_&&C[0]===wr?[]:C,f];s?s(e,3,A):e(...A),C=y}finally{_e=x}}}else r.run()};return c&&c(h),r=new is(o),r.scheduler=p?()=>p(h,!1):h,f=d=>Jl(d,!1,r),g=r.onStop=()=>{const d=Qr.get(r);if(d){if(s)s(d,4);else for(const y of d)y();Qr.delete(r)}},e?a?h(!0):C=r.run():p?p(h.bind(null,!0),!0):r.run(),S.pause=r.pause.bind(r),S.resume=r.resume.bind(r),S.stop=S,S}function le(t,e=1/0,n){if(e<=0||!At(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Gt(t))le(t.value,e,n);else if(dt(t))for(let a=0;a<t.length;a++)le(t[a],e,n);else if(fl(t)||nr(t))t.forEach(a=>{le(a,e,n)});else if(gl(t)){for(const a in t)le(t[a],e,n);for(const a of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,a)&&le(t[a],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yr(t,e,n,a){try{return a?t(...a):t()}catch(l){hi(l,e,n)}}function Jt(t,e,n,a){if(pt(t)){const l=yr(t,e,n,a);return l&&Zo(l)&&l.catch(u=>{hi(u,e,n)}),l}if(dt(t)){const l=[];for(let u=0;u<t.length;u++)l.push(Jt(t[u],e,n,a));return l}}function hi(t,e,n,a=!0){const l=e?e.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:p}=e&&e.appContext.config||Pt;if(e){let c=e.parent;const s=e.proxy,i=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const r=c.ec;if(r){for(let o=0;o<r.length;o++)if(r[o](t,s,i)===!1)return}c=c.parent}if(u){ue(),yr(u,null,10,[t,s,i]),ce();return}}Zl(t,n,l,a,p)}function Zl(t,e,n,a=!0,l=!1){if(l)throw t;console.error(t)}const Nt=[];let Wt=-1;const Me=[];let oe=null,Ae=0;const bs=Promise.resolve();let Zr=null;function th(t){const e=Zr||bs;return t?e.then(this?t.bind(this):t):e}function eh(t){let e=Wt+1,n=Nt.length;for(;e<n;){const a=e+n>>>1,l=Nt[a],u=pr(l);u<t||u===t&&l.flags&2?e=a+1:n=a}return e}function Gn(t){if(!(t.flags&1)){const e=pr(t),n=Nt[Nt.length-1];!n||!(t.flags&2)&&e>=pr(n)?Nt.push(t):Nt.splice(eh(e),0,t),t.flags|=1,Ss()}}function Ss(){Zr||(Zr=bs.then(ws))}function rh(t){dt(t)?Me.push(...t):oe&&t.id===-1?oe.splice(Ae+1,0,t):t.flags&1||(Me.push(t),t.flags|=1),Ss()}function Jn(t,e,n=Wt+1){for(;n<Nt.length;n++){const a=Nt[n];if(a&&a.flags&2){if(t&&a.id!==t.uid)continue;Nt.splice(n,1),n--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function Cs(t){if(Me.length){const e=[...new Set(Me)].sort((n,a)=>pr(n)-pr(a));if(Me.length=0,oe){oe.push(...e);return}for(oe=e,Ae=0;Ae<oe.length;Ae++){const n=oe[Ae];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}oe=null,Ae=0}}const pr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function ws(t){try{for(Wt=0;Wt<Nt.length;Wt++){const e=Nt[Wt];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),yr(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Wt<Nt.length;Wt++){const e=Nt[Wt];e&&(e.flags&=-2)}Wt=-1,Nt.length=0,Cs(),Zr=null,(Nt.length||Me.length)&&ws()}}let Yt=null,xs=null;function ti(t){const e=Yt;return Yt=t,xs=t&&t.type.__scopeId||null,e}function ih(t,e=Yt,n){if(!e||t._n)return t;const a=(...l)=>{a._d&&oa(-1);const u=ti(e);let p;try{p=t(...l)}finally{ti(u),a._d&&oa(1)}return p};return a._n=!0,a._c=!0,a._d=!0,a}function de(t,e,n,a){const l=t.dirs,u=e&&e.dirs;for(let p=0;p<l.length;p++){const c=l[p];u&&(c.oldValue=u[p].value);let s=c.dir[a];s&&(ue(),Jt(s,n,8,[t.el,c,t,e]),ce())}}const nh=Symbol("_vte"),ah=t=>t.__isTeleport;function In(t,e){t.shapeFlag&6&&t.component?(t.transition=e,In(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ps(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function ei(t,e,n,a,l=!1){if(dt(t)){t.forEach((v,_)=>ei(v,e&&(dt(e)?e[_]:e),n,a,l));return}if(hr(a)&&!l){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&ei(t,e,n,a.component.subTree);return}const u=a.shapeFlag&4?zn(a.component):a.el,p=l?null:u,{i:c,r:s}=t,i=e&&e.r,r=c.refs===Pt?c.refs={}:c.refs,o=c.setupState,g=wt(o),f=o===Pt?()=>!1:v=>St(g,v);if(i!=null&&i!==s&&(Ot(i)?(r[i]=null,f(i)&&(o[i]=null)):Gt(i)&&(i.value=null)),pt(s))yr(s,c,12,[p,r]);else{const v=Ot(s),_=Gt(s);if(v||_){const m=()=>{if(t.f){const S=v?f(s)?o[s]:r[s]:s.value;l?dt(S)&&wn(S,u):dt(S)?S.includes(u)||S.push(u):v?(r[s]=[u],f(s)&&(o[s]=r[s])):(s.value=[u],t.k&&(r[t.k]=s.value))}else v?(r[s]=p,f(s)&&(o[s]=p)):_&&(s.value=p,t.k&&(r[t.k]=p))};p?(m.id=-1,kt(m,n)):m()}}}li().requestIdleCallback;li().cancelIdleCallback;const hr=t=>!!t.type.__asyncLoader,Ts=t=>t.type.__isKeepAlive;function oh(t,e){As(t,"a",e)}function sh(t,e){As(t,"da",e)}function As(t,e,n=Dt){const a=t.__wdc||(t.__wdc=()=>{let l=n;for(;l;){if(l.isDeactivated)return;l=l.parent}return t()});if(ui(e,a,n),n){let l=n.parent;for(;l&&l.parent;)Ts(l.parent.vnode)&&lh(a,e,n,l),l=l.parent}}function lh(t,e,n,a){const l=ui(e,t,a,!0);Os(()=>{wn(a[e],l)},n)}function ui(t,e,n=Dt,a=!1){if(n){const l=n[t]||(n[t]=[]),u=e.__weh||(e.__weh=(...p)=>{ue();const c=mr(n),s=Jt(e,n,t,p);return c(),ce(),s});return a?l.unshift(u):l.push(u),u}}const ie=t=>(e,n=Dt)=>{(!_r||t==="sp")&&ui(t,(...a)=>e(...a),n)},hh=ie("bm"),uh=ie("m"),ch=ie("bu"),fh=ie("u"),dh=ie("bum"),Os=ie("um"),ph=ie("sp"),gh=ie("rtg"),vh=ie("rtc");function _h(t,e=Dt){ui("ec",t,e)}const yh=Symbol.for("v-ndc"),gn=t=>t?Xs(t)?zn(t):gn(t.parent):null,ur=It(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>gn(t.parent),$root:t=>gn(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Es(t),$forceUpdate:t=>t.f||(t.f=()=>{Gn(t.update)}),$nextTick:t=>t.n||(t.n=th.bind(t.proxy)),$watch:t=>Uh.bind(t)}),Pi=(t,e)=>t!==Pt&&!t.__isScriptSetup&&St(t,e),mh={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:a,data:l,props:u,accessCache:p,type:c,appContext:s}=t;let i;if(e[0]!=="$"){const f=p[e];if(f!==void 0)switch(f){case 1:return a[e];case 2:return l[e];case 4:return n[e];case 3:return u[e]}else{if(Pi(a,e))return p[e]=1,a[e];if(l!==Pt&&St(l,e))return p[e]=2,l[e];if((i=t.propsOptions[0])&&St(i,e))return p[e]=3,u[e];if(n!==Pt&&St(n,e))return p[e]=4,n[e];vn&&(p[e]=0)}}const r=ur[e];let o,g;if(r)return e==="$attrs"&&Ft(t.attrs,"get",""),r(t);if((o=c.__cssModules)&&(o=o[e]))return o;if(n!==Pt&&St(n,e))return p[e]=4,n[e];if(g=s.config.globalProperties,St(g,e))return g[e]},set({_:t},e,n){const{data:a,setupState:l,ctx:u}=t;return Pi(l,e)?(l[e]=n,!0):a!==Pt&&St(a,e)?(a[e]=n,!0):St(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(u[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:a,appContext:l,propsOptions:u}},p){let c;return!!n[p]||t!==Pt&&St(t,p)||Pi(e,p)||(c=u[0])&&St(c,p)||St(a,p)||St(ur,p)||St(l.config.globalProperties,p)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:St(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Qn(t){return dt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let vn=!0;function bh(t){const e=Es(t),n=t.proxy,a=t.ctx;vn=!1,e.beforeCreate&&Zn(e.beforeCreate,t,"bc");const{data:l,computed:u,methods:p,watch:c,provide:s,inject:i,created:r,beforeMount:o,mounted:g,beforeUpdate:f,updated:v,activated:_,deactivated:m,beforeDestroy:S,beforeUnmount:C,destroyed:h,unmounted:d,render:y,renderTracked:x,renderTriggered:A,errorCaptured:E,serverPrefetch:F,expose:M,inheritAttrs:T,components:D,directives:I,filters:O}=e;if(i&&Sh(i,a,null),p)for(const P in p){const R=p[P];pt(R)&&(a[P]=R.bind(n))}if(l){const P=l.call(n,n);At(P)&&(t.data=Rn(P))}if(vn=!0,u)for(const P in u){const R=u[P],L=pt(R)?R.bind(n,n):pt(R.get)?R.get.bind(n,n):Xt,V=!pt(R)&&pt(R.set)?R.set.bind(n):Xt,z=uu({get:L,set:V});Object.defineProperty(a,P,{enumerable:!0,configurable:!0,get:()=>z.value,set:H=>z.value=H})}if(c)for(const P in c)Ms(c[P],a,n,P);if(s){const P=pt(s)?s.call(n):s;Reflect.ownKeys(P).forEach(R=>{Ah(R,P[R])})}r&&Zn(r,t,"c");function w(P,R){dt(R)?R.forEach(L=>P(L.bind(n))):R&&P(R.bind(n))}if(w(hh,o),w(uh,g),w(ch,f),w(fh,v),w(oh,_),w(sh,m),w(_h,E),w(vh,x),w(gh,A),w(dh,C),w(Os,d),w(ph,F),dt(M))if(M.length){const P=t.exposed||(t.exposed={});M.forEach(R=>{Object.defineProperty(P,R,{get:()=>n[R],set:L=>n[R]=L})})}else t.exposed||(t.exposed={});y&&t.render===Xt&&(t.render=y),T!=null&&(t.inheritAttrs=T),D&&(t.components=D),I&&(t.directives=I),F&&Ps(t)}function Sh(t,e,n=Xt){dt(t)&&(t=_n(t));for(const a in t){const l=t[a];let u;At(l)?"default"in l?u=Xr(l.from||a,l.default,!0):u=Xr(l.from||a):u=Xr(l),Gt(u)?Object.defineProperty(e,a,{enumerable:!0,configurable:!0,get:()=>u.value,set:p=>u.value=p}):e[a]=u}}function Zn(t,e,n){Jt(dt(t)?t.map(a=>a.bind(e.proxy)):t.bind(e.proxy),e,n)}function Ms(t,e,n,a){let l=a.includes(".")?qs(n,a):()=>n[a];if(Ot(t)){const u=e[t];pt(u)&&Ai(l,u)}else if(pt(t))Ai(l,t.bind(n));else if(At(t))if(dt(t))t.forEach(u=>Ms(u,e,n,a));else{const u=pt(t.handler)?t.handler.bind(n):e[t.handler];pt(u)&&Ai(l,u,t)}}function Es(t){const e=t.type,{mixins:n,extends:a}=e,{mixins:l,optionsCache:u,config:{optionMergeStrategies:p}}=t.appContext,c=u.get(e);let s;return c?s=c:!l.length&&!n&&!a?s=e:(s={},l.length&&l.forEach(i=>ri(s,i,p,!0)),ri(s,e,p)),At(e)&&u.set(e,s),s}function ri(t,e,n,a=!1){const{mixins:l,extends:u}=e;u&&ri(t,u,n,!0),l&&l.forEach(p=>ri(t,p,n,!0));for(const p in e)if(!(a&&p==="expose")){const c=Ch[p]||n&&n[p];t[p]=c?c(t[p],e[p]):e[p]}return t}const Ch={data:ta,props:ea,emits:ea,methods:ir,computed:ir,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:ir,directives:ir,watch:xh,provide:ta,inject:wh};function ta(t,e){return e?t?function(){return It(pt(t)?t.call(this,this):t,pt(e)?e.call(this,this):e)}:e:t}function wh(t,e){return ir(_n(t),_n(e))}function _n(t){if(dt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Rt(t,e){return t?[...new Set([].concat(t,e))]:e}function ir(t,e){return t?It(Object.create(null),t,e):e}function ea(t,e){return t?dt(t)&&dt(e)?[...new Set([...t,...e])]:It(Object.create(null),Qn(t),Qn(e??{})):e}function xh(t,e){if(!t)return e;if(!e)return t;const n=It(Object.create(null),t);for(const a in e)n[a]=Rt(t[a],e[a]);return n}function Fs(){return{app:null,config:{isNativeTag:ul,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ph=0;function Th(t,e){return function(a,l=null){pt(a)||(a=It({},a)),l!=null&&!At(l)&&(l=null);const u=Fs(),p=new WeakSet,c=[];let s=!1;const i=u.app={_uid:Ph++,_component:a,_props:l,_container:null,_context:u,_instance:null,version:cu,get config(){return u.config},set config(r){},use(r,...o){return p.has(r)||(r&&pt(r.install)?(p.add(r),r.install(i,...o)):pt(r)&&(p.add(r),r(i,...o))),i},mixin(r){return u.mixins.includes(r)||u.mixins.push(r),i},component(r,o){return o?(u.components[r]=o,i):u.components[r]},directive(r,o){return o?(u.directives[r]=o,i):u.directives[r]},mount(r,o,g){if(!s){const f=i._ceVNode||Se(a,l);return f.appContext=u,g===!0?g="svg":g===!1&&(g=void 0),t(f,r,g),s=!0,i._container=r,r.__vue_app__=i,zn(f.component)}},onUnmount(r){c.push(r)},unmount(){s&&(Jt(c,i._instance,16),t(null,i._container),delete i._container.__vue_app__)},provide(r,o){return u.provides[r]=o,i},runWithContext(r){const o=Ee;Ee=i;try{return r()}finally{Ee=o}}};return i}}let Ee=null;function Ah(t,e){if(Dt){let n=Dt.provides;const a=Dt.parent&&Dt.parent.provides;a===n&&(n=Dt.provides=Object.create(a)),n[t]=e}}function Xr(t,e,n=!1){const a=Dt||Yt;if(a||Ee){const l=Ee?Ee._context.provides:a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(l&&t in l)return l[t];if(arguments.length>1)return n&&pt(e)?e.call(a&&a.proxy):e}}const Rs={},Ns=()=>Object.create(Rs),Ds=t=>Object.getPrototypeOf(t)===Rs;function Oh(t,e,n,a=!1){const l={},u=Ns();t.propsDefaults=Object.create(null),Gs(t,e,l,u);for(const p in t.propsOptions[0])p in l||(l[p]=void 0);n?t.props=a?l:Wl(l):t.type.props?t.props=l:t.props=u,t.attrs=u}function Mh(t,e,n,a){const{props:l,attrs:u,vnode:{patchFlag:p}}=t,c=wt(l),[s]=t.propsOptions;let i=!1;if((a||p>0)&&!(p&16)){if(p&8){const r=t.vnode.dynamicProps;for(let o=0;o<r.length;o++){let g=r[o];if(ci(t.emitsOptions,g))continue;const f=e[g];if(s)if(St(u,g))f!==u[g]&&(u[g]=f,i=!0);else{const v=he(g);l[v]=yn(s,c,v,f,t,!1)}else f!==u[g]&&(u[g]=f,i=!0)}}}else{Gs(t,e,l,u)&&(i=!0);let r;for(const o in c)(!e||!St(e,o)&&((r=Ce(o))===o||!St(e,r)))&&(s?n&&(n[o]!==void 0||n[r]!==void 0)&&(l[o]=yn(s,c,o,void 0,t,!0)):delete l[o]);if(u!==c)for(const o in u)(!e||!St(e,o))&&(delete u[o],i=!0)}i&&re(t.attrs,"set","")}function Gs(t,e,n,a){const[l,u]=t.propsOptions;let p=!1,c;if(e)for(let s in e){if(ar(s))continue;const i=e[s];let r;l&&St(l,r=he(s))?!u||!u.includes(r)?n[r]=i:(c||(c={}))[r]=i:ci(t.emitsOptions,s)||(!(s in a)||i!==a[s])&&(a[s]=i,p=!0)}if(u){const s=wt(n),i=c||Pt;for(let r=0;r<u.length;r++){const o=u[r];n[o]=yn(l,s,o,i[o],t,!St(i,o))}}return p}function yn(t,e,n,a,l,u){const p=t[n];if(p!=null){const c=St(p,"default");if(c&&a===void 0){const s=p.default;if(p.type!==Function&&!p.skipFactory&&pt(s)){const{propsDefaults:i}=l;if(n in i)a=i[n];else{const r=mr(l);a=i[n]=s.call(null,e),r()}}else a=s;l.ce&&l.ce._setProp(n,a)}p[0]&&(u&&!c?a=!1:p[1]&&(a===""||a===Ce(n))&&(a=!0))}return a}const Eh=new WeakMap;function Is(t,e,n=!1){const a=n?Eh:e.propsCache,l=a.get(t);if(l)return l;const u=t.props,p={},c=[];let s=!1;if(!pt(t)){const r=o=>{s=!0;const[g,f]=Is(o,e,!0);It(p,g),f&&c.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!u&&!s)return At(t)&&a.set(t,Oe),Oe;if(dt(u))for(let r=0;r<u.length;r++){const o=he(u[r]);ra(o)&&(p[o]=Pt)}else if(u)for(const r in u){const o=he(r);if(ra(o)){const g=u[r],f=p[o]=dt(g)||pt(g)?{type:g}:It({},g),v=f.type;let _=!1,m=!0;if(dt(v))for(let S=0;S<v.length;++S){const C=v[S],h=pt(C)&&C.name;if(h==="Boolean"){_=!0;break}else h==="String"&&(m=!1)}else _=pt(v)&&v.name==="Boolean";f[0]=_,f[1]=m,(_||St(f,"default"))&&c.push(o)}}const i=[p,c];return At(t)&&a.set(t,i),i}function ra(t){return t[0]!=="$"&&!ar(t)}const ks=t=>t[0]==="_"||t==="$stable",kn=t=>dt(t)?t.map(Kt):[Kt(t)],Fh=(t,e,n)=>{if(e._n)return e;const a=ih((...l)=>kn(e(...l)),n);return a._c=!1,a},Ls=(t,e,n)=>{const a=t._ctx;for(const l in t){if(ks(l))continue;const u=t[l];if(pt(u))e[l]=Fh(l,u,a);else if(u!=null){const p=kn(u);e[l]=()=>p}}},zs=(t,e)=>{const n=kn(e);t.slots.default=()=>n},Us=(t,e,n)=>{for(const a in e)(n||a!=="_")&&(t[a]=e[a])},Rh=(t,e,n)=>{const a=t.slots=Ns();if(t.vnode.shapeFlag&32){const l=e._;l?(Us(a,e,n),n&&es(a,"_",l,!0)):Ls(e,a)}else e&&zs(t,e)},Nh=(t,e,n)=>{const{vnode:a,slots:l}=t;let u=!0,p=Pt;if(a.shapeFlag&32){const c=e._;c?n&&c===1?u=!1:Us(l,e,n):(u=!e.$stable,Ls(e,l)),p=e}else e&&(zs(t,e),p={default:1});if(u)for(const c in l)!ks(c)&&p[c]==null&&delete l[c]},kt=Kh;function Dh(t){return Gh(t)}function Gh(t,e){const n=li();n.__VUE__=!0;const{insert:a,remove:l,patchProp:u,createElement:p,createText:c,createComment:s,setText:i,setElementText:r,parentNode:o,nextSibling:g,setScopeId:f=Xt,insertStaticContent:v}=t,_=(G,k,U,$=null,j=null,X=null,Q=void 0,Z=null,J=!!k.dynamicChildren)=>{if(G===k)return;G&&!ke(G,k)&&($=et(G),H(G,j,X,!0),G=null),k.patchFlag===-2&&(J=!1,k.dynamicChildren=null);const{type:Y,ref:nt,shapeFlag:rt}=k;switch(Y){case fi:m(G,k,U,$);break;case gr:S(G,k,U,$);break;case Oi:G==null&&C(k,U,$,Q);break;case jt:D(G,k,U,$,j,X,Q,Z,J);break;default:rt&1?y(G,k,U,$,j,X,Q,Z,J):rt&6?I(G,k,U,$,j,X,Q,Z,J):(rt&64||rt&128)&&Y.process(G,k,U,$,j,X,Q,Z,J,st)}nt!=null&&j&&ei(nt,G&&G.ref,X,k||G,!k)},m=(G,k,U,$)=>{if(G==null)a(k.el=c(k.children),U,$);else{const j=k.el=G.el;k.children!==G.children&&i(j,k.children)}},S=(G,k,U,$)=>{G==null?a(k.el=s(k.children||""),U,$):k.el=G.el},C=(G,k,U,$)=>{[G.el,G.anchor]=v(G.children,k,U,$,G.el,G.anchor)},h=({el:G,anchor:k},U,$)=>{let j;for(;G&&G!==k;)j=g(G),a(G,U,$),G=j;a(k,U,$)},d=({el:G,anchor:k})=>{let U;for(;G&&G!==k;)U=g(G),l(G),G=U;l(k)},y=(G,k,U,$,j,X,Q,Z,J)=>{k.type==="svg"?Q="svg":k.type==="math"&&(Q="mathml"),G==null?x(k,U,$,j,X,Q,Z,J):F(G,k,j,X,Q,Z,J)},x=(G,k,U,$,j,X,Q,Z)=>{let J,Y;const{props:nt,shapeFlag:rt,transition:tt,dirs:K}=G;if(J=G.el=p(G.type,X,nt&&nt.is,nt),rt&8?r(J,G.children):rt&16&&E(G.children,J,null,$,j,Ti(G,X),Q,Z),K&&de(G,null,$,"created"),A(J,G,G.scopeId,Q,$),nt){for(const B in nt)B!=="value"&&!ar(B)&&u(J,B,null,nt[B],X,$);"value"in nt&&u(J,"value",null,nt.value,X),(Y=nt.onVnodeBeforeMount)&&qt(Y,$,G)}K&&de(G,null,$,"beforeMount");const N=Ih(j,tt);N&&tt.beforeEnter(J),a(J,k,U),((Y=nt&&nt.onVnodeMounted)||N||K)&&kt(()=>{Y&&qt(Y,$,G),N&&tt.enter(J),K&&de(G,null,$,"mounted")},j)},A=(G,k,U,$,j)=>{if(U&&f(G,U),$)for(let X=0;X<$.length;X++)f(G,$[X]);if(j){let X=j.subTree;if(k===X||js(X.type)&&(X.ssContent===k||X.ssFallback===k)){const Q=j.vnode;A(G,Q,Q.scopeId,Q.slotScopeIds,j.parent)}}},E=(G,k,U,$,j,X,Q,Z,J=0)=>{for(let Y=J;Y<G.length;Y++){const nt=G[Y]=Z?se(G[Y]):Kt(G[Y]);_(null,nt,k,U,$,j,X,Q,Z)}},F=(G,k,U,$,j,X,Q)=>{const Z=k.el=G.el;let{patchFlag:J,dynamicChildren:Y,dirs:nt}=k;J|=G.patchFlag&16;const rt=G.props||Pt,tt=k.props||Pt;let K;if(U&&pe(U,!1),(K=tt.onVnodeBeforeUpdate)&&qt(K,U,k,G),nt&&de(k,G,U,"beforeUpdate"),U&&pe(U,!0),(rt.innerHTML&&tt.innerHTML==null||rt.textContent&&tt.textContent==null)&&r(Z,""),Y?M(G.dynamicChildren,Y,Z,U,$,Ti(k,j),X):Q||R(G,k,Z,null,U,$,Ti(k,j),X,!1),J>0){if(J&16)T(Z,rt,tt,U,j);else if(J&2&&rt.class!==tt.class&&u(Z,"class",null,tt.class,j),J&4&&u(Z,"style",rt.style,tt.style,j),J&8){const N=k.dynamicProps;for(let B=0;B<N.length;B++){const W=N[B],at=rt[W],lt=tt[W];(lt!==at||W==="value")&&u(Z,W,at,lt,j,U)}}J&1&&G.children!==k.children&&r(Z,k.children)}else!Q&&Y==null&&T(Z,rt,tt,U,j);((K=tt.onVnodeUpdated)||nt)&&kt(()=>{K&&qt(K,U,k,G),nt&&de(k,G,U,"updated")},$)},M=(G,k,U,$,j,X,Q)=>{for(let Z=0;Z<k.length;Z++){const J=G[Z],Y=k[Z],nt=J.el&&(J.type===jt||!ke(J,Y)||J.shapeFlag&70)?o(J.el):U;_(J,Y,nt,null,$,j,X,Q,!0)}},T=(G,k,U,$,j)=>{if(k!==U){if(k!==Pt)for(const X in k)!ar(X)&&!(X in U)&&u(G,X,k[X],null,j,$);for(const X in U){if(ar(X))continue;const Q=U[X],Z=k[X];Q!==Z&&X!=="value"&&u(G,X,Z,Q,j,$)}"value"in U&&u(G,"value",k.value,U.value,j)}},D=(G,k,U,$,j,X,Q,Z,J)=>{const Y=k.el=G?G.el:c(""),nt=k.anchor=G?G.anchor:c("");let{patchFlag:rt,dynamicChildren:tt,slotScopeIds:K}=k;K&&(Z=Z?Z.concat(K):K),G==null?(a(Y,U,$),a(nt,U,$),E(k.children||[],U,nt,j,X,Q,Z,J)):rt>0&&rt&64&&tt&&G.dynamicChildren?(M(G.dynamicChildren,tt,U,j,X,Q,Z),(k.key!=null||j&&k===j.subTree)&&Vs(G,k,!0)):R(G,k,U,nt,j,X,Q,Z,J)},I=(G,k,U,$,j,X,Q,Z,J)=>{k.slotScopeIds=Z,G==null?k.shapeFlag&512?j.ctx.activate(k,U,$,Q,J):O(k,U,$,j,X,Q,J):b(G,k,J)},O=(G,k,U,$,j,X,Q)=>{const Z=G.component=nu(G,$,j);if(Ts(G)&&(Z.ctx.renderer=st),au(Z,!1,Q),Z.asyncDep){if(j&&j.registerDep(Z,w,Q),!G.el){const J=Z.subTree=Se(gr);S(null,J,k,U)}}else w(Z,G,k,U,j,X,Q)},b=(G,k,U)=>{const $=k.component=G.component;if(Wh(G,k,U))if($.asyncDep&&!$.asyncResolved){P($,k,U);return}else $.next=k,$.update();else k.el=G.el,$.vnode=k},w=(G,k,U,$,j,X,Q)=>{const Z=()=>{if(G.isMounted){let{next:rt,bu:tt,u:K,parent:N,vnode:B}=G;{const bt=Bs(G);if(bt){rt&&(rt.el=B.el,P(G,rt,Q)),bt.asyncDep.then(()=>{G.isUnmounted||Z()});return}}let W=rt,at;pe(G,!1),rt?(rt.el=B.el,P(G,rt,Q)):rt=B,tt&&Si(tt),(at=rt.props&&rt.props.onVnodeBeforeUpdate)&&qt(at,N,rt,B),pe(G,!0);const lt=na(G),ct=G.subTree;G.subTree=lt,_(ct,lt,o(ct.el),et(ct),G,j,X),rt.el=lt.el,W===null&&jh(G,lt.el),K&&kt(K,j),(at=rt.props&&rt.props.onVnodeUpdated)&&kt(()=>qt(at,N,rt,B),j)}else{let rt;const{el:tt,props:K}=k,{bm:N,m:B,parent:W,root:at,type:lt}=G,ct=hr(k);pe(G,!1),N&&Si(N),!ct&&(rt=K&&K.onVnodeBeforeMount)&&qt(rt,W,k),pe(G,!0);{at.ce&&at.ce._injectChildStyle(lt);const bt=G.subTree=na(G);_(null,bt,U,$,G,j,X),k.el=bt.el}if(B&&kt(B,j),!ct&&(rt=K&&K.onVnodeMounted)){const bt=k;kt(()=>qt(rt,W,bt),j)}(k.shapeFlag&256||W&&hr(W.vnode)&&W.vnode.shapeFlag&256)&&G.a&&kt(G.a,j),G.isMounted=!0,k=U=$=null}};G.scope.on();const J=G.effect=new is(Z);G.scope.off();const Y=G.update=J.run.bind(J),nt=G.job=J.runIfDirty.bind(J);nt.i=G,nt.id=G.uid,J.scheduler=()=>Gn(nt),pe(G,!0),Y()},P=(G,k,U)=>{k.component=G;const $=G.vnode.props;G.vnode=k,G.next=null,Mh(G,k.props,$,U),Nh(G,k.children,U),ue(),Jn(G),ce()},R=(G,k,U,$,j,X,Q,Z,J=!1)=>{const Y=G&&G.children,nt=G?G.shapeFlag:0,rt=k.children,{patchFlag:tt,shapeFlag:K}=k;if(tt>0){if(tt&128){V(Y,rt,U,$,j,X,Q,Z,J);return}else if(tt&256){L(Y,rt,U,$,j,X,Q,Z,J);return}}K&8?(nt&16&&ut(Y,j,X),rt!==Y&&r(U,rt)):nt&16?K&16?V(Y,rt,U,$,j,X,Q,Z,J):ut(Y,j,X,!0):(nt&8&&r(U,""),K&16&&E(rt,U,$,j,X,Q,Z,J))},L=(G,k,U,$,j,X,Q,Z,J)=>{G=G||Oe,k=k||Oe;const Y=G.length,nt=k.length,rt=Math.min(Y,nt);let tt;for(tt=0;tt<rt;tt++){const K=k[tt]=J?se(k[tt]):Kt(k[tt]);_(G[tt],K,U,null,j,X,Q,Z,J)}Y>nt?ut(G,j,X,!0,!1,rt):E(k,U,$,j,X,Q,Z,J,rt)},V=(G,k,U,$,j,X,Q,Z,J)=>{let Y=0;const nt=k.length;let rt=G.length-1,tt=nt-1;for(;Y<=rt&&Y<=tt;){const K=G[Y],N=k[Y]=J?se(k[Y]):Kt(k[Y]);if(ke(K,N))_(K,N,U,null,j,X,Q,Z,J);else break;Y++}for(;Y<=rt&&Y<=tt;){const K=G[rt],N=k[tt]=J?se(k[tt]):Kt(k[tt]);if(ke(K,N))_(K,N,U,null,j,X,Q,Z,J);else break;rt--,tt--}if(Y>rt){if(Y<=tt){const K=tt+1,N=K<nt?k[K].el:$;for(;Y<=tt;)_(null,k[Y]=J?se(k[Y]):Kt(k[Y]),U,N,j,X,Q,Z,J),Y++}}else if(Y>tt)for(;Y<=rt;)H(G[Y],j,X,!0),Y++;else{const K=Y,N=Y,B=new Map;for(Y=N;Y<=tt;Y++){const Ct=k[Y]=J?se(k[Y]):Kt(k[Y]);Ct.key!=null&&B.set(Ct.key,Y)}let W,at=0;const lt=tt-N+1;let ct=!1,bt=0;const Et=new Array(lt);for(Y=0;Y<lt;Y++)Et[Y]=0;for(Y=K;Y<=rt;Y++){const Ct=G[Y];if(at>=lt){H(Ct,j,X,!0);continue}let Vt;if(Ct.key!=null)Vt=B.get(Ct.key);else for(W=N;W<=tt;W++)if(Et[W-N]===0&&ke(Ct,k[W])){Vt=W;break}Vt===void 0?H(Ct,j,X,!0):(Et[Vt-N]=Y+1,Vt>=bt?bt=Vt:ct=!0,_(Ct,k[Vt],U,null,j,X,Q,Z,J),at++)}const Zt=ct?kh(Et):Oe;for(W=Zt.length-1,Y=lt-1;Y>=0;Y--){const Ct=N+Y,Vt=k[Ct],Kn=Ct+1<nt?k[Ct+1].el:$;Et[Y]===0?_(null,Vt,U,Kn,j,X,Q,Z,J):ct&&(W<0||Y!==Zt[W]?z(Vt,U,Kn,2):W--)}}},z=(G,k,U,$,j=null)=>{const{el:X,type:Q,transition:Z,children:J,shapeFlag:Y}=G;if(Y&6){z(G.component.subTree,k,U,$);return}if(Y&128){G.suspense.move(k,U,$);return}if(Y&64){Q.move(G,k,U,st);return}if(Q===jt){a(X,k,U);for(let rt=0;rt<J.length;rt++)z(J[rt],k,U,$);a(G.anchor,k,U);return}if(Q===Oi){h(G,k,U);return}if($!==2&&Y&1&&Z)if($===0)Z.beforeEnter(X),a(X,k,U),kt(()=>Z.enter(X),j);else{const{leave:rt,delayLeave:tt,afterLeave:K}=Z,N=()=>a(X,k,U),B=()=>{rt(X,()=>{N(),K&&K()})};tt?tt(X,N,B):B()}else a(X,k,U)},H=(G,k,U,$=!1,j=!1)=>{const{type:X,props:Q,ref:Z,children:J,dynamicChildren:Y,shapeFlag:nt,patchFlag:rt,dirs:tt,cacheIndex:K}=G;if(rt===-2&&(j=!1),Z!=null&&ei(Z,null,U,G,!0),K!=null&&(k.renderCache[K]=void 0),nt&256){k.ctx.deactivate(G);return}const N=nt&1&&tt,B=!hr(G);let W;if(B&&(W=Q&&Q.onVnodeBeforeUnmount)&&qt(W,k,G),nt&6)ht(G.component,U,$);else{if(nt&128){G.suspense.unmount(U,$);return}N&&de(G,null,k,"beforeUnmount"),nt&64?G.type.remove(G,k,U,st,$):Y&&!Y.hasOnce&&(X!==jt||rt>0&&rt&64)?ut(Y,k,U,!1,!0):(X===jt&&rt&384||!j&&nt&16)&&ut(J,k,U),$&&q(G)}(B&&(W=Q&&Q.onVnodeUnmounted)||N)&&kt(()=>{W&&qt(W,k,G),N&&de(G,null,k,"unmounted")},U)},q=G=>{const{type:k,el:U,anchor:$,transition:j}=G;if(k===jt){it(U,$);return}if(k===Oi){d(G);return}const X=()=>{l(U),j&&!j.persisted&&j.afterLeave&&j.afterLeave()};if(G.shapeFlag&1&&j&&!j.persisted){const{leave:Q,delayLeave:Z}=j,J=()=>Q(U,X);Z?Z(G.el,X,J):J()}else X()},it=(G,k)=>{let U;for(;G!==k;)U=g(G),l(G),G=U;l(k)},ht=(G,k,U)=>{const{bum:$,scope:j,job:X,subTree:Q,um:Z,m:J,a:Y}=G;ia(J),ia(Y),$&&Si($),j.stop(),X&&(X.flags|=8,H(Q,G,k,U)),Z&&kt(Z,k),kt(()=>{G.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},ut=(G,k,U,$=!1,j=!1,X=0)=>{for(let Q=X;Q<G.length;Q++)H(G[Q],k,U,$,j)},et=G=>{if(G.shapeFlag&6)return et(G.component.subTree);if(G.shapeFlag&128)return G.suspense.next();const k=g(G.anchor||G.el),U=k&&k[nh];return U?g(U):k};let ot=!1;const ft=(G,k,U)=>{G==null?k._vnode&&H(k._vnode,null,null,!0):_(k._vnode||null,G,k,null,null,null,U),k._vnode=G,ot||(ot=!0,Jn(),Cs(),ot=!1)},st={p:_,um:H,m:z,r:q,mt:O,mc:E,pc:R,pbc:M,n:et,o:t};return{render:ft,hydrate:void 0,createApp:Th(ft)}}function Ti({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function pe({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Ih(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Vs(t,e,n=!1){const a=t.children,l=e.children;if(dt(a)&&dt(l))for(let u=0;u<a.length;u++){const p=a[u];let c=l[u];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=l[u]=se(l[u]),c.el=p.el),!n&&c.patchFlag!==-2&&Vs(p,c)),c.type===fi&&(c.el=p.el)}}function kh(t){const e=t.slice(),n=[0];let a,l,u,p,c;const s=t.length;for(a=0;a<s;a++){const i=t[a];if(i!==0){if(l=n[n.length-1],t[l]<i){e[a]=l,n.push(a);continue}for(u=0,p=n.length-1;u<p;)c=u+p>>1,t[n[c]]<i?u=c+1:p=c;i<t[n[u]]&&(u>0&&(e[a]=n[u-1]),n[u]=a)}}for(u=n.length,p=n[u-1];u-- >0;)n[u]=p,p=e[p];return n}function Bs(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Bs(e)}function ia(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Lh=Symbol.for("v-scx"),zh=()=>Xr(Lh);function Ai(t,e,n){return Hs(t,e,n)}function Hs(t,e,n=Pt){const{immediate:a,deep:l,flush:u,once:p}=n,c=It({},n),s=e&&a||!e&&u!=="post";let i;if(_r){if(u==="sync"){const f=zh();i=f.__watcherHandles||(f.__watcherHandles=[])}else if(!s){const f=()=>{};return f.stop=Xt,f.resume=Xt,f.pause=Xt,f}}const r=Dt;c.call=(f,v,_)=>Jt(f,r,v,_);let o=!1;u==="post"?c.scheduler=f=>{kt(f,r&&r.suspense)}:u!=="sync"&&(o=!0,c.scheduler=(f,v)=>{v?f():Gn(f)}),c.augmentJob=f=>{e&&(f.flags|=4),o&&(f.flags|=2,r&&(f.id=r.uid,f.i=r))};const g=Ql(t,e,c);return _r&&(i?i.push(g):s&&g()),g}function Uh(t,e,n){const a=this.proxy,l=Ot(t)?t.includes(".")?qs(a,t):()=>a[t]:t.bind(a,a);let u;pt(e)?u=e:(u=e.handler,n=e);const p=mr(this),c=Hs(l,u.bind(a),n);return p(),c}function qs(t,e){const n=e.split(".");return()=>{let a=t;for(let l=0;l<n.length&&a;l++)a=a[n[l]];return a}}const Vh=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${he(e)}Modifiers`]||t[`${Ce(e)}Modifiers`];function Bh(t,e,...n){if(t.isUnmounted)return;const a=t.vnode.props||Pt;let l=n;const u=e.startsWith("update:"),p=u&&Vh(a,e.slice(7));p&&(p.trim&&(l=n.map(r=>Ot(r)?r.trim():r)),p.number&&(l=n.map(yl)));let c,s=a[c=bi(e)]||a[c=bi(he(e))];!s&&u&&(s=a[c=bi(Ce(e))]),s&&Jt(s,t,6,l);const i=a[c+"Once"];if(i){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,Jt(i,t,6,l)}}function Ws(t,e,n=!1){const a=e.emitsCache,l=a.get(t);if(l!==void 0)return l;const u=t.emits;let p={},c=!1;if(!pt(t)){const s=i=>{const r=Ws(i,e,!0);r&&(c=!0,It(p,r))};!n&&e.mixins.length&&e.mixins.forEach(s),t.extends&&s(t.extends),t.mixins&&t.mixins.forEach(s)}return!u&&!c?(At(t)&&a.set(t,null),null):(dt(u)?u.forEach(s=>p[s]=null):It(p,u),At(t)&&a.set(t,p),p)}function ci(t,e){return!t||!ai(e)?!1:(e=e.slice(2).replace(/Once$/,""),St(t,e[0].toLowerCase()+e.slice(1))||St(t,Ce(e))||St(t,e))}function na(t){const{type:e,vnode:n,proxy:a,withProxy:l,propsOptions:[u],slots:p,attrs:c,emit:s,render:i,renderCache:r,props:o,data:g,setupState:f,ctx:v,inheritAttrs:_}=t,m=ti(t);let S,C;try{if(n.shapeFlag&4){const d=l||a,y=d;S=Kt(i.call(y,d,r,o,f,g,v)),C=c}else{const d=e;S=Kt(d.length>1?d(o,{attrs:c,slots:p,emit:s}):d(o,null)),C=e.props?c:Hh(c)}}catch(d){cr.length=0,hi(d,t,1),S=Se(gr)}let h=S;if(C&&_!==!1){const d=Object.keys(C),{shapeFlag:y}=h;d.length&&y&7&&(u&&d.some(Cn)&&(C=qh(C,u)),h=Re(h,C,!1,!0))}return n.dirs&&(h=Re(h,null,!1,!0),h.dirs=h.dirs?h.dirs.concat(n.dirs):n.dirs),n.transition&&In(h,n.transition),S=h,ti(m),S}const Hh=t=>{let e;for(const n in t)(n==="class"||n==="style"||ai(n))&&((e||(e={}))[n]=t[n]);return e},qh=(t,e)=>{const n={};for(const a in t)(!Cn(a)||!(a.slice(9)in e))&&(n[a]=t[a]);return n};function Wh(t,e,n){const{props:a,children:l,component:u}=t,{props:p,children:c,patchFlag:s}=e,i=u.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&s>=0){if(s&1024)return!0;if(s&16)return a?aa(a,p,i):!!p;if(s&8){const r=e.dynamicProps;for(let o=0;o<r.length;o++){const g=r[o];if(p[g]!==a[g]&&!ci(i,g))return!0}}}else return(l||c)&&(!c||!c.$stable)?!0:a===p?!1:a?p?aa(a,p,i):!0:!!p;return!1}function aa(t,e,n){const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!0;for(let l=0;l<a.length;l++){const u=a[l];if(e[u]!==t[u]&&!ci(n,u))return!0}return!1}function jh({vnode:t,parent:e},n){for(;e;){const a=e.subTree;if(a.suspense&&a.suspense.activeBranch===t&&(a.el=t.el),a===t)(t=e.vnode).el=n,e=e.parent;else break}}const js=t=>t.__isSuspense;function Kh(t,e){e&&e.pendingBranch?dt(t)?e.effects.push(...t):e.effects.push(t):rh(t)}const jt=Symbol.for("v-fgt"),fi=Symbol.for("v-txt"),gr=Symbol.for("v-cmt"),Oi=Symbol.for("v-stc"),cr=[];let Ut=null;function Yh(t=!1){cr.push(Ut=t?null:[])}function Xh(){cr.pop(),Ut=cr[cr.length-1]||null}let vr=1;function oa(t,e=!1){vr+=t,t<0&&Ut&&e&&(Ut.hasOnce=!0)}function $h(t){return t.dynamicChildren=vr>0?Ut||Oe:null,Xh(),vr>0&&Ut&&Ut.push(t),t}function Jh(t,e,n,a,l,u){return $h(ye(t,e,n,a,l,u,!0))}function Ks(t){return t?t.__v_isVNode===!0:!1}function ke(t,e){return t.type===e.type&&t.key===e.key}const Ys=({key:t})=>t??null,$r=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ot(t)||Gt(t)||pt(t)?{i:Yt,r:t,k:e,f:!!n}:t:null);function ye(t,e=null,n=null,a=0,l=null,u=t===jt?0:1,p=!1,c=!1){const s={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ys(e),ref:e&&$r(e),scopeId:xs,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:a,dynamicProps:l,dynamicChildren:null,appContext:null,ctx:Yt};return c?(Ln(s,n),u&128&&t.normalize(s)):n&&(s.shapeFlag|=Ot(n)?8:16),vr>0&&!p&&Ut&&(s.patchFlag>0||u&6)&&s.patchFlag!==32&&Ut.push(s),s}const Se=Qh;function Qh(t,e=null,n=null,a=0,l=null,u=!1){if((!t||t===yh)&&(t=gr),Ks(t)){const c=Re(t,e,!0);return n&&Ln(c,n),vr>0&&!u&&Ut&&(c.shapeFlag&6?Ut[Ut.indexOf(t)]=c:Ut.push(c)),c.patchFlag=-2,c}if(hu(t)&&(t=t.__vccOpts),e){e=Zh(e);let{class:c,style:s}=e;c&&!Ot(c)&&(e.class=Tn(c)),At(s)&&(Dn(s)&&!dt(s)&&(s=It({},s)),e.style=Pn(s))}const p=Ot(t)?1:js(t)?128:ah(t)?64:At(t)?4:pt(t)?2:0;return ye(t,e,n,a,l,p,u,!0)}function Zh(t){return t?Dn(t)||Ds(t)?It({},t):t:null}function Re(t,e,n=!1,a=!1){const{props:l,ref:u,patchFlag:p,children:c,transition:s}=t,i=e?eu(l||{},e):l,r={__v_isVNode:!0,__v_skip:!0,type:t.type,props:i,key:i&&Ys(i),ref:e&&e.ref?n&&u?dt(u)?u.concat($r(e)):[u,$r(e)]:$r(e):u,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==jt?p===-1?16:p|16:p,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:s,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Re(t.ssContent),ssFallback:t.ssFallback&&Re(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return s&&a&&In(r,s.clone(r)),r}function tu(t=" ",e=0){return Se(fi,null,t,e)}function Kt(t){return t==null||typeof t=="boolean"?Se(gr):dt(t)?Se(jt,null,t.slice()):Ks(t)?se(t):Se(fi,null,String(t))}function se(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Re(t)}function Ln(t,e){let n=0;const{shapeFlag:a}=t;if(e==null)e=null;else if(dt(e))n=16;else if(typeof e=="object")if(a&65){const l=e.default;l&&(l._c&&(l._d=!1),Ln(t,l()),l._c&&(l._d=!0));return}else{n=32;const l=e._;!l&&!Ds(e)?e._ctx=Yt:l===3&&Yt&&(Yt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else pt(e)?(e={default:e,_ctx:Yt},n=32):(e=String(e),a&64?(n=16,e=[tu(e)]):n=8);t.children=e,t.shapeFlag|=n}function eu(...t){const e={};for(let n=0;n<t.length;n++){const a=t[n];for(const l in a)if(l==="class")e.class!==a.class&&(e.class=Tn([e.class,a.class]));else if(l==="style")e.style=Pn([e.style,a.style]);else if(ai(l)){const u=e[l],p=a[l];p&&u!==p&&!(dt(u)&&u.includes(p))&&(e[l]=u?[].concat(u,p):p)}else l!==""&&(e[l]=a[l])}return e}function qt(t,e,n,a=null){Jt(t,e,7,[n,a])}const ru=Fs();let iu=0;function nu(t,e,n){const a=t.type,l=(e?e.appContext:t.appContext)||ru,u={uid:iu++,vnode:t,type:a,parent:e,appContext:l,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Pl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(l.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Is(a,l),emitsOptions:Ws(a,l),emit:null,emitted:null,propsDefaults:Pt,inheritAttrs:a.inheritAttrs,ctx:Pt,data:Pt,props:Pt,attrs:Pt,slots:Pt,refs:Pt,setupState:Pt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=e?e.root:u,u.emit=Bh.bind(null,u),t.ce&&t.ce(u),u}let Dt=null,ii,mn;{const t=li(),e=(n,a)=>{let l;return(l=t[n])||(l=t[n]=[]),l.push(a),u=>{l.length>1?l.forEach(p=>p(u)):l[0](u)}};ii=e("__VUE_INSTANCE_SETTERS__",n=>Dt=n),mn=e("__VUE_SSR_SETTERS__",n=>_r=n)}const mr=t=>{const e=Dt;return ii(t),t.scope.on(),()=>{t.scope.off(),ii(e)}},sa=()=>{Dt&&Dt.scope.off(),ii(null)};function Xs(t){return t.vnode.shapeFlag&4}let _r=!1;function au(t,e=!1,n=!1){e&&mn(e);const{props:a,children:l}=t.vnode,u=Xs(t);Oh(t,a,u,e),Rh(t,l,n);const p=u?ou(t,e):void 0;return e&&mn(!1),p}function ou(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,mh);const{setup:a}=n;if(a){ue();const l=t.setupContext=a.length>1?lu(t):null,u=mr(t),p=yr(a,t,0,[t.props,l]),c=Zo(p);if(ce(),u(),(c||t.sp)&&!hr(t)&&Ps(t),c){if(p.then(sa,sa),e)return p.then(s=>{la(t,s)}).catch(s=>{hi(s,t,0)});t.asyncDep=p}else la(t,p)}else $s(t)}function la(t,e,n){pt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:At(e)&&(t.setupState=ms(e)),$s(t)}function $s(t,e,n){const a=t.type;t.render||(t.render=a.render||Xt);{const l=mr(t);ue();try{bh(t)}finally{ce(),l()}}}const su={get(t,e){return Ft(t,"get",""),t[e]}};function lu(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,su),slots:t.slots,emit:t.emit,expose:e}}function zn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ms(jl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ur)return ur[n](t)},has(e,n){return n in e||n in ur}})):t.proxy}function hu(t){return pt(t)&&"__vccOpts"in t}const uu=(t,e)=>$l(t,e,_r),cu="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bn;const ha=typeof window<"u"&&window.trustedTypes;if(ha)try{bn=ha.createPolicy("vue",{createHTML:t=>t})}catch{}const Js=bn?t=>bn.createHTML(t):t=>t,fu="http://www.w3.org/2000/svg",du="http://www.w3.org/1998/Math/MathML",ee=typeof document<"u"?document:null,ua=ee&&ee.createElement("template"),pu={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,a)=>{const l=e==="svg"?ee.createElementNS(fu,t):e==="mathml"?ee.createElementNS(du,t):n?ee.createElement(t,{is:n}):ee.createElement(t);return t==="select"&&a&&a.multiple!=null&&l.setAttribute("multiple",a.multiple),l},createText:t=>ee.createTextNode(t),createComment:t=>ee.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ee.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,a,l,u){const p=n?n.previousSibling:e.lastChild;if(l&&(l===u||l.nextSibling))for(;e.insertBefore(l.cloneNode(!0),n),!(l===u||!(l=l.nextSibling)););else{ua.innerHTML=Js(a==="svg"?`<svg>${t}</svg>`:a==="mathml"?`<math>${t}</math>`:t);const c=ua.content;if(a==="svg"||a==="mathml"){const s=c.firstChild;for(;s.firstChild;)c.appendChild(s.firstChild);c.removeChild(s)}e.insertBefore(c,n)}return[p?p.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},gu=Symbol("_vtc");function vu(t,e,n){const a=t[gu];a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const ca=Symbol("_vod"),_u=Symbol("_vsh"),yu=Symbol(""),mu=/(^|;)\s*display\s*:/;function bu(t,e,n){const a=t.style,l=Ot(n);let u=!1;if(n&&!l){if(e)if(Ot(e))for(const p of e.split(";")){const c=p.slice(0,p.indexOf(":")).trim();n[c]==null&&Jr(a,c,"")}else for(const p in e)n[p]==null&&Jr(a,p,"");for(const p in n)p==="display"&&(u=!0),Jr(a,p,n[p])}else if(l){if(e!==n){const p=a[yu];p&&(n+=";"+p),a.cssText=n,u=mu.test(n)}}else e&&t.removeAttribute("style");ca in t&&(t[ca]=u?a.display:"",t[_u]&&(a.display="none"))}const fa=/\s*!important$/;function Jr(t,e,n){if(dt(n))n.forEach(a=>Jr(t,e,a));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const a=Su(t,e);fa.test(n)?t.setProperty(Ce(a),n.replace(fa,""),"important"):t[a]=n}}const da=["Webkit","Moz","ms"],Mi={};function Su(t,e){const n=Mi[e];if(n)return n;let a=he(e);if(a!=="filter"&&a in t)return Mi[e]=a;a=ts(a);for(let l=0;l<da.length;l++){const u=da[l]+a;if(u in t)return Mi[e]=u}return e}const pa="http://www.w3.org/1999/xlink";function ga(t,e,n,a,l,u=xl(e)){a&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(pa,e.slice(6,e.length)):t.setAttributeNS(pa,e,n):n==null||u&&!rs(n)?t.removeAttribute(e):t.setAttribute(e,u?"":De(n)?String(n):n)}function va(t,e,n,a,l){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Js(n):n);return}const u=t.tagName;if(e==="value"&&u!=="PROGRESS"&&!u.includes("-")){const c=u==="OPTION"?t.getAttribute("value")||"":t.value,s=n==null?t.type==="checkbox"?"on":"":String(n);(c!==s||!("_value"in t))&&(t.value=s),n==null&&t.removeAttribute(e),t._value=n;return}let p=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=rs(n):n==null&&c==="string"?(n="",p=!0):c==="number"&&(n=0,p=!0)}try{t[e]=n}catch{}p&&t.removeAttribute(l||e)}function Cu(t,e,n,a){t.addEventListener(e,n,a)}function wu(t,e,n,a){t.removeEventListener(e,n,a)}const _a=Symbol("_vei");function xu(t,e,n,a,l=null){const u=t[_a]||(t[_a]={}),p=u[e];if(a&&p)p.value=a;else{const[c,s]=Pu(e);if(a){const i=u[e]=Ou(a,l);Cu(t,c,i,s)}else p&&(wu(t,c,p,s),u[e]=void 0)}}const ya=/(?:Once|Passive|Capture)$/;function Pu(t){let e;if(ya.test(t)){e={};let a;for(;a=t.match(ya);)t=t.slice(0,t.length-a[0].length),e[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ce(t.slice(2)),e]}let Ei=0;const Tu=Promise.resolve(),Au=()=>Ei||(Tu.then(()=>Ei=0),Ei=Date.now());function Ou(t,e){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;Jt(Mu(a,n.value),e,5,[a])};return n.value=t,n.attached=Au(),n}function Mu(t,e){if(dt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(a=>l=>!l._stopped&&a&&a(l))}else return e}const ma=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Eu=(t,e,n,a,l,u)=>{const p=l==="svg";e==="class"?vu(t,a,p):e==="style"?bu(t,n,a):ai(e)?Cn(e)||xu(t,e,n,a,u):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Fu(t,e,a,p))?(va(t,e,a),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ga(t,e,a,p,u,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ot(a))?va(t,he(e),a,u,e):(e==="true-value"?t._trueValue=a:e==="false-value"&&(t._falseValue=a),ga(t,e,a,p))};function Fu(t,e,n,a){if(a)return!!(e==="innerHTML"||e==="textContent"||e in t&&ma(e)&&pt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const l=t.tagName;if(l==="IMG"||l==="VIDEO"||l==="CANVAS"||l==="SOURCE")return!1}return ma(e)&&Ot(n)?!1:e in t}const Ru=It({patchProp:Eu},pu);let ba;function Nu(){return ba||(ba=Dh(Ru))}const Du=(...t)=>{const e=Nu().createApp(...t),{mount:n}=e;return e.mount=a=>{const l=Iu(a);if(!l)return;const u=e._component;!pt(u)&&!u.render&&!u.template&&(u.template=l.innerHTML),l.nodeType===1&&(l.textContent="");const p=n(l,!1,Gu(l));return l instanceof Element&&(l.removeAttribute("v-cloak"),l.setAttribute("data-v-app","")),p},e};function Gu(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Iu(t){return Ot(t)?document.querySelector(t):t}var Sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ku(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fi,Ca;function fe(){if(Ca)return Fi;Ca=1;function t(a,l){return e(a,l,0,0)}function e(a,l,u,p,c=0){return Math.abs(a-u)<=c&&Math.abs(l-p)<=c}function n(a,l,u,p){return[a-u,l-p]}return Fi={isNull:t,diff:n,equal:e},Fi}var Ri,wa;function Lu(){if(wa)return Ri;wa=1;function t(e,n,a){return n<=e&&e<=a}return Ri=t,Ri}var Ni,xa;function ne(){if(xa)return Ni;xa=1;const t=fe();function e(m,S){return{x:m,y:S}}function n(m){return typeof m=="number"?e(m,m):m}function a(){return e(0,0)}function l(m,S,C=0){return t.equal(m.x,m.y,S.x,S.y,C)}function u({x:m,y:S}){return{x:m,y:S}}function p(m,S,C){m.x=S,m.y=C}function c(m,S){return t.diff(m.x,m.y,S.x,S.y)}function s(m,S){return v(m,S,(C,h)=>C*h)}function i(m,S){return v(m,S,(C,h)=>C/h)}function r(m,S){return v(m,S,(C,h)=>C+h)}function o(m,S){return v(m,S,(C,h)=>C-h)}function g(m,S){return v(m,S,Math.min)}function f(m,S){return v(m,S,Math.max)}function v(m,S,C){const h=n(m),d=n(S);return{x:C(h.x,d.x),y:C(h.y,d.y)}}return Ni={cast:n,vector:e,copy:u,equal:l,zero:a,update:p,diff:c,multiply:s,divide:i,plus:r,minus:o,apply:v,min:g,max:f,inner:{min(m){return this.apply(m,Math.min)},max(m){return this.apply(m,Math.max)},apply(m,S){return S(m.x,m.y)}}},Ni}var Di,Pa;function Ne(){if(Pa)return Di;Pa=1;const t=Lu(),e=fe(),{vector:n}=ne();class a{constructor(p,c){this.x=p,this.y=c}equal(p){return this.isAt(p.x,p.y)}isAt(p,c){return e.equal(this.x,this.y,p,c)}translated(p,c){return this.copy().translate(p,c)}translate(p,c){return this.x+=p,this.y+=c,this}closeTo(p,c){return t(this.x,p.x-c,p.x+c)&&t(this.y,p.y-c,p.y+c)}copy(){return new a(this.x,this.y)}diff(p){return e.diff(this.x,this.y,p.x,p.y)}asPair(){return[this.x,this.y]}asVector(){return n(this.x,this.y)}export(){return this.asVector()}static atRandom(p,c){return new a(Math.random()*p,Math.random()*c)}static import(p){return l(p.x,p.y)}}function l(u,p){return new a(u,p)}return Di={anchor:l,Anchor:a},Di}var Gi,Ta;function di(){if(Ta)return Gi;Ta=1;const t={isSlot:()=>!1,isTab:()=>!0,isNone:()=>!1,match:a=>a.isSlot(),toString:()=>"Tab",complement:()=>e,serialize:()=>"T"},e={isSlot:()=>!0,isTab:()=>!1,isNone:()=>!1,match:a=>a.isTab(),toString:()=>"Slot",complement:()=>t,serialize:()=>"S"},n={isSlot:()=>!1,isTab:()=>!1,isNone:()=>!0,match:a=>!1,toString:()=>"None",complement:()=>n,serialize:()=>"-"};return Gi={None:n,Slot:e,Tab:t},Gi}var Ii,Aa;function pi(){if(Aa)return Ii;Aa=1;function t(l,u,p=!1){return p?[l,u]:[u,l]}function e(l,u,p=null){return l.map(c=>{const s=c||p;return s&&u(s)})}function n(l,u,p=null){const[c,s,i,r]=e(l,u,p);return{right:c,down:s,left:i,up:r}}function a(l){return l}return Ii={pivot:t,itself:a,orthogonalMap:e,orthogonalTransform:n},Ii}var ki,Oa;function gi(){if(Oa)return ki;Oa=1;const{pivot:t}=pi();function e(a,l){return!0}class n{constructor(l,u,p){this.axis=l,this.forward=u,this.backward=p,this.forwardAnchor=`${u}Anchor`,this.backwardAnchor=`${p}Anchor`,this.forwardConnection=`${u}Connection`,this.backwardConnection=`${p}Connection`,this.requirement=e}attract(l,u,p=!1){const[c,s]=t(l,u,p);let i,r;s.centralAnchor[this.axis]>c.centralAnchor[this.axis]?[i,r]=s[this.backwardAnchor].diff(c[this.forwardAnchor]):[i,r]=s[this.forwardAnchor].diff(c[this.backwardAnchor]),c.push(i,r)}openMovement(l,u){return u>0&&!l[this.forwardConnection]||u<0&&!l[this.backwardConnection]||u==0}canConnectWith(l,u,p){return this.closeTo(l,u,p)&&this.match(l,u)&&this.requirement(l,u)}closeTo(l,u,p){return l[this.forwardAnchor].closeTo(u[this.backwardAnchor],p)}match(l,u){return l[this.forward].match(u[this.backward])}connectWith(l,u,p,c){if(!this.canConnectWith(l,u,p))throw new Error(`can not connect ${this.forward}!`);l[this.forwardConnection]!==u&&(this.attract(u,l,c),l[this.forwardConnection]=u,u[this.backwardConnection]=l,l.fireConnect(u))}attachRequirement(l){this.requirement=l}static horizontal(){return new n("x","right","left")}static vertical(){return new n("y","down","up")}}return ki={Connector:n,noConnectionRequirements:e},ki}var Li,Ma;function Un(){if(Ma)return Li;Ma=1;const{Slot:t,Tab:e,None:n}=di(),{orthogonalMap:a}=pi();function l(s){return s==="S"?t:s==="T"?e:n}function u(s){return a([s.right,s.down,s.left,s.up],i=>i.serialize(),n).join("")}function p(s){if(s.length!==4)throw new Error("structure string must be 4-chars long");return{right:l(s[0]),down:l(s[1]),left:l(s[2]),up:l(s[3])}}function c(s){return typeof s=="string"?p(s):s}return Li={serialize:u,deserialize:p,asStructure:c},Li}var zi,Ea;function Qt(){if(Ea)return zi;Ea=1;const t=fe(),{anchor:e,Anchor:n}=Ne(),{None:a}=di(),{Connector:l}=gi(),u=Un(),{itself:p,orthogonalTransform:c}=pi();class s{constructor({up:r=a,down:o=a,left:g=a,right:f=a}={},v={}){this.up=r,this.down=o,this.left=g,this.right=f,this.metadata={},this.centralAnchor=null,this._size=null,this._horizontalConnector=null,this._verticalConnector=null,this._initializeListeners(),this.configure(v)}_initializeListeners(){this.translateListeners=[],this.connectListeners=[],this.disconnectListeners=[]}configure(r){r.centralAnchor&&this.centerAround(n.import(r.centralAnchor)),r.metadata&&this.annotate(r.metadata),r.size&&this.resize(r.size)}annotate(r){Object.assign(this.metadata,r)}reannotate(r){this.metadata=r}belongTo(r){this.puzzle=r}get presentConnections(){return this.connections.filter(p)}get connections(){return[this.rightConnection,this.downConnection,this.leftConnection,this.upConnection]}get inserts(){return[this.right,this.down,this.left,this.up]}onTranslate(r){this.translateListeners.push(r)}onConnect(r){this.connectListeners.push(r)}onDisconnect(r){this.disconnectListeners.push(r)}fireTranslate(r,o){this.translateListeners.forEach(g=>g(this,r,o))}fireConnect(r){this.connectListeners.forEach(o=>o(this,r))}fireDisconnect(r){r.forEach(o=>{this.disconnectListeners.forEach(g=>g(this,o))})}connectVerticallyWith(r,o=!1){this.verticalConnector.connectWith(this,r,this.proximity,o)}attractVertically(r,o=!1){this.verticalConnector.attract(this,r,o)}connectHorizontallyWith(r,o=!1){this.horizontalConnector.connectWith(this,r,this.proximity,o)}attractHorizontally(r,o=!1){this.horizontalConnector.attract(this,r,o)}tryConnectWith(r,o=!1){this.tryConnectHorizontallyWith(r,o),this.tryConnectVerticallyWith(r,o)}tryConnectHorizontallyWith(r,o=!1){this.canConnectHorizontallyWith(r)&&this.connectHorizontallyWith(r,o)}tryConnectVerticallyWith(r,o=!1){this.canConnectVerticallyWith(r)&&this.connectVerticallyWith(r,o)}disconnect(){if(!this.connected)return;const r=this.presentConnections;this.upConnection&&(this.upConnection.downConnection=null,this.upConnection=null),this.downConnection&&(this.downConnection.upConnection=null,this.downConnection=null),this.leftConnection&&(this.leftConnection.rightConnection=null,this.leftConnection=null),this.rightConnection&&(this.rightConnection.leftConnection=null,this.rightConnection=null),this.fireDisconnect(r)}centerAround(r){if(this.centralAnchor)throw new Error("this pieces has already being centered. Use recenterAround instead");this.centralAnchor=r}locateAt(r,o){this.centerAround(e(r,o))}isAt(r,o){return this.centralAnchor.isAt(r,o)}recenterAround(r,o=!1){const[g,f]=r.diff(this.centralAnchor);this.translate(g,f,o)}relocateTo(r,o,g=!1){this.recenterAround(e(r,o),g)}translate(r,o,g=!1){t.isNull(r,o)||(this.centralAnchor.translate(r,o),g||this.fireTranslate(r,o))}push(r,o,g=!1,f=[this]){this.translate(r,o,g);const v=this.presentConnections.filter(_=>f.indexOf(_)===-1);f.push(...v),v.forEach(_=>_.push(r,o,!1,f))}drag(r,o,g=!1){t.isNull(r,o)||(this.dragShouldDisconnect(r,o)?(this.disconnect(),this.translate(r,o,g)):this.push(r,o,g))}dragShouldDisconnect(r,o){return this.puzzle.dragShouldDisconnect(this,r,o)}drop(){this.puzzle.autoconnectWith(this)}dragAndDrop(r,o){this.drag(r,o),this.drop()}canConnectHorizontallyWith(r){return this.horizontalConnector.canConnectWith(this,r,this.proximity)}canConnectVerticallyWith(r){return this.verticalConnector.canConnectWith(this,r,this.proximity)}verticallyCloseTo(r){return this.verticalConnector.closeTo(this,r,this.proximity)}horizontallyCloseTo(r){return this.horizontalConnector.closeTo(this,r,this.proximity)}verticallyMatch(r){return this.verticalConnector.match(this,r)}horizontallyMatch(r){return this.horizontalConnector.match(this,r)}get connected(){return!!(this.upConnection||this.downConnection||this.leftConnection||this.rightConnection)}get downAnchor(){return this.centralAnchor.translated(0,this.radius.y)}get rightAnchor(){return this.centralAnchor.translated(this.radius.x,0)}get upAnchor(){return this.centralAnchor.translated(0,-this.radius.y)}get leftAnchor(){return this.centralAnchor.translated(-this.radius.x,0)}resize(r){this._size=r}get radius(){return this.size.radius}get diameter(){return this.size.diameter}get size(){return this._size||this.puzzle.pieceSize}get proximity(){return this.puzzle.proximity}get id(){return this.metadata.id}get horizontalConnector(){return this.getConnector("horizontal")}get verticalConnector(){return this.getConnector("vertical")}getConnector(r){const o=r+"Connector",g="_"+o;return this.puzzle&&!this[g]?this.puzzle[o]:(this[g]||(this[g]=l[r]()),this[g])}export({compact:r=!1}={}){const o={centralAnchor:this.centralAnchor&&this.centralAnchor.export(),structure:u.serialize(this),metadata:this.metadata};return this._size&&(o.size={radius:this._size.radius}),r?o:Object.assign(o,{connections:c(this.connections,g=>({id:g.id}))})}static import(r){return new s(u.deserialize(r.structure),{centralAnchor:r.centralAnchor,metadata:r.metadata,size:r.size})}}return zi=s,zi}var Ui,Fa;function vi(){if(Fa)return Ui;Fa=1,_i(),Qt();const t=fe();class e{constructor(){this.validListeners=[],this._valid=void 0}validate(p){const c=this._valid;this.updateValidity(p),this._valid&&!c&&this.fireValid(p)}updateValidity(p){this._valid=this.isValid(p)}fireValid(p){this.validListeners.forEach(c=>c(p))}onValid(p){this.validListeners.push(p)}get valid(){return this._valid}get isNull(){return!1}}class n extends e{constructor(p){super(),this.condition=p}isValid(p){return p.pieces.every(c=>this.condition(c))}}class a extends e{constructor(p){super(),this.condition=p}isValid(p){return this.condition(p)}static equalDiffs([p,c],[s,i]){return t.equal(p,c,s,i,a.DIFF_DELTA)}}class l extends e{isValid(p){return!1}get isNull(){return!0}}return a.DIFF_DELTA=.01,a.connected=u=>u.connected,a.relativeRefs=u=>p=>{function c(g,f,v){return t.diff(g,f,...u[v])}const s=p.refs,[i,r]=s[0],o=c(i,r,0);return s.every(([g,f],v)=>a.equalDiffs(o,c(g,f,v)))},Ui={PuzzleValidator:a,PieceValidator:n,NullValidator:l},Ui}var Vi,Ra;function Vn(){if(Ra)return Vi;Ra=1;const t=ne();function e(a){const l=t.cast(a);return{radius:l,diameter:t.multiply(l,2)}}function n(a){const l=t.cast(a);return{radius:t.multiply(l,.5),diameter:l}}return Vi={radius:e,diameter:n},Vi}var Bi,Na;function Bn(){if(Na)return Bi;Na=1;const{Anchor:t}=Ne();function e(i){return Math.round(Math.random()*(i.length-1))}function n(i,r){return o=>o.map(g=>t.atRandom(i,r))}const a=i=>{const r=i.map(o=>o.centralAnchor.asVector());for(let o=0;o<r.length;o++){const g=e(r),f=r[g];r[g]=r[o],r[o]=f}return r},l=i=>{const r=i.map(g=>g.centralAnchor.asVector()),o=new Map;for(let g of r){o.get(g.x)||o.set(g.x,r.filter(m=>m.x==g.x));const f=o.get(g.x),v=e(f),_=f[v].y;f[v].y=g.y,g.y=_}return r},u=i=>{const r=i.map(d=>d.centralAnchor.asVector()),o=new Set(r.map(d=>d.x)),g=Math.max(...o),f=Math.min(...o),v=(g-f)/(o.size-1),_=f+v/2,m=r.length*v,S=r.filter(d=>d.x<_).length*v,C=[],h=[];for(let d=0;d<S;d+=v)C.push(d);for(let d=C[C.length-1]+v;d<m;d+=v)h.push(d);for(let d of r){const y=d.x<_?C:h,x=e(y);d.y=0,d.x=y[x],y.splice(x,1)}return r};function p(i,r,o){return g=>{const f=g.map(m=>m.centralAnchor.asVector());let v=0,_=0;for(let m=0;m<o;m++){for(let S=0;S<r;S++){const C=f[S+r*m];C.x+=v,C.y+=_,v+=i}v=0,_+=i}return f}}function c(i){return r=>r.map(o=>t.atRandom(2*i.x,2*i.y).translate(-i.x,-i.y).translate(o.centralAnchor.x,o.centralAnchor.y).asVector())}return Bi={random:n,grid:a,columns:l,line:u,noop:i=>i.map(r=>r.centralAnchor),padder:p,noise:c},Bi}var Hi,Da;function Qs(){return Da||(Da=1,gi(),Hi={TryDisconnection:{dragShouldDisconnect(a,l,u){return a.horizontalConnector.openMovement(a,l)&&a.verticalConnector.openMovement(a,u)}},ForceDisconnection:{dragShouldDisconnect(a,l,u){return!0}},ForceConnection:{dragShouldDisconnect(a,l,u){return!1}}}),Hi}var qi,Ga;function _i(){if(Ga)return qi;Ga=1,Ne();const t=Qt(),{NullValidator:e}=vi();ne();const{radius:n}=Vn(),a=Bn(),l=Qs(),{Connector:u,noConnectionRequirements:p}=gi();class c{constructor({pieceRadius:i=2,proximity:r=1}={}){this.pieceSize=n(i),this.proximity=r,this.pieces=[],this.validator=new e,this.dragMode=l.TryDisconnection,this.horizontalConnector=u.horizontal(),this.verticalConnector=u.vertical()}newPiece(i={},r={}){const o=new t(i,r);return this.addPiece(o),o}addPiece(i){this.pieces.push(i),i.belongTo(this)}addPieces(i){i.forEach(r=>this.addPiece(r))}annotate(i){this.pieces.forEach((r,o)=>r.annotate(i[o]))}relocateTo(i){this.pieces.forEach((r,o)=>r.relocateTo(...i[o]))}autoconnect(){this.pieces.forEach(i=>this.autoconnectWith(i))}disconnect(){this.pieces.forEach(i=>i.disconnect())}autoconnectWith(i){this.pieces.filter(r=>r!==i).forEach(r=>{i.tryConnectWith(r),r.tryConnectWith(i,!0)})}shuffle(i,r){this.shuffleWith(a.random(i,r))}shuffleWith(i){this.disconnect(),i(this.pieces).forEach(({x:r,y:o},g)=>{this.pieces[g].relocateTo(r,o)}),this.autoconnect()}translate(i,r){this.pieces.forEach(o=>o.translate(i,r))}reframe(i,r){let o;const g=i.x-Math.min(...this.pieces.map(_=>_.leftAnchor.x));if(g>0)o=g;else{const _=r.x-Math.max(...this.pieces.map(m=>m.rightAnchor.x));_<0?o=_:o=0}let f;const v=i.y-Math.min(...this.pieces.map(_=>_.upAnchor.y));if(v>0)f=v;else{const _=r.y-Math.max(...this.pieces.map(m=>m.downAnchor.y));_<0?f=_:f=0}this.translate(o,f)}onTranslate(i){this.pieces.forEach(r=>r.onTranslate(i))}onConnect(i){this.pieces.forEach(r=>r.onConnect(i))}onDisconnect(i){this.pieces.forEach(r=>r.onDisconnect(i))}onValid(i){this.validator.onValid(i)}get points(){return this.pieces.map(i=>i.centralAnchor.asPair())}get refs(){return this.points.map(([i,r],o)=>{const g=this.pieces[o].diameter;return[i/g.x,r/g.y]})}get metadata(){return this.pieces.map(i=>i.metadata)}get head(){return this.pieces[0]}get headAnchor(){return this.head.centralAnchor}get verticalRequirement(){return this.verticalConnector.requirement}get horizontalRequirement(){return this.horizontalConnector.requirement}attachHorizontalConnectionRequirement(i){this.horizontalConnector.attachRequirement(i)}attachVerticalConnectionRequirement(i){this.verticalConnector.attachRequirement(i)}attachConnectionRequirement(i){this.attachHorizontalConnectionRequirement(i),this.attachVerticalConnectionRequirement(i)}clearConnectionRequirements(){this.attachConnectionRequirement(p)}attachValidator(i){this.validator=i}isValid(){return this.validator.isValid(this)}get valid(){return this.validator.valid}validate(){this.validator.validate(this)}updateValidity(){this.validator.validate(this)}get connected(){return this.pieces.every(i=>i.connected)}get pieceDiameter(){return this.pieceSize.diameter}get pieceRadius(){return this.pieceSize.radius}forceConnectionWhileDragging(){this.dragMode=l.ForceConnection}forceDisconnectionWhileDragging(){this.dragMode=l.ForceDisconnection}tryDisconnectionWhileDragging(){this.dragMode=l.TryDisconnection}dragShouldDisconnect(i,r,o){return this.dragMode.dragShouldDisconnect(i,r,o)}export(i={}){return{pieceRadius:this.pieceRadius,proximity:this.proximity,pieces:this.pieces.map(r=>r.export(i))}}static import(i){const r=new c({pieceRadius:i.pieceRadius,proximity:i.proximity});return r.addPieces(i.pieces.map(o=>t.import(o))),r.autoconnect(),r}}return qi=c,qi}var Wi,Ia;function Zs(){return Ia||(Ia=1,Wi={Vertical:{atVector(n){return n.y},atDimension(n){return n.height}},Horizontal:{atVector(n){return n.x},atDimension(n){return n.width}}}),Wi}var ji,ka;function ni(){if(ka)return ji;ka=1,Qt();const{vector:t,...e}=ne();function n(i,r,o,g){return i.isTab()?r:i.isSlot()?o:g}const a=(i,r,o,g)=>n(i.left,r,o,g),l=(i,r,o,g)=>n(i.right,r,o,g),u=(i,r,o,g)=>n(i.up,r,o,g),p=(i,r,o,g)=>n(i.down,r,o,g);class c{draw(r,o=50,g=0){const f=e.cast(o),v=e.divide(e.multiply(g,5),f);return[0-v.x,0-v.y,1,0-v.y,2,n(r.up,-1-v.y,1-v.y,0-v.y),3,0-v.y,4+v.x,0-v.y,4+v.x,1,l(r,5+v.x,3+v.x,4+v.x),2,4+v.x,3,4+v.x,4+v.y,3,4+v.y,2,n(r.down,5+v.y,3+v.y,4+v.y),1,4+v.y,0-v.x,4+v.y,0-v.x,3,a(r,-1-v.x,1-v.x,0-v.x),2,0-v.x,1].map((_,m)=>_*(m%2===0?f.x:f.y)/5)}isBezier(){return!1}}class s{constructor({bezelize:r=!1,bezelDepth:o=2/5,insertDepth:g=4/5,borderLength:f=1/3,referenceInsertAxis:v=null}={}){this.bezelize=r,this.bezelDepth=o,this.insertDepth=g,this.borderLength=f,this.referenceInsertAxis=v}referenceInsertAxisLength(r){return this.referenceInsertAxis?this.referenceInsertAxis.atVector(r):e.inner.min(r)}draw(r,o=150,g=0){const f=e.cast(o),v=Math.trunc(this.referenceInsertAxisLength(f)*(1-2*this.borderLength)*100)/100,_=e.divide(e.minus(f,v),2),m=e.multiply(v,this.insertDepth),S=e.multiply(e.inner.min(_),this.bezelDepth),[C,h,d,y]=this.bezels(r),x=D=>D?S.x:0,A=D=>D?S.y:0,E=v+_.y,F=v+_.x,M=v+2*_.y,T=v+2*_.x;return[x(C),0,...C?[0,0,0,0,0,S.y]:[],0,A(C),0,_.y,0,_.y,...a(r,[-m.x,_.y,-m.x,E],[m.x,_.y,m.x,E],[0,_.y,0,E]),0,E,0,E,0,M,0,M-A(h),...h?[0,M,0,M,S.x,M]:[],x(h),M,_.x,M,_.x,M,...p(r,[_.x,M+m.y,F,M+m.y],[_.x,M-m.y,F,M-m.y],[_.x,M,F,M]),F,M,F,M,T,M,T-x(d),M,...d?[T,M,T,M,T,M-S.y]:[],T,M-A(d),T,E,T,E,...l(r,[T+m.x,E,T+m.x,_.y],[T-m.x,E,T-m.x,_.y],[T,E,T,_.y]),T,_.y,T,_.y,T,0,T,A(y),...y?[T,0,T,0,T-S.x,0]:[],T-x(y),0,F,0,F,0,...u(r,[F,-m.y,_.x,-m.y],[F,m.y,_.x,m.y],[F,0,_.x,0]),_.x,0,_.x,0,0,0,C?S.x:0,0]}bezels(r){return this.bezelize?[r.left.isNone()&&r.up.isNone(),r.left.isNone()&&r.down.isNone(),r.right.isNone()&&r.down.isNone(),r.right.isNone()&&r.up.isNone()]:[!1,!1,!1,!1]}isBezier(){return!0}}return ji={Classic:new c,Squared:c,Rounded:s},ji}var Ki,La;function Hn(){if(La)return Ki;La=1;const{Tab:t,Slot:e,None:n}=di();function a(s){return t}function l(s){return s%2===0?t:e}function u(s){return s%4<2?t:e}function p(s){return Math.random()<.5?t:e}class c{constructor(i){this.generator=i,this.n=0,this._previous,this._current=n}previousComplement(){return this._previous.complement()}current(i){return this.n==i?n:this._current}next(){return this._previous=this._current,this._current=this.generator(this.n++),this._current}}return Ki={InsertSequence:c,fixed:a,flipflop:l,twoAndTwo:u,random:p},Ki}var Yi,za;function qn(){if(za)return Yi;za=1;function t(e){return JSON.parse(JSON.stringify(e))}return Yi={copy:t},Yi}var Xi,Ua;function tl(){if(Ua)return Xi;Ua=1;const t=_i();Qt(),Ne();const{anchor:e}=Ne(),{fixed:n,InsertSequence:a}=Hn(),l=qn();class u{constructor(){this.insertsGenerator=n,this.metadata=[],this.headAnchor=null}withMetadata(s){this.metadata=s}withInsertsGenerator(s){this.insertsGenerator=s||this.insertsGenerator}withHeadAt(s){this.headAnchor=s}withStructure(s){this.structure=s}withDimensions(s,i){this.width=s,this.height=i}build(){const s=new t(this.structure),i=new p(s,this.headAnchor);let r=this._newSequence(),o;for(let g=0;g<this.height;g++){o=this._newSequence(),r.next();for(let f=0;f<this.width;f++)o.next(),this._buildPiece(s,o,r).centerAround(i.naturalAnchor(f,g))}return this._annotateAll(s.pieces),s}_annotateAll(s){s.forEach((i,r)=>this._annotate(i,r))}_annotate(s,i){const r=this.metadata[i],o=r?l.copy(r):{};o.id=o.id||String(i+1),s.annotate(o)}_newSequence(){return new a(this.insertsGenerator)}_buildPiece(s,i,r){return s.newPiece({left:i.previousComplement(),up:r.previousComplement(),right:i.current(this.width),down:r.current(this.height)})}}class p{constructor(s,i){this.puzzle=s,this.initializeOffset(i)}initializeOffset(s){s?this.offset=s.asVector():this.offset=this.pieceDiameter}get pieceDiameter(){return this.puzzle.pieceDiameter}naturalAnchor(s,i){return e(s*this.pieceDiameter.x+this.offset.x,i*this.pieceDiameter.y+this.offset.y)}}return Xi=u,Xi}var $i,Va;function zu(){if(Va)return $i;Va=1;const{vector:t}=ne();function e(n){return n instanceof HTMLImageElement||n instanceof HTMLCanvasElement?{content:n,offset:t(1,1),scale:1}:n}return $i={asImageMetadata:e},$i}var Ji,Ba;function el(){if(Ba)return Ji;Ba=1;const t=ne();Qt(),fe();const{PuzzleValidator:e}=vi();function n(c){return t.diff(c.metadata.targetPosition,c.centralAnchor.asVector())}const a=c=>l(c)&&e.connected(c),l=c=>{const s=n(c.head);return c.pieces.every(i=>e.equalDiffs(s,n(i)))},u=c=>t.equal(c.centralAnchor.asVector(),c.metadata.targetPosition);function p(c,s,i){c.targetPosition=c.targetPosition||s,c.currentPosition=c.currentPosition||i||t.copy(c.targetPosition)}return Ji={initialize:p,solved:a,relativePosition:l,absolutePosition:u},Ji}var Qi,Ha;function yi(){if(Ha)return Qi;Ha=1;const t=fe();Qt();const e=_i(),n=tl(),{twoAndTwo:a}=Hn(),l=Un(),u=zu(),{vector:p,...c}=ne(),s=qn(),i=el(),{PuzzleValidator:r,PieceValidator:o}=vi(),{Horizontal:g,Vertical:f}=Zs(),v=Bn(),{diameter:_}=Vn(),{itself:m}=pi(),{Classic:S}=ni();class C{constructor(d,{width:y,height:x,pieceSize:A=50,proximity:E=10,borderFill:F=0,strokeWidth:M=3,strokeColor:T="black",lineSoftness:D=0,preventOffstageDrag:I=!1,image:O=null,fixed:b=!1,painter:w=null,puzzleDiameter:P=null,maxPiecesCount:R=null,outline:L=null}){this.width=y,this.height=x,this.pieceSize=_(A),this.borderFill=c.cast(F),this.imageMetadata=u.asImageMetadata(O),this.strokeWidth=M,this.strokeColor=T,this.lineSoftness=D,this.preventOffstageDrag=I,this.proximity=E,this.fixed=b,this._painter=w||new window.headbreaker.painters.Konva,this._initialize(),this._painter.initialize(this,d),this._maxPiecesCount=c.cast(R),this._puzzleDiameter=c.cast(P),this._imageAdjuster=m,this._outline=L||S}_initialize(){this._puzzle=null,this.figures={},this.templates={},this._figurePadding=null,this._drawn=!1}sketchPiece({structure:d,size:y=null,metadata:x}){i.initialize(x,c.zero()),this.renderPiece(this._newPiece(d,y,x))}renderPiece(d){const y={label:null,group:null,shape:null};this.figures[d.metadata.id]=y,this._painter.sketch(this,d,y,this._outline);const x=d.metadata.label;x&&x.text&&(x.fontSize=x.fontSize||d.diameter.y*.55,x.y=x.y||(d.diameter.y-x.fontSize)/2,this._painter.label(this,d,y)),this._bindGroupToPiece(y.group,d),this._bindPieceToGroup(d,y.group)}renderPieces(d){d.forEach(y=>{this._annotatePiecePosition(y),this.renderPiece(y)})}renderPuzzle(d){this.pieceSize=d.pieceSize,this.proximity=d.proximity*2,this._puzzle=d,this.renderPieces(d.pieces)}autogenerate({horizontalPiecesCount:d=5,verticalPiecesCount:y=5,insertsGenerator:x=a,metadata:A=[]}={}){const E=new n;E.withDimensions(d,y),E.withInsertsGenerator(x),E.withMetadata(A),this.autogenerateWithManufacturer(E)}autogenerateWithManufacturer(d){d.withStructure(this.settings),this._puzzle=d.build(),this._maxPiecesCount=p(d.width,d.height),this.renderPieces(this.puzzle.pieces)}defineTemplate(d,y){this.templates[d]=y}sketchPieceUsingTemplate(d,y){const x=this.templates[y];if(!x)throw new Error(`Unknown template ${d}`);const A=s.copy(x.metadata);A.id=d,this.sketchPiece({structure:x.structure,metadata:A})}shuffle(d=1){const y=this.pieceRadius;this.puzzle.shuffle(d*(this.width-y.x),d*(this.height-y.y)),this.puzzle.translate(y.x,y.y),this.autoconnected=!0}shuffleColumns(d=1){this.shuffleWith(d,v.columns)}shuffleGrid(d=1){this.shuffleWith(d,v.grid)}shuffleLine(d=1){this.shuffleWith(d,v.line)}shuffleWith(d,y){this.solve(),this.puzzle.shuffleWith(v.padder(this.proximity*3,this.maxPiecesCount.x,this.maxPiecesCount.y)),this.puzzle.shuffleWith(y),this.puzzle.shuffleWith(v.noise(c.cast(this.proximity*d/2))),this.autoconnected=!0}solve(){this.puzzle.pieces.forEach(d=>{const{x:y,y:x}=d.metadata.targetPosition;d.relocateTo(y,x)}),this.autoconnect()}autoconnect(){this.puzzle.autoconnect(),this.autoconnected=!0}registerKeyboardGestures(d={16:y=>y.forceConnectionWhileDragging(),17:y=>y.forceDisconnectionWhileDragging()}){this._painter.registerKeyboardGestures(this,d)}draw(){if(this._drawn)throw new Error("This canvas has already been drawn. Call redraw instead");this.autoconnected||this.autoconnect(),this.puzzle.updateValidity(),this.autoconnected=!1,this.redraw(),this._drawn=!0}redraw(){this._painter.draw(this)}refill(){this.puzzle.pieces.forEach(d=>{this._painter.fill(this,d,this.getFigure(d))})}clear(){this._initialize(),this._painter.reinitialize(this)}attachConnectionRequirement(d){this.puzzle.attachConnectionRequirement(d)}clearConnectionRequirements(){this.puzzle.clearConnectionRequirements()}attachValidator(d){this.puzzle.attachValidator(d)}attachSolvedValidator(){this.puzzle.attachValidator(new r(i.solved))}attachRelativePositionValidator(){this.puzzle.attachValidator(new r(i.relativePosition))}attachRelativeRefsValidator(d){this.puzzle.attachValidator(new r(r.relativeRefs(d)))}attachAbsolutePositionValidator(){this.puzzle.attachValidator(new o(i.absolutePosition))}onConnect(d){this.puzzle.onConnect((y,x)=>{d(y,this.getFigure(y),x,this.getFigure(x))})}onDisconnect(d){this.puzzle.onDisconnect((y,x)=>{d(y,this.getFigure(y),x,this.getFigure(x))})}onTranslate(d){this.puzzle.onTranslate((y,x,A)=>{d(y,this.getFigure(y),x,A)})}reframeWithinDimensions(){if(!this.fixed)throw new Error("Only fixed canvas can be reframed");this.puzzle.reframe(this.figurePadding,c.minus(p(this.width,this.height),this.figurePadding))}onValid(d){this.puzzle.onValid(d)}get valid(){return this.puzzle.valid}getFigure(d){return this.getFigureById(d.metadata.id)}getFigureById(d){return this.figures[d]}resize(d,y){this.width=d,this.height=y,this._painter.resize(this,d,y)}scale(d){this._painter.scale(this,c.cast(d))}_annotatePiecePosition(d){const y=d.centralAnchor.asVector();i.initialize(d.metadata,y,c.copy(y))}_bindGroupToPiece(d,y){y.onTranslate((x,A)=>{this._painter.physicalTranslate(this,d,y),this._painter.logicalTranslate(this,y,d)})}_bindPieceToGroup(d,y){this._painter.onDrag(this,d,y,(x,A)=>{t.isNull(x,A)||(d.drag(x,A,!0),this._painter.logicalTranslate(this,d,y),this.redraw())}),this._painter.onDragEnd(this,d,y,()=>{d.drop(),this.puzzle.validate(),this.redraw()})}_baseImageMetadataFor(d){if(this.imageMetadata){const y=d.metadata.scale||this.imageMetadata.scale||1,x=c.plus(d.metadata.targetPosition||c.zero(),this.imageMetadata.offset||c.zero());return{content:this.imageMetadata.content,offset:x,scale:y}}else return u.asImageMetadata(d.metadata.image)}imageMetadataFor(d){return this._imageAdjuster(this._baseImageMetadataFor(d))}adjustImagesToPuzzle(d){this._imageAdjuster=y=>{const x=d.atVector(this.puzzleDiameter)/d.atDimension(y.content),A=c.plus(y.offset,c.minus(this.borderFill,this.pieceDiameter));return{content:y.content,scale:x,offset:A}}}adjustImagesToPuzzleWidth(){this.adjustImagesToPuzzle(g)}adjustImagesToPuzzleHeight(){this.adjustImagesToPuzzle(f)}adjustImagesToPiece(d){this._imageAdjuster=y=>{const x=d.atVector(this.pieceDiameter)/d.atDimension(y.content),A=c.plus(y.offset,this.borderFill);return{content:y.content,scale:x,offset:A}}}adjustImagesToPieceWidth(){this.adjustImagesToPiece(g)}adjustImagesToPieceHeight(){this.adjustImagesToPiece(f)}_initializeEmptyPuzzle(){this._puzzle=new e(this.settings)}_newPiece(d,y,x){return this.puzzle.newPiece(l.asStructure(d),{centralAnchor:p(x.currentPosition.x,x.currentPosition.y),metadata:x,size:y})}get puzzleDiameter(){return this._puzzleDiameter||this.estimatedPuzzleDiameter}get estimatedPuzzleDiameter(){return c.plus(c.multiply(this.pieceDiameter,this.maxPiecesCount),this.strokeWidth*2)}get maxPiecesCount(){if(!this._maxPiecesCount)throw new Error("max pieces count was not specified");return this._maxPiecesCount}get pieceRadius(){return this.pieceSize.radius}get pieceDiameter(){return this.pieceSize.diameter}get figurePadding(){return this._figurePadding||(this._figurePadding=c.plus(this.strokeWidth,this.borderFill)),this._figurePadding}get figuresCount(){return Object.values(this.figures).length}get puzzle(){return this._puzzle||this._initializeEmptyPuzzle(),this._puzzle}get settings(){return{pieceRadius:this.pieceRadius,proximity:this.proximity}}}return Qi=C,Qi}var Zi,qa;function rl(){if(qa)return Zi;qa=1,yi(),Qt();class t{resize(n,a,l){}initialize(n,a){}reinitialize(n){}draw(n){}scale(n,a){}sketch(n,a,l,u){}fill(n,a,l){}label(n,a,l){}physicalTranslate(n,a,l){}logicalTranslate(n,a,l){}onDrag(n,a,l,u){}onDragEnd(n,a,l,u){}registerKeyboardGestures(n,a){}}return Zi=t,Zi}var tn,Wa;function Uu(){if(Wa)return tn;Wa=1,yi(),Qt();const t=rl();class e extends t{initialize(a,l){a.__nullLayer__={drawn:!1,figures:0}}draw(a){a.__nullLayer__.drawn=!0}sketch(a,l,u,p){a.__nullLayer__.figures++}}return tn=e,tn}var xr={exports:{}},Pr={},Tr={},en={},ja;function vt(){return ja||(ja=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Math.PI/180;function n(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}var a=function(l){var u=l.indexOf("msie ");if(u>0)return parseInt(l.substring(u+5,l.indexOf(".",u)),10);var p=l.indexOf("trident/");if(p>0){var c=l.indexOf("rv:");return parseInt(l.substring(c+3,l.indexOf(".",c)),10)}var s=l.indexOf("edge/");return s>0?parseInt(l.substring(s+5,l.indexOf(".",s)),10):!1};t._parseUA=function(l){var u=l.toLowerCase(),p=/(chrome)[ /]([\w.]+)/.exec(u)||/(webkit)[ /]([\w.]+)/.exec(u)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(u)||/(msie) ([\w.]+)/.exec(u)||u.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(u)||[],c=!!l.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),s=!!l.match(/IEMobile/i);return{browser:p[1]||"",version:p[2]||"0",isIE:a(u),mobile:c,ieMobile:s}},t.glob=typeof Sa<"u"?Sa:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},t.Konva={_global:t.glob,version:"6.0.0",isBrowser:n(),isUnminified:/param/.test((function(l){}).toString()),dblClickWindow:400,getAngle:function(l){return t.Konva.angleDeg?l*e:l},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return t.Konva.DD.isDragging},isDragReady:function(){return!!t.Konva.DD.node},UA:t._parseUA(t.glob.navigator&&t.glob.navigator.userAgent||""),document:t.glob.document,_injectGlobal:function(l){t.glob.Konva=l},_parseUA:t._parseUA},t._NODES_REGISTRY={},t._registerNode=function(l){t._NODES_REGISTRY[l.prototype.getClassName()]=l,t.Konva[l.prototype.getClassName()]=l}}(en)),en}var rn={},Ka;function yt(){return Ka||(Ka=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=vt(),n=function(){function h(){}return h.toCollection=function(d){var y=new h,x=d.length,A;for(A=0;A<x;A++)y.push(d[A]);return y},h._mapMethod=function(d){h.prototype[d]=function(){var y=this.length,x,A=[].slice.call(arguments);for(x=0;x<y;x++)this[x][d].apply(this[x],A);return this}},h.mapMethods=function(d){var y=d.prototype;for(var x in y)h._mapMethod(x)},h}();t.Collection=n,n.prototype=[],n.prototype.each=function(h){for(var d=0;d<this.length;d++)h(this[d],d)},n.prototype.toArray=function(){var h=[],d=this.length,y;for(y=0;y<d;y++)h.push(this[y]);return h};var a=function(){function h(d){d===void 0&&(d=[1,0,0,1,0,0]),this.m=d&&d.slice()||[1,0,0,1,0,0]}return h.prototype.copy=function(){return new h(this.m)},h.prototype.point=function(d){var y=this.m;return{x:y[0]*d.x+y[2]*d.y+y[4],y:y[1]*d.x+y[3]*d.y+y[5]}},h.prototype.translate=function(d,y){return this.m[4]+=this.m[0]*d+this.m[2]*y,this.m[5]+=this.m[1]*d+this.m[3]*y,this},h.prototype.scale=function(d,y){return this.m[0]*=d,this.m[1]*=d,this.m[2]*=y,this.m[3]*=y,this},h.prototype.rotate=function(d){var y=Math.cos(d),x=Math.sin(d),A=this.m[0]*y+this.m[2]*x,E=this.m[1]*y+this.m[3]*x,F=this.m[0]*-x+this.m[2]*y,M=this.m[1]*-x+this.m[3]*y;return this.m[0]=A,this.m[1]=E,this.m[2]=F,this.m[3]=M,this},h.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},h.prototype.skew=function(d,y){var x=this.m[0]+this.m[2]*y,A=this.m[1]+this.m[3]*y,E=this.m[2]+this.m[0]*d,F=this.m[3]+this.m[1]*d;return this.m[0]=x,this.m[1]=A,this.m[2]=E,this.m[3]=F,this},h.prototype.multiply=function(d){var y=this.m[0]*d.m[0]+this.m[2]*d.m[1],x=this.m[1]*d.m[0]+this.m[3]*d.m[1],A=this.m[0]*d.m[2]+this.m[2]*d.m[3],E=this.m[1]*d.m[2]+this.m[3]*d.m[3],F=this.m[0]*d.m[4]+this.m[2]*d.m[5]+this.m[4],M=this.m[1]*d.m[4]+this.m[3]*d.m[5]+this.m[5];return this.m[0]=y,this.m[1]=x,this.m[2]=A,this.m[3]=E,this.m[4]=F,this.m[5]=M,this},h.prototype.invert=function(){var d=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),y=this.m[3]*d,x=-this.m[1]*d,A=-this.m[2]*d,E=this.m[0]*d,F=d*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),M=d*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=y,this.m[1]=x,this.m[2]=A,this.m[3]=E,this.m[4]=F,this.m[5]=M,this},h.prototype.getMatrix=function(){return this.m},h.prototype.setAbsolutePosition=function(d,y){var x=this.m[0],A=this.m[1],E=this.m[2],F=this.m[3],M=this.m[4],T=this.m[5],D=(x*(y-T)-A*(d-M))/(x*F-A*E),I=(d-M-E*D)/x;return this.translate(I,D)},h.prototype.decompose=function(){var d=this.m[0],y=this.m[1],x=this.m[2],A=this.m[3],E=this.m[4],F=this.m[5],M=d*A-y*x,T={x:E,y:F,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(d!=0||y!=0){var D=Math.sqrt(d*d+y*y);T.rotation=y>0?Math.acos(d/D):-Math.acos(d/D),T.scaleX=D,T.scaleY=M/D,T.skewX=(d*x+y*A)/M,T.skewY=0}else if(x!=0||A!=0){var I=Math.sqrt(x*x+A*A);T.rotation=Math.PI/2-(A>0?Math.acos(-x/I):-Math.acos(x/I)),T.scaleX=M/I,T.scaleY=I,T.skewX=0,T.skewY=(d*x+y*A)/M}return T.rotation=t.Util._getRotation(T.rotation),T},h}();t.Transform=a;var l="[object Array]",u="[object Number]",p="[object String]",c="[object Boolean]",s=Math.PI/180,i=180/Math.PI,r="#",o="",g="0",f="Konva warning: ",v="Konva error: ",_="rgb(",m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},S=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,C=[];t.Util={_isElement:function(h){return!!(h&&h.nodeType==1)},_isFunction:function(h){return!!(h&&h.constructor&&h.call&&h.apply)},_isPlainObject:function(h){return!!h&&h.constructor===Object},_isArray:function(h){return Object.prototype.toString.call(h)===l},_isNumber:function(h){return Object.prototype.toString.call(h)===u&&!isNaN(h)&&isFinite(h)},_isString:function(h){return Object.prototype.toString.call(h)===p},_isBoolean:function(h){return Object.prototype.toString.call(h)===c},isObject:function(h){return h instanceof Object},isValidSelector:function(h){if(typeof h!="string")return!1;var d=h[0];return d==="#"||d==="."||d===d.toUpperCase()},_sign:function(h){return h===0?0:h>0?1:-1},requestAnimFrame:function(h){C.push(h),C.length===1&&requestAnimationFrame(function(){var d=C;C=[],d.forEach(function(y){y()})})},createCanvasElement:function(){var h=document.createElement("canvas");try{h.style=h.style||{}}catch{}return h},createImageElement:function(){return document.createElement("img")},_isInDocument:function(h){for(;h=h.parentNode;)if(h==document)return!0;return!1},_simplifyArray:function(h){var d=[],y=h.length,x=t.Util,A,E;for(A=0;A<y;A++)E=h[A],x._isNumber(E)?E=Math.round(E*1e3)/1e3:x._isString(E)||(E=E.toString()),d.push(E);return d},_urlToImage:function(h,d){var y=new e.glob.Image;y.onload=function(){d(y)},y.src=h},_rgbToHex:function(h,d,y){return((1<<24)+(h<<16)+(d<<8)+y).toString(16).slice(1)},_hexToRgb:function(h){h=h.replace(r,o);var d=parseInt(h,16);return{r:d>>16&255,g:d>>8&255,b:d&255}},getRandomColor:function(){for(var h=(Math.random()*16777215<<0).toString(16);h.length<6;)h=g+h;return r+h},get:function(h,d){return h===void 0?d:h},getRGB:function(h){var d;return h in m?(d=m[h],{r:d[0],g:d[1],b:d[2]}):h[0]===r?this._hexToRgb(h.substring(1)):h.substr(0,4)===_?(d=S.exec(h.replace(/ /g,"")),{r:parseInt(d[1],10),g:parseInt(d[2],10),b:parseInt(d[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(h){return h=h||"black",t.Util._namedColorToRBA(h)||t.Util._hex3ColorToRGBA(h)||t.Util._hex6ColorToRGBA(h)||t.Util._rgbColorToRGBA(h)||t.Util._rgbaColorToRGBA(h)||t.Util._hslColorToRGBA(h)},_namedColorToRBA:function(h){var d=m[h.toLowerCase()];return d?{r:d[0],g:d[1],b:d[2],a:1}:null},_rgbColorToRGBA:function(h){if(h.indexOf("rgb(")===0){h=h.match(/rgb\(([^)]+)\)/)[1];var d=h.split(/ *, */).map(Number);return{r:d[0],g:d[1],b:d[2],a:1}}},_rgbaColorToRGBA:function(h){if(h.indexOf("rgba(")===0){h=h.match(/rgba\(([^)]+)\)/)[1];var d=h.split(/ *, */).map(Number);return{r:d[0],g:d[1],b:d[2],a:d[3]}}},_hex6ColorToRGBA:function(h){if(h[0]==="#"&&h.length===7)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(h){if(h[0]==="#"&&h.length===4)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:1}},_hslColorToRGBA:function(h){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(h)){var d=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(h);d[0];var y=d.slice(1),x=Number(y[0])/360,A=Number(y[1])/100,E=Number(y[2])/100,F=void 0,M=void 0,T=void 0;if(A===0)return T=E*255,{r:Math.round(T),g:Math.round(T),b:Math.round(T),a:1};E<.5?F=E*(1+A):F=E+A-E*A;for(var D=2*E-F,I=[0,0,0],O=0;O<3;O++)M=x+1/3*-(O-1),M<0&&M++,M>1&&M--,6*M<1?T=D+(F-D)*6*M:2*M<1?T=F:3*M<2?T=D+(F-D)*(2/3-M)*6:T=D,I[O]=T*255;return{r:Math.round(I[0]),g:Math.round(I[1]),b:Math.round(I[2]),a:1}}},haveIntersection:function(h,d){return!(d.x>h.x+h.width||d.x+d.width<h.x||d.y>h.y+h.height||d.y+d.height<h.y)},cloneObject:function(h){var d={};for(var y in h)this._isPlainObject(h[y])?d[y]=this.cloneObject(h[y]):this._isArray(h[y])?d[y]=this.cloneArray(h[y]):d[y]=h[y];return d},cloneArray:function(h){return h.slice(0)},_degToRad:function(h){return h*s},_radToDeg:function(h){return h*i},_getRotation:function(h){return e.Konva.angleDeg?t.Util._radToDeg(h):h},_capitalize:function(h){return h.charAt(0).toUpperCase()+h.slice(1)},throw:function(h){throw new Error(v+h)},error:function(h){console.error(v+h)},warn:function(h){e.Konva.showWarnings&&console.warn(f+h)},extend:function(h,d){function y(){this.constructor=h}y.prototype=d.prototype;var x=h.prototype;h.prototype=new y;for(var A in x)x.hasOwnProperty(A)&&(h.prototype[A]=x[A]);h.__super__=d.prototype,h.super=d},_getControlPoints:function(h,d,y,x,A,E,F){var M=Math.sqrt(Math.pow(y-h,2)+Math.pow(x-d,2)),T=Math.sqrt(Math.pow(A-y,2)+Math.pow(E-x,2)),D=F*M/(M+T),I=F*T/(M+T),O=y-D*(A-h),b=x-D*(E-d),w=y+I*(A-h),P=x+I*(E-d);return[O,b,w,P]},_expandPoints:function(h,d){var y=h.length,x=[],A,E;for(A=2;A<y-2;A+=2)E=t.Util._getControlPoints(h[A-2],h[A-1],h[A],h[A+1],h[A+2],h[A+3],d),x.push(E[0]),x.push(E[1]),x.push(h[A]),x.push(h[A+1]),x.push(E[2]),x.push(E[3]);return x},each:function(h,d){for(var y in h)d(y,h[y])},_inRange:function(h,d,y){return d<=h&&h<y},_getProjectionToSegment:function(h,d,y,x,A,E){var F,M,T,D=(h-y)*(h-y)+(d-x)*(d-x);if(D==0)F=h,M=d,T=(A-y)*(A-y)+(E-x)*(E-x);else{var I=((A-h)*(y-h)+(E-d)*(x-d))/D;I<0?(F=h,M=d,T=(h-A)*(h-A)+(d-E)*(d-E)):I>1?(F=y,M=x,T=(y-A)*(y-A)+(x-E)*(x-E)):(F=h+I*(y-h),M=d+I*(x-d),T=(F-A)*(F-A)+(M-E)*(M-E))}return[F,M,T]},_getProjectionToLine:function(h,d,y){var x=t.Util.cloneObject(h),A=Number.MAX_VALUE;return d.forEach(function(E,F){if(!(!y&&F===d.length-1)){var M=d[(F+1)%d.length],T=t.Util._getProjectionToSegment(E.x,E.y,M.x,M.y,h.x,h.y),D=T[0],I=T[1],O=T[2];O<A&&(x.x=D,x.y=I,A=O)}}),x},_prepareArrayForTween:function(h,d,y){var x,A=[],E=[];if(h.length>d.length){var F=d;d=h,h=F}for(x=0;x<h.length;x+=2)A.push({x:h[x],y:h[x+1]});for(x=0;x<d.length;x+=2)E.push({x:d[x],y:d[x+1]});var M=[];return E.forEach(function(T){var D=t.Util._getProjectionToLine(T,A,y);M.push(D.x),M.push(D.y)}),M},_prepareToStringify:function(h){var d;h.visitedByCircularReferenceRemoval=!0;for(var y in h)if(h.hasOwnProperty(y)&&h[y]&&typeof h[y]=="object"){if(d=Object.getOwnPropertyDescriptor(h,y),h[y].visitedByCircularReferenceRemoval||t.Util._isElement(h[y]))if(d.configurable)delete h[y];else return null;else if(t.Util._prepareToStringify(h[y])===null)if(d.configurable)delete h[y];else return null}return delete h.visitedByCircularReferenceRemoval,h},_assign:function(h,d){for(var y in d)h[y]=d[y];return h},_getFirstPointerId:function(h){return h.touches?h.changedTouches[0].identifier:999}}}(rn)),rn}var nn={},an={},Bt={},Ya;function _t(){if(Ya)return Bt;Ya=1,Object.defineProperty(Bt,"__esModule",{value:!0});var t=vt(),e=yt();function n(g){return e.Util._isString(g)?'"'+g+'"':Object.prototype.toString.call(g)==="[object Number]"||e.Util._isBoolean(g)?g:Object.prototype.toString.call(g)}function a(g){return g>255?255:g<0?0:Math.round(g)}Bt.RGBComponent=a;function l(g){return g>1?1:g<1e-4?1e-4:g}Bt.alphaComponent=l;function u(){if(t.Konva.isUnminified)return function(g,f){return e.Util._isNumber(g)||e.Util.warn(n(g)+' is a not valid value for "'+f+'" attribute. The value should be a number.'),g}}Bt.getNumberValidator=u;function p(){if(t.Konva.isUnminified)return function(g,f){var v=e.Util._isNumber(g),_=g==="auto";return v||_||e.Util.warn(n(g)+' is a not valid value for "'+f+'" attribute. The value should be a number or "auto".'),g}}Bt.getNumberOrAutoValidator=p;function c(){if(t.Konva.isUnminified)return function(g,f){return e.Util._isString(g)||e.Util.warn(n(g)+' is a not valid value for "'+f+'" attribute. The value should be a string.'),g}}Bt.getStringValidator=c;function s(){if(t.Konva.isUnminified)return function(g,f){return e.Util._isFunction(g)||e.Util.warn(n(g)+' is a not valid value for "'+f+'" attribute. The value should be a function.'),g}}Bt.getFunctionValidator=s;function i(){if(t.Konva.isUnminified)return function(g,f){return e.Util._isArray(g)?g.forEach(function(v){e.Util._isNumber(v)||e.Util.warn('"'+f+'" attribute has non numeric element '+v+". Make sure that all elements are numbers.")}):e.Util.warn(n(g)+' is a not valid value for "'+f+'" attribute. The value should be a array of numbers.'),g}}Bt.getNumberArrayValidator=i;function r(){if(t.Konva.isUnminified)return function(g,f){var v=g===!0||g===!1;return v||e.Util.warn(n(g)+' is a not valid value for "'+f+'" attribute. The value should be a boolean.'),g}}Bt.getBooleanValidator=r;function o(g){if(t.Konva.isUnminified)return function(f,v){return e.Util.isObject(f)||e.Util.warn(n(f)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+g),f}}return Bt.getComponentValidator=o,Bt}var Xa;function gt(){return Xa||(Xa=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=yt(),n=_t(),a="get",l="set";t.Factory={addGetterSetter:function(u,p,c,s,i){this.addGetter(u,p,c),this.addSetter(u,p,s,i),this.addOverloadedGetterSetter(u,p)},addGetter:function(u,p,c){var s=a+e.Util._capitalize(p);u.prototype[s]=u.prototype[s]||function(){var i=this.attrs[p];return i===void 0?c:i}},addSetter:function(u,p,c,s){var i=l+e.Util._capitalize(p);u.prototype[i]||t.Factory.overWriteSetter(u,p,c,s)},overWriteSetter:function(u,p,c,s){var i=l+e.Util._capitalize(p);u.prototype[i]=function(r){return c&&r!==void 0&&r!==null&&(r=c.call(this,r,p)),this._setAttr(p,r),s&&s.call(this),this}},addComponentsGetterSetter:function(u,p,c,s,i){var r=c.length,o=e.Util._capitalize,g=a+o(p),f=l+o(p),v,_;u.prototype[g]=function(){var S={};for(v=0;v<r;v++)_=c[v],S[_]=this.getAttr(p+o(_));return S};var m=n.getComponentValidator(c);u.prototype[f]=function(S){var C=this.attrs[p],h;s&&(S=s.call(this,S)),m&&m.call(this,S,p);for(h in S)S.hasOwnProperty(h)&&this._setAttr(p+o(h),S[h]);return this._fireChangeEvent(p,C,S),i&&i.call(this),this},this.addOverloadedGetterSetter(u,p)},addOverloadedGetterSetter:function(u,p){var c=e.Util._capitalize(p),s=l+c,i=a+c;u.prototype[p]=function(){return arguments.length?(this[s](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter:function(u,p,c,s){e.Util.error("Adding deprecated "+p);var i=a+e.Util._capitalize(p),r=p+" property is deprecated and will be removed soon. Look at Konva change log for more information.";u.prototype[i]=function(){e.Util.error(r);var o=this.attrs[p];return o===void 0?c:o},this.addSetter(u,p,s,function(){e.Util.error(r)}),this.addOverloadedGetterSetter(u,p)},backCompat:function(u,p){e.Util.each(p,function(c,s){var i=u.prototype[s],r=a+e.Util._capitalize(c),o=l+e.Util._capitalize(c);function g(){i.apply(this,arguments),e.Util.error('"'+c+'" method is deprecated and will be removed soon. Use ""'+s+'" instead.')}u.prototype[c]=g,u.prototype[r]=g,u.prototype[o]=g})},afterSetFilter:function(){this._filterUpToDate=!1}}}(an)),an}var ge={},ve={},$a;function il(){if($a)return ve;$a=1;var t=ve.__extends||function(){var S=function(C,h){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,y){d.__proto__=y}||function(d,y){for(var x in y)y.hasOwnProperty(x)&&(d[x]=y[x])},S(C,h)};return function(C,h){S(C,h);function d(){this.constructor=C}C.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}}();Object.defineProperty(ve,"__esModule",{value:!0});var e=yt(),n=vt(),a=",",l="(",u=")",p="([",c="])",s=";",i="()",r="=",o=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],g=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],f=100,v=function(){function S(C){this.canvas=C,this._context=C._canvas.getContext("2d"),n.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return S.prototype.fillShape=function(C){C.fillEnabled()&&this._fill(C)},S.prototype._fill=function(C){},S.prototype.strokeShape=function(C){C.hasStroke()&&this._stroke(C)},S.prototype._stroke=function(C){},S.prototype.fillStrokeShape=function(C){this.fillShape(C),this.strokeShape(C)},S.prototype.getTrace=function(C){var h=this.traceArr,d=h.length,y="",x,A,E,F;for(x=0;x<d;x++)A=h[x],E=A.method,E?(F=A.args,y+=E,C?y+=i:e.Util._isArray(F[0])?y+=p+F.join(a)+c:y+=l+F.join(a)+u):(y+=A.property,C||(y+=r+A.val)),y+=s;return y},S.prototype.clearTrace=function(){this.traceArr=[]},S.prototype._trace=function(C){var h=this.traceArr,d;h.push(C),d=h.length,d>=f&&h.shift()},S.prototype.reset=function(){var C=this.getCanvas().getPixelRatio();this.setTransform(1*C,0,0,1*C,0,0)},S.prototype.getCanvas=function(){return this.canvas},S.prototype.clear=function(C){var h=this.getCanvas();C?this.clearRect(C.x||0,C.y||0,C.width||0,C.height||0):this.clearRect(0,0,h.getWidth()/h.pixelRatio,h.getHeight()/h.pixelRatio)},S.prototype._applyLineCap=function(C){var h=C.getLineCap();h&&this.setAttr("lineCap",h)},S.prototype._applyOpacity=function(C){var h=C.getAbsoluteOpacity();h!==1&&this.setAttr("globalAlpha",h)},S.prototype._applyLineJoin=function(C){var h=C.getLineJoin();h&&this.setAttr("lineJoin",h)},S.prototype.setAttr=function(C,h){this._context[C]=h},S.prototype.arc=function(C,h,d,y,x,A){this._context.arc(C,h,d,y,x,A)},S.prototype.arcTo=function(C,h,d,y,x){this._context.arcTo(C,h,d,y,x)},S.prototype.beginPath=function(){this._context.beginPath()},S.prototype.bezierCurveTo=function(C,h,d,y,x,A){this._context.bezierCurveTo(C,h,d,y,x,A)},S.prototype.clearRect=function(C,h,d,y){this._context.clearRect(C,h,d,y)},S.prototype.clip=function(){this._context.clip()},S.prototype.closePath=function(){this._context.closePath()},S.prototype.createImageData=function(C,h){var d=arguments;if(d.length===2)return this._context.createImageData(C,h);if(d.length===1)return this._context.createImageData(C)},S.prototype.createLinearGradient=function(C,h,d,y){return this._context.createLinearGradient(C,h,d,y)},S.prototype.createPattern=function(C,h){return this._context.createPattern(C,h)},S.prototype.createRadialGradient=function(C,h,d,y,x,A){return this._context.createRadialGradient(C,h,d,y,x,A)},S.prototype.drawImage=function(C,h,d,y,x,A,E,F,M){var T=arguments,D=this._context;T.length===3?D.drawImage(C,h,d):T.length===5?D.drawImage(C,h,d,y,x):T.length===9&&D.drawImage(C,h,d,y,x,A,E,F,M)},S.prototype.ellipse=function(C,h,d,y,x,A,E,F){this._context.ellipse(C,h,d,y,x,A,E,F)},S.prototype.isPointInPath=function(C,h){return this._context.isPointInPath(C,h)},S.prototype.fill=function(){this._context.fill()},S.prototype.fillRect=function(C,h,d,y){this._context.fillRect(C,h,d,y)},S.prototype.strokeRect=function(C,h,d,y){this._context.strokeRect(C,h,d,y)},S.prototype.fillText=function(C,h,d){this._context.fillText(C,h,d)},S.prototype.measureText=function(C){return this._context.measureText(C)},S.prototype.getImageData=function(C,h,d,y){return this._context.getImageData(C,h,d,y)},S.prototype.lineTo=function(C,h){this._context.lineTo(C,h)},S.prototype.moveTo=function(C,h){this._context.moveTo(C,h)},S.prototype.rect=function(C,h,d,y){this._context.rect(C,h,d,y)},S.prototype.putImageData=function(C,h,d){this._context.putImageData(C,h,d)},S.prototype.quadraticCurveTo=function(C,h,d,y){this._context.quadraticCurveTo(C,h,d,y)},S.prototype.restore=function(){this._context.restore()},S.prototype.rotate=function(C){this._context.rotate(C)},S.prototype.save=function(){this._context.save()},S.prototype.scale=function(C,h){this._context.scale(C,h)},S.prototype.setLineDash=function(C){this._context.setLineDash?this._context.setLineDash(C):"mozDash"in this._context?this._context.mozDash=C:"webkitLineDash"in this._context&&(this._context.webkitLineDash=C)},S.prototype.getLineDash=function(){return this._context.getLineDash()},S.prototype.setTransform=function(C,h,d,y,x,A){this._context.setTransform(C,h,d,y,x,A)},S.prototype.stroke=function(){this._context.stroke()},S.prototype.strokeText=function(C,h,d,y){this._context.strokeText(C,h,d,y)},S.prototype.transform=function(C,h,d,y,x,A){this._context.transform(C,h,d,y,x,A)},S.prototype.translate=function(C,h){this._context.translate(C,h)},S.prototype._enableTrace=function(){var C=this,h=o.length,d=e.Util._simplifyArray,y=this.setAttr,x,A,E=function(F){var M=C[F],T;C[F]=function(){return A=d(Array.prototype.slice.call(arguments,0)),T=M.apply(C,arguments),C._trace({method:F,args:A}),T}};for(x=0;x<h;x++)E(o[x]);C.setAttr=function(){y.apply(C,arguments);var F=arguments[0],M=arguments[1];(F==="shadowOffsetX"||F==="shadowOffsetY"||F==="shadowBlur")&&(M=M/this.canvas.getPixelRatio()),C._trace({property:F,val:M})}},S.prototype._applyGlobalCompositeOperation=function(C){var h=C.getGlobalCompositeOperation();h!=="source-over"&&this.setAttr("globalCompositeOperation",h)},S}();ve.Context=v,g.forEach(function(S){Object.defineProperty(v.prototype,S,{get:function(){return this._context[S]},set:function(C){this._context[S]=C}})});var _=function(S){t(C,S);function C(){return S!==null&&S.apply(this,arguments)||this}return C.prototype._fillColor=function(h){var d=h.fill();this.setAttr("fillStyle",d),h._fillFunc(this)},C.prototype._fillPattern=function(h){var d=h.getFillPatternX(),y=h.getFillPatternY(),x=n.Konva.getAngle(h.getFillPatternRotation()),A=h.getFillPatternOffsetX(),E=h.getFillPatternOffsetY(),F=h.getFillPatternScaleX(),M=h.getFillPatternScaleY();(d||y)&&this.translate(d||0,y||0),x&&this.rotate(x),(F||M)&&this.scale(F,M),(A||E)&&this.translate(-1*A,-1*E),this.setAttr("fillStyle",h._getFillPattern()),h._fillFunc(this)},C.prototype._fillLinearGradient=function(h){var d=h._getLinearGradient();d&&(this.setAttr("fillStyle",d),h._fillFunc(this))},C.prototype._fillRadialGradient=function(h){var d=h._getRadialGradient();d&&(this.setAttr("fillStyle",d),h._fillFunc(this))},C.prototype._fill=function(h){var d=h.fill(),y=h.getFillPriority();if(d&&y==="color"){this._fillColor(h);return}var x=h.getFillPatternImage();if(x&&y==="pattern"){this._fillPattern(h);return}var A=h.getFillLinearGradientColorStops();if(A&&y==="linear-gradient"){this._fillLinearGradient(h);return}var E=h.getFillRadialGradientColorStops();if(E&&y==="radial-gradient"){this._fillRadialGradient(h);return}d?this._fillColor(h):x?this._fillPattern(h):A?this._fillLinearGradient(h):E&&this._fillRadialGradient(h)},C.prototype._strokeLinearGradient=function(h){var d=h.getStrokeLinearGradientStartPoint(),y=h.getStrokeLinearGradientEndPoint(),x=h.getStrokeLinearGradientColorStops(),A=this.createLinearGradient(d.x,d.y,y.x,y.y);if(x){for(var E=0;E<x.length;E+=2)A.addColorStop(x[E],x[E+1]);this.setAttr("strokeStyle",A)}},C.prototype._stroke=function(h){var d=h.dash(),y=h.getStrokeScaleEnabled();if(h.hasStroke()){if(!y){this.save();var x=this.getCanvas().getPixelRatio();this.setTransform(x,0,0,x,0,0)}this._applyLineCap(h),d&&h.dashEnabled()&&(this.setLineDash(d),this.setAttr("lineDashOffset",h.dashOffset())),this.setAttr("lineWidth",h.strokeWidth()),h.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var A=h.getStrokeLinearGradientColorStops();A?this._strokeLinearGradient(h):this.setAttr("strokeStyle",h.stroke()),h._strokeFunc(this),y||this.restore()}},C.prototype._applyShadow=function(h){var d=e.Util,y=d.get(h.getShadowRGBA(),"black"),x=d.get(h.getShadowBlur(),5),A=d.get(h.getShadowOffset(),{x:0,y:0}),E=h.getAbsoluteScale(),F=this.canvas.getPixelRatio(),M=E.x*F,T=E.y*F;this.setAttr("shadowColor",y),this.setAttr("shadowBlur",x*Math.min(Math.abs(M),Math.abs(T))),this.setAttr("shadowOffsetX",A.x*M),this.setAttr("shadowOffsetY",A.y*T)},C}(v);ve.SceneContext=_;var m=function(S){t(C,S);function C(){return S!==null&&S.apply(this,arguments)||this}return C.prototype._fill=function(h){this.save(),this.setAttr("fillStyle",h.colorKey),h._fillFuncHit(this),this.restore()},C.prototype.strokeShape=function(h){h.hasHitStroke()&&this._stroke(h)},C.prototype._stroke=function(h){if(h.hasHitStroke()){var d=h.getStrokeScaleEnabled();if(!d){this.save();var y=this.getCanvas().getPixelRatio();this.setTransform(y,0,0,y,0,0)}this._applyLineCap(h);var x=h.hitStrokeWidth(),A=x==="auto"?h.strokeWidth():x;this.setAttr("lineWidth",A),this.setAttr("strokeStyle",h.colorKey),h._strokeFuncHit(this),d||this.restore()}},C}(v);return ve.HitContext=m,ve}var Ja;function br(){if(Ja)return ge;Ja=1;var t=ge.__extends||function(){var o=function(g,f){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,_){v.__proto__=_}||function(v,_){for(var m in _)_.hasOwnProperty(m)&&(v[m]=_[m])},o(g,f)};return function(g,f){o(g,f);function v(){this.constructor=g}g.prototype=f===null?Object.create(f):(v.prototype=f.prototype,new v)}}();Object.defineProperty(ge,"__esModule",{value:!0});var e=yt(),n=il(),a=vt(),l=gt(),u=_t(),p;function c(){if(p)return p;var o=e.Util.createCanvasElement(),g=o.getContext("2d");return p=function(){var f=a.Konva._global.devicePixelRatio||1,v=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1;return f/v}(),p}var s=function(){function o(g){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var f=g||{},v=f.pixelRatio||a.Konva.pixelRatio||c();this.pixelRatio=v,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return o.prototype.getContext=function(){return this.context},o.prototype.getPixelRatio=function(){return this.pixelRatio},o.prototype.setPixelRatio=function(g){var f=this.pixelRatio;this.pixelRatio=g,this.setSize(this.getWidth()/f,this.getHeight()/f)},o.prototype.setWidth=function(g){this.width=this._canvas.width=g*this.pixelRatio,this._canvas.style.width=g+"px";var f=this.pixelRatio,v=this.getContext()._context;v.scale(f,f)},o.prototype.setHeight=function(g){this.height=this._canvas.height=g*this.pixelRatio,this._canvas.style.height=g+"px";var f=this.pixelRatio,v=this.getContext()._context;v.scale(f,f)},o.prototype.getWidth=function(){return this.width},o.prototype.getHeight=function(){return this.height},o.prototype.setSize=function(g,f){this.setWidth(g||0),this.setHeight(f||0)},o.prototype.toDataURL=function(g,f){try{return this._canvas.toDataURL(g,f)}catch{try{return this._canvas.toDataURL()}catch(_){return e.Util.error("Unable to get data URL. "+_.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},o}();ge.Canvas=s,l.Factory.addGetterSetter(s,"pixelRatio",void 0,u.getNumberValidator());var i=function(o){t(g,o);function g(f){f===void 0&&(f={width:0,height:0});var v=o.call(this,f)||this;return v.context=new n.SceneContext(v),v.setSize(f.width,f.height),v}return g}(s);ge.SceneCanvas=i;var r=function(o){t(g,o);function g(f){f===void 0&&(f={width:0,height:0});var v=o.call(this,f)||this;return v.hitCanvas=!0,v.context=new n.HitContext(v),v.setSize(f.width,f.height),v}return g}(s);return ge.HitCanvas=r,ge}var on={},Qa;function mi(){return Qa||(Qa=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=vt(),n=yt();t.DD={get isDragging(){var a=!1;return t.DD._dragElements.forEach(function(l){l.dragStatus==="dragging"&&(a=!0)}),a},justDragged:!1,get node(){var a;return t.DD._dragElements.forEach(function(l){a=l.node}),a},_dragElements:new Map,_drag:function(a){t.DD._dragElements.forEach(function(l,u){var p=l.node,c=p.getStage();c.setPointersPositions(a),l.pointerId===void 0&&(l.pointerId=n.Util._getFirstPointerId(a));var s=c._changedPointerPositions.find(function(o){return o.id===l.pointerId});if(s){if(l.dragStatus!=="dragging"){var i=p.dragDistance(),r=Math.max(Math.abs(s.x-l.startPointerPos.x),Math.abs(s.y-l.startPointerPos.y));if(r<i||(p.startDrag({evt:a}),!p.isDragging()))return}p._setDragPosition(a,l),p.fire("dragmove",{type:"dragmove",target:p,evt:a},!0)}})},_endDragBefore:function(a){t.DD._dragElements.forEach(function(l,u){var p=l.node,c=p.getStage();a&&c.setPointersPositions(a);var s=c._changedPointerPositions.find(function(r){return r.id===l.pointerId});if(s){(l.dragStatus==="dragging"||l.dragStatus==="stopped")&&(t.DD.justDragged=!0,e.Konva.listenClickTap=!1,l.dragStatus="stopped");var i=l.node.getLayer()||l.node instanceof e.Konva.Stage&&l.node;i&&i.draw()}})},_endDragAfter:function(a){t.DD._dragElements.forEach(function(l,u){l.dragStatus==="stopped"&&l.node.fire("dragend",{type:"dragend",target:l.node,evt:a},!0),l.dragStatus!=="dragging"&&t.DD._dragElements.delete(u)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))}(on)),on}var Za;function Tt(){return Za||(Za=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=yt(),n=gt(),a=br(),l=vt(),u=mi(),p=_t();t.ids={},t.names={};var c=function(O,b){b&&(t.ids[b]=O)};t._removeId=function(O,b){O&&t.ids[O]===b&&delete t.ids[O]},t._addName=function(O,b){b&&(t.names[b]||(t.names[b]=[]),t.names[b].push(O))},t._removeName=function(O,b){if(O){var w=t.names[O];if(w){for(var P=0;P<w.length;P++){var R=w[P];R._id===b&&w.splice(P,1)}w.length===0&&delete t.names[O]}}};var s="absoluteOpacity",i="absoluteTransform",r="absoluteScale",o="canvas",g="Change",f="children",v="konva",_="listening",m="mouseenter",S="mouseleave",C="name",h="set",d="Shape",y=" ",x="stage",A="transform",E="Stage",F="visible",M=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(y),T=new e.Collection,D=1,I=function(){function O(b){var w=this;this._id=D++,this.eventListeners={},this.attrs={},this.index=0,this.parent=null,this._cache=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=T,this._dragEventId=null,this.setAttrs(b),this.on(M,function(){if(w._batchingTransformChange){w._needClearTransformCache=!0;return}w._clearCache(A),w._clearSelfAndDescendantCache(i)}),this.on("visibleChange.konva",function(){w._clearSelfAndDescendantCache(F)}),this.on("listeningChange.konva",function(){w._clearSelfAndDescendantCache(_)}),this.on("opacityChange.konva",function(){w._clearSelfAndDescendantCache(s)})}return O.prototype.hasChildren=function(){return!1},O.prototype.getChildren=function(){return T},O.prototype._clearCache=function(b){b?this._cache.delete(b):this._cache.clear()},O.prototype._getCache=function(b,w){var P=this._cache.get(b);return P===void 0&&(P=w.call(this),this._cache.set(b,P)),P},O.prototype._getCanvasCache=function(){return this._cache.get(o)},O.prototype._clearSelfAndDescendantCache=function(b,w){this._clearCache(b),w&&b===i&&this.fire("_clearTransformCache"),!this.isCached()&&this.children&&this.children.each(function(P){P._clearSelfAndDescendantCache(b,!0)})},O.prototype.clearCache=function(){return this._cache.delete(o),this._clearSelfAndDescendantCache(),this},O.prototype.cache=function(b){var w=b||{},P={};(w.x===void 0||w.y===void 0||w.width===void 0||w.height===void 0)&&(P=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var R=Math.ceil(w.width||P.width),L=Math.ceil(w.height||P.height),V=w.pixelRatio,z=w.x===void 0?P.x:w.x,H=w.y===void 0?P.y:w.y,q=w.offset||0,it=w.drawBorder||!1;if(!R||!L){e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}R+=q*2,L+=q*2,z-=q,H-=q;var ht=new a.SceneCanvas({pixelRatio:V,width:R,height:L}),ut=new a.SceneCanvas({pixelRatio:V,width:0,height:0}),et=new a.HitCanvas({pixelRatio:1,width:R,height:L}),ot=ht.getContext(),ft=et.getContext();return et.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,w.imageSmoothingEnabled===!1&&(ht.getContext()._context.imageSmoothingEnabled=!1,ut.getContext()._context.imageSmoothingEnabled=!1),ot.save(),ft.save(),ot.translate(-z,-H),ft.translate(-z,-H),this._isUnderCache=!0,this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(r),this.drawScene(ht,this,!0),this.drawHit(et,this,!0),this._isUnderCache=!1,ot.restore(),ft.restore(),it&&(ot.save(),ot.beginPath(),ot.rect(0,0,R,L),ot.closePath(),ot.setAttr("strokeStyle","red"),ot.setAttr("lineWidth",5),ot.stroke(),ot.restore()),this._cache.set(o,{scene:ht,filter:ut,hit:et,x:z,y:H}),this},O.prototype.isCached=function(){return this._cache.has("canvas")},O.prototype.getClientRect=function(b){throw new Error('abstract "getClientRect" method call')},O.prototype._transformedRect=function(b,w){var P=[{x:b.x,y:b.y},{x:b.x+b.width,y:b.y},{x:b.x+b.width,y:b.y+b.height},{x:b.x,y:b.y+b.height}],R,L,V,z,H=this.getAbsoluteTransform(w);return P.forEach(function(q){var it=H.point(q);R===void 0&&(R=V=it.x,L=z=it.y),R=Math.min(R,it.x),L=Math.min(L,it.y),V=Math.max(V,it.x),z=Math.max(z,it.y)}),{x:R,y:L,width:V-R,height:z-L}},O.prototype._drawCachedSceneCanvas=function(b){b.save(),b._applyOpacity(this),b._applyGlobalCompositeOperation(this);var w=this._getCanvasCache();b.translate(w.x,w.y);var P=this._getCachedSceneCanvas(),R=P.pixelRatio;b.drawImage(P._canvas,0,0,P.width/R,P.height/R),b.restore()},O.prototype._drawCachedHitCanvas=function(b){var w=this._getCanvasCache(),P=w.hit;b.save(),b.translate(w.x,w.y),b.drawImage(P._canvas,0,0),b.restore()},O.prototype._getCachedSceneCanvas=function(){var b=this.filters(),w=this._getCanvasCache(),P=w.scene,R=w.filter,L=R.getContext(),V,z,H,q;if(b){if(!this._filterUpToDate){var it=P.pixelRatio;R.setSize(P.width/P.pixelRatio,P.height/P.pixelRatio);try{for(V=b.length,L.clear(),L.drawImage(P._canvas,0,0,P.getWidth()/it,P.getHeight()/it),z=L.getImageData(0,0,R.getWidth(),R.getHeight()),H=0;H<V;H++){if(q=b[H],typeof q!="function"){e.Util.error("Filter should be type of function, but got "+typeof q+" instead. Please check correct filters");continue}q.call(this,z),L.putImageData(z,0,0)}}catch(ht){e.Util.error("Unable to apply filter. "+ht.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return R}return P},O.prototype.on=function(b,w){if(arguments.length===3)return this._delegate.apply(this,arguments);var P=b.split(y),R=P.length,L,V,z,H,q;for(L=0;L<R;L++)V=P[L],z=V.split("."),H=z[0],q=z[1]||"",this.eventListeners[H]||(this.eventListeners[H]=[]),this.eventListeners[H].push({name:q,handler:w});return this},O.prototype.off=function(b,w){var P=(b||"").split(y),R=P.length,L,V,z,H,q,it;if(!b)for(V in this.eventListeners)this._off(V);for(L=0;L<R;L++)if(z=P[L],H=z.split("."),q=H[0],it=H[1],q)this.eventListeners[q]&&this._off(q,it,w);else for(V in this.eventListeners)this._off(V,it,w);return this},O.prototype.dispatchEvent=function(b){var w={target:this,type:b.type,evt:b};return this.fire(b.type,w),this},O.prototype.addEventListener=function(b,w){return this.on(b,function(P){w.call(this,P.evt)}),this},O.prototype.removeEventListener=function(b){return this.off(b),this},O.prototype._delegate=function(b,w,P){var R=this;this.on(b,function(L){for(var V=L.target.findAncestors(w,!0,R),z=0;z<V.length;z++)L=e.Util.cloneObject(L),L.currentTarget=V[z],P.call(V[z],L)})},O.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),u.DD._dragElements.delete(this._id),this._remove(),this},O.prototype._clearCaches=function(){this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(s),this._clearSelfAndDescendantCache(r),this._clearSelfAndDescendantCache(x),this._clearSelfAndDescendantCache(F),this._clearSelfAndDescendantCache(_)},O.prototype._remove=function(){this._clearCaches();var b=this.getParent();b&&b.children&&(b.children.splice(this.index,1),b._setChildrenIndices(),this.parent=null)},O.prototype.destroy=function(){t._removeId(this.id(),this);for(var b=(this.name()||"").split(/\s/g),w=0;w<b.length;w++){var P=b[w];t._removeName(P,this._id)}return this.remove(),this},O.prototype.getAttr=function(b){var w="get"+e.Util._capitalize(b);return e.Util._isFunction(this[w])?this[w]():this.attrs[b]},O.prototype.getAncestors=function(){for(var b=this.getParent(),w=new e.Collection;b;)w.push(b),b=b.getParent();return w},O.prototype.getAttrs=function(){return this.attrs||{}},O.prototype.setAttrs=function(b){var w,P;if(!b)return this;for(w in b)w!==f&&(P=h+e.Util._capitalize(w),e.Util._isFunction(this[P])?this[P](b[w]):this._setAttr(w,b[w]));return this},O.prototype.isListening=function(){return this._getCache(_,this._isListening)},O.prototype._isListening=function(){var b=this.listening(),w=this.getParent();return b==="inherit"?w?w.isListening():!0:b},O.prototype.isVisible=function(){return this._getCache(F,this._isVisible)},O.prototype._isVisible=function(b){var w=this.visible(),P=this.getParent();return w==="inherit"?P&&P!==b?P._isVisible(b):!0:b&&b!==P?w&&P._isVisible(b):w},O.prototype.shouldDrawHit=function(){var b=this.getLayer();return!b&&this.isListening()&&this.isVisible()||b&&b.hitGraphEnabled()&&this.isListening()&&this.isVisible()},O.prototype.show=function(){return this.visible(!0),this},O.prototype.hide=function(){return this.visible(!1),this},O.prototype.getZIndex=function(){return this.index||0},O.prototype.getAbsoluteZIndex=function(){var b=this.getDepth(),w=this,P=0,R,L,V,z;function H(q){for(R=[],L=q.length,V=0;V<L;V++)z=q[V],P++,z.nodeType!==d&&(R=R.concat(z.getChildren().toArray())),z._id===w._id&&(V=L);R.length>0&&R[0].getDepth()<=b&&H(R)}return w.nodeType!==E&&H(w.getStage().getChildren()),P},O.prototype.getDepth=function(){for(var b=0,w=this.parent;w;)b++,w=w.parent;return b},O.prototype._batchTransformChanges=function(b){this._batchingTransformChange=!0,b(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(A),this._clearSelfAndDescendantCache(i,!0)),this._needClearTransformCache=!1},O.prototype.setPosition=function(b){var w=this;return this._batchTransformChanges(function(){w.x(b.x),w.y(b.y)}),this},O.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},O.prototype.getAbsolutePosition=function(b){for(var w=!1,P=this.parent;P;){if(P.isCached()){w=!0;break}P=P.parent}w&&!b&&(b=!0);var R=this.getAbsoluteTransform(b).getMatrix(),L=new e.Transform,V=this.offset();return L.m=R.slice(),L.translate(V.x,V.y),L.getTranslation()},O.prototype.setAbsolutePosition=function(b){var w=this._clearTransform(),P;return this.attrs.x=w.x,this.attrs.y=w.y,delete w.x,delete w.y,this._clearCache(A),P=this._getAbsoluteTransform(),P.invert(),P.translate(b.x,b.y),b={x:this.attrs.x+P.getTranslation().x,y:this.attrs.y+P.getTranslation().y},this._setTransform(w),this.setPosition({x:b.x,y:b.y}),this},O.prototype._setTransform=function(b){var w;for(w in b)this.attrs[w]=b[w]},O.prototype._clearTransform=function(){var b={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,b},O.prototype.move=function(b){var w=b.x,P=b.y,R=this.x(),L=this.y();return w!==void 0&&(R+=w),P!==void 0&&(L+=P),this.setPosition({x:R,y:L}),this},O.prototype._eachAncestorReverse=function(b,w){var P=[],R=this.getParent(),L,V;if(w&&w._id===this._id){b(this);return}for(P.unshift(this);R&&(!w||R._id!==w._id);)P.unshift(R),R=R.parent;for(L=P.length,V=0;V<L;V++)b(P[V])},O.prototype.rotate=function(b){return this.rotation(this.rotation()+b),this},O.prototype.moveToTop=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var b=this.index;return this.parent.children.splice(b,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},O.prototype.moveUp=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;var b=this.index,w=this.parent.getChildren().length;return b<w-1?(this.parent.children.splice(b,1),this.parent.children.splice(b+1,0,this),this.parent._setChildrenIndices(),!0):!1},O.prototype.moveDown=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;var b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.splice(b-1,0,this),this.parent._setChildrenIndices(),!0):!1},O.prototype.moveToBottom=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var b=this.index;return b>0?(this.parent.children.splice(b,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},O.prototype.setZIndex=function(b){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(b<0||b>=this.parent.children.length)&&e.Util.warn("Unexpected value "+b+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var w=this.index;return this.parent.children.splice(w,1),this.parent.children.splice(b,0,this),this.parent._setChildrenIndices(),this},O.prototype.getAbsoluteOpacity=function(){return this._getCache(s,this._getAbsoluteOpacity)},O.prototype._getAbsoluteOpacity=function(){var b=this.opacity(),w=this.getParent();return w&&!w._isUnderCache&&(b*=w.getAbsoluteOpacity()),b},O.prototype.moveTo=function(b){return this.getParent()!==b&&(this._remove(),b.add(this)),this},O.prototype.toObject=function(){var b={},w=this.getAttrs(),P,R,L,V,z;b.attrs={};for(P in w)R=w[P],z=e.Util.isObject(R)&&!e.Util._isPlainObject(R)&&!e.Util._isArray(R),!z&&(L=typeof this[P]=="function"&&this[P],delete w[P],V=L?L.call(this):null,w[P]=R,V!==R&&(b.attrs[P]=R));return b.className=this.getClassName(),e.Util._prepareToStringify(b)},O.prototype.toJSON=function(){return JSON.stringify(this.toObject())},O.prototype.getParent=function(){return this.parent},O.prototype.findAncestors=function(b,w,P){var R=[];w&&this._isMatch(b)&&R.push(this);for(var L=this.parent;L;){if(L===P)return R;L._isMatch(b)&&R.push(L),L=L.parent}return R},O.prototype.isAncestorOf=function(b){return!1},O.prototype.findAncestor=function(b,w,P){return this.findAncestors(b,w,P)[0]},O.prototype._isMatch=function(b){if(!b)return!1;if(typeof b=="function")return b(this);var w=b.replace(/ /g,"").split(","),P=w.length,R,L;for(R=0;R<P;R++)if(L=w[R],e.Util.isValidSelector(L)||(e.Util.warn('Selector "'+L+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),L.charAt(0)==="#"){if(this.id()===L.slice(1))return!0}else if(L.charAt(0)==="."){if(this.hasName(L.slice(1)))return!0}else if(this.className===L||this.nodeType===L)return!0;return!1},O.prototype.getLayer=function(){var b=this.getParent();return b?b.getLayer():null},O.prototype.getStage=function(){return this._getCache(x,this._getStage)},O.prototype._getStage=function(){var b=this.getParent();if(b)return b.getStage()},O.prototype.fire=function(b,w,P){return w===void 0&&(w={}),w.target=w.target||this,P?this._fireAndBubble(b,w):this._fire(b,w),this},O.prototype.getAbsoluteTransform=function(b){return b?this._getAbsoluteTransform(b):this._getCache(i,this._getAbsoluteTransform)},O.prototype._getAbsoluteTransform=function(b){var w;if(b)return w=new e.Transform,this._eachAncestorReverse(function(R){var L=R.transformsEnabled();L==="all"?w.multiply(R.getTransform()):L==="position"&&w.translate(R.x()-R.offsetX(),R.y()-R.offsetY())},b),w;this.parent?w=this.parent.getAbsoluteTransform().copy():w=new e.Transform;var P=this.transformsEnabled();return P==="all"?w.multiply(this.getTransform()):P==="position"&&w.translate(this.x()-this.offsetX(),this.y()-this.offsetY()),w},O.prototype.getAbsoluteScale=function(b){for(var w=this;w;)w._isUnderCache&&(b=w),w=w.getParent();var P=this.getAbsoluteTransform(b),R=P.decompose();return{x:R.scaleX,y:R.scaleY}},O.prototype.getAbsoluteRotation=function(){return this.getAbsoluteTransform().decompose().rotation},O.prototype.getTransform=function(){return this._getCache(A,this._getTransform)},O.prototype._getTransform=function(){var b=new e.Transform,w=this.x(),P=this.y(),R=l.Konva.getAngle(this.rotation()),L=this.scaleX(),V=this.scaleY(),z=this.skewX(),H=this.skewY(),q=this.offsetX(),it=this.offsetY();return(w!==0||P!==0)&&b.translate(w,P),R!==0&&b.rotate(R),(z!==0||H!==0)&&b.skew(z,H),(L!==1||V!==1)&&b.scale(L,V),(q!==0||it!==0)&&b.translate(-1*q,-1*it),b},O.prototype.clone=function(b){var w=e.Util.cloneObject(this.attrs),P,R,L,V,z;for(P in b)w[P]=b[P];var H=new this.constructor(w);for(P in this.eventListeners)for(R=this.eventListeners[P],L=R.length,V=0;V<L;V++)z=R[V],z.name.indexOf(v)<0&&(H.eventListeners[P]||(H.eventListeners[P]=[]),H.eventListeners[P].push(z));return H},O.prototype._toKonvaCanvas=function(b){b=b||{};var w=this.getClientRect(),P=this.getStage(),R=b.x!==void 0?b.x:w.x,L=b.y!==void 0?b.y:w.y,V=b.pixelRatio||1,z=new a.SceneCanvas({width:b.width||w.width||(P?P.width():0),height:b.height||w.height||(P?P.height():0),pixelRatio:V}),H=z.getContext();return H.save(),(R||L)&&H.translate(-1*R,-1*L),this.drawScene(z),H.restore(),z},O.prototype.toCanvas=function(b){return this._toKonvaCanvas(b)._canvas},O.prototype.toDataURL=function(b){b=b||{};var w=b.mimeType||null,P=b.quality||null,R=this._toKonvaCanvas(b).toDataURL(w,P);return b.callback&&b.callback(R),R},O.prototype.toImage=function(b){if(!b||!b.callback)throw"callback required for toImage method config argument";var w=b.callback;delete b.callback,e.Util._urlToImage(this.toDataURL(b),function(P){w(P)})},O.prototype.setSize=function(b){return this.width(b.width),this.height(b.height),this},O.prototype.getSize=function(){return{width:this.width(),height:this.height()}},O.prototype.getClassName=function(){return this.className||this.nodeType},O.prototype.getType=function(){return this.nodeType},O.prototype.getDragDistance=function(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():l.Konva.dragDistance},O.prototype._off=function(b,w,P){var R=this.eventListeners[b],L,V,z;for(L=0;L<R.length;L++)if(V=R[L].name,z=R[L].handler,(V!=="konva"||w==="konva")&&(!w||V===w)&&(!P||P===z)){if(R.splice(L,1),R.length===0){delete this.eventListeners[b];break}L--}},O.prototype._fireChangeEvent=function(b,w,P){this._fire(b+g,{oldVal:w,newVal:P})},O.prototype.setId=function(b){var w=this.id();return t._removeId(w,this),c(this,b),this._setAttr("id",b),this},O.prototype.setName=function(b){var w=(this.name()||"").split(/\s/g),P=(b||"").split(/\s/g),R,L;for(L=0;L<w.length;L++)R=w[L],P.indexOf(R)===-1&&R&&t._removeName(R,this._id);for(L=0;L<P.length;L++)R=P[L],w.indexOf(R)===-1&&R&&t._addName(this,R);return this._setAttr(C,b),this},O.prototype.addName=function(b){if(!this.hasName(b)){var w=this.name(),P=w?w+" "+b:b;this.setName(P)}return this},O.prototype.hasName=function(b){if(!b)return!1;var w=this.name();if(!w)return!1;var P=(w||"").split(/\s/g);return P.indexOf(b)!==-1},O.prototype.removeName=function(b){var w=(this.name()||"").split(/\s/g),P=w.indexOf(b);return P!==-1&&(w.splice(P,1),this.setName(w.join(" "))),this},O.prototype.setAttr=function(b,w){var P=this[h+e.Util._capitalize(b)];return e.Util._isFunction(P)?P.call(this,w):this._setAttr(b,w),this},O.prototype._setAttr=function(b,w){var P=this.attrs[b];P===w&&!e.Util.isObject(w)||(w==null?delete this.attrs[b]:this.attrs[b]=w,this._fireChangeEvent(b,P,w))},O.prototype._setComponentAttr=function(b,w,P){var R;P!==void 0&&(R=this.attrs[b],R||(this.attrs[b]=this.getAttr(b)),this.attrs[b][w]=P,this._fireChangeEvent(b,R,P))},O.prototype._fireAndBubble=function(b,w,P){w&&this.nodeType===d&&(w.target=this);var R=(b===m||b===S)&&(P&&(this===P||this.isAncestorOf&&this.isAncestorOf(P))||this.nodeType==="Stage"&&!P);if(!R){this._fire(b,w);var L=(b===m||b===S)&&P&&P.isAncestorOf&&P.isAncestorOf(this)&&!P.isAncestorOf(this.parent);(w&&!w.cancelBubble||!w)&&this.parent&&this.parent.isListening()&&!L&&(P&&P.parent?this._fireAndBubble.call(this.parent,b,w,P):this._fireAndBubble.call(this.parent,b,w))}},O.prototype._fire=function(b,w){var P=this.eventListeners[b],R;if(P)for(w=w||{},w.currentTarget=this,w.type=b,R=0;R<P.length;R++)P[R].handler.call(this,w)},O.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},O.prototype._createDragElement=function(b){var w=b?b.pointerId:void 0,P=this.getStage(),R=this.getAbsolutePosition(),L=P._getPointerById(w)||P._changedPointerPositions[0]||R;u.DD._dragElements.set(this._id,{node:this,startPointerPos:L,offset:{x:L.x-R.x,y:L.y-R.y},dragStatus:"ready",pointerId:w})},O.prototype.startDrag=function(b){u.DD._dragElements.has(this._id)||this._createDragElement(b);var w=u.DD._dragElements.get(this._id);w.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:b&&b.evt},!0)},O.prototype._setDragPosition=function(b,w){var P=this.getStage()._getPointerById(w.pointerId);if(P){var R={x:P.x-w.offset.x,y:P.y-w.offset.y},L=this.dragBoundFunc();if(L!==void 0){var V=L.call(this,R,b);V?R=V:e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==R.x||this._lastPos.y!==R.y)&&(this.setAbsolutePosition(R),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=R}},O.prototype.stopDrag=function(b){var w=u.DD._dragElements.get(this._id);w&&(w.dragStatus="stopped"),u.DD._endDragBefore(b),u.DD._endDragAfter(b)},O.prototype.setDraggable=function(b){this._setAttr("draggable",b),this._dragChange()},O.prototype.isDragging=function(){var b=u.DD._dragElements.get(this._id);return b?b.dragStatus==="dragging":!1},O.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(b){var w=this,P=b.evt.button!==void 0,R=!P||l.Konva.dragButtons.indexOf(b.evt.button)>=0;if(R&&!this.isDragging()){var L=!1;u.DD._dragElements.forEach(function(V){w.isAncestorOf(V.node)&&(L=!0)}),L||this._createDragElement(b)}})},O.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var b=this.getStage();b&&u.DD._dragElements.has(this._id)&&this.stopDrag()}},O.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},O.create=function(b,w){return e.Util._isString(b)&&(b=JSON.parse(b)),this._createNode(b,w)},O._createNode=function(b,w){var P=O.prototype.getClassName.call(b),R=b.children,L,V,z;w&&(b.attrs.container=w),l._NODES_REGISTRY[P]||(e.Util.warn('Can not find a node with class name "'+P+'". Fallback to "Shape".'),P="Shape");var H=l._NODES_REGISTRY[P];if(L=new H(b.attrs),R)for(V=R.length,z=0;z<V;z++)L.add(O._createNode(R[z]));return L},O}();t.Node=I,I.prototype.nodeType="Node",I.prototype._attrsAffectingSize=[],n.Factory.addGetterSetter(I,"zIndex"),n.Factory.addGetterSetter(I,"absolutePosition"),n.Factory.addGetterSetter(I,"position"),n.Factory.addGetterSetter(I,"x",0,p.getNumberValidator()),n.Factory.addGetterSetter(I,"y",0,p.getNumberValidator()),n.Factory.addGetterSetter(I,"globalCompositeOperation","source-over",p.getStringValidator()),n.Factory.addGetterSetter(I,"opacity",1,p.getNumberValidator()),n.Factory.addGetterSetter(I,"name","",p.getStringValidator()),n.Factory.addGetterSetter(I,"id","",p.getStringValidator()),n.Factory.addGetterSetter(I,"rotation",0,p.getNumberValidator()),n.Factory.addComponentsGetterSetter(I,"scale",["x","y"]),n.Factory.addGetterSetter(I,"scaleX",1,p.getNumberValidator()),n.Factory.addGetterSetter(I,"scaleY",1,p.getNumberValidator()),n.Factory.addComponentsGetterSetter(I,"skew",["x","y"]),n.Factory.addGetterSetter(I,"skewX",0,p.getNumberValidator()),n.Factory.addGetterSetter(I,"skewY",0,p.getNumberValidator()),n.Factory.addComponentsGetterSetter(I,"offset",["x","y"]),n.Factory.addGetterSetter(I,"offsetX",0,p.getNumberValidator()),n.Factory.addGetterSetter(I,"offsetY",0,p.getNumberValidator()),n.Factory.addGetterSetter(I,"dragDistance",null,p.getNumberValidator()),n.Factory.addGetterSetter(I,"width",0,p.getNumberValidator()),n.Factory.addGetterSetter(I,"height",0,p.getNumberValidator()),n.Factory.addGetterSetter(I,"listening","inherit",function(O){var b=O===!0||O===!1||O==="inherit";return b||e.Util.warn(O+' is a not valid value for "listening" attribute. The value may be true, false or "inherit".'),O}),n.Factory.addGetterSetter(I,"preventDefault",!0,p.getBooleanValidator()),n.Factory.addGetterSetter(I,"filters",null,function(O){return this._filterUpToDate=!1,O}),n.Factory.addGetterSetter(I,"visible","inherit",function(O){var b=O===!0||O===!1||O==="inherit";return b||e.Util.warn(O+' is a not valid value for "visible" attribute. The value may be true, false or "inherit".'),O}),n.Factory.addGetterSetter(I,"transformsEnabled","all",p.getStringValidator()),n.Factory.addGetterSetter(I,"size"),n.Factory.addGetterSetter(I,"dragBoundFunc"),n.Factory.addGetterSetter(I,"draggable",!1,p.getBooleanValidator()),n.Factory.backCompat(I,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),e.Collection.mapMethods(I)}(nn)),nn}var Le={},to;function Ge(){if(to)return Le;to=1;var t=Le.__extends||function(){var s=function(i,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,g){o.__proto__=g}||function(o,g){for(var f in g)g.hasOwnProperty(f)&&(o[f]=g[f])},s(i,r)};return function(i,r){s(i,r);function o(){this.constructor=i}i.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(Le,"__esModule",{value:!0});var e=yt(),n=gt(),a=Tt(),l=mi(),u=_t(),p=vt(),c=function(s){t(i,s);function i(){var r=s!==null&&s.apply(this,arguments)||this;return r.children=new e.Collection,r}return i.prototype.getChildren=function(r){if(!r)return this.children;var o=new e.Collection;return this.children.each(function(g){r(g)&&o.push(g)}),o},i.prototype.hasChildren=function(){return this.getChildren().length>0},i.prototype.removeChildren=function(){for(var r,o=0;o<this.children.length;o++)r=this.children[o],r.parent=null,r.index=0,r.remove();return this.children=new e.Collection,this},i.prototype.destroyChildren=function(){for(var r,o=0;o<this.children.length;o++)r=this.children[o],r.parent=null,r.index=0,r.destroy();return this.children=new e.Collection,this},i.prototype.add=function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(arguments.length>1){for(var g=0;g<arguments.length;g++)this.add(arguments[g]);return this}var f=r[0];if(f.getParent())return f.moveTo(this),this;var v=this.children;return this._validateAdd(f),f._clearCaches(),f.index=v.length,f.parent=this,v.push(f),this._fire("add",{child:f}),this},i.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),s.prototype.destroy.call(this),this},i.prototype.find=function(r){return this._generalFind(r,!1)},i.prototype.get=function(r){return e.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(r)},i.prototype.findOne=function(r){var o=this._generalFind(r,!0);return o.length>0?o[0]:void 0},i.prototype._generalFind=function(r,o){var g=[];return this._descendants(function(f){var v=f._isMatch(r);return v&&g.push(f),!!(v&&o)}),e.Collection.toCollection(g)},i.prototype._descendants=function(r){for(var o=!1,g=0;g<this.children.length;g++){var f=this.children[g];if(o=r(f),o)return!0;if(f.hasChildren()&&(o=f._descendants(r),o))return!0}return!1},i.prototype.toObject=function(){var r=a.Node.prototype.toObject.call(this);r.children=[];for(var o=this.getChildren(),g=o.length,f=0;f<g;f++){var v=o[f];r.children.push(v.toObject())}return r},i.prototype.isAncestorOf=function(r){for(var o=r.getParent();o;){if(o._id===this._id)return!0;o=o.getParent()}return!1},i.prototype.clone=function(r){var o=a.Node.prototype.clone.call(this,r);return this.getChildren().each(function(g){o.add(g.clone())}),o},i.prototype.getAllIntersections=function(r){var o=[];return this.find("Shape").each(function(g){g.isVisible()&&g.intersects(r)&&o.push(g)}),o},i.prototype._setChildrenIndices=function(){this.children.each(function(r,o){r.index=o})},i.prototype.drawScene=function(r,o,g){var f=this.getLayer(),v=r||f&&f.getCanvas(),_=v&&v.getContext(),m=this._getCanvasCache(),S=m&&m.scene;return(this.isVisible()||g)&&(!g&&S?(_.save(),f._applyTransform(this,_,o),this._drawCachedSceneCanvas(_),_.restore()):this._drawChildren(v,"drawScene",o,!1,g,g)),this},i.prototype.drawHit=function(r,o,g){var f=this.getLayer(),v=r||f&&f.hitCanvas,_=v&&v.getContext(),m=this._getCanvasCache(),S=m&&m.hit;return(this.shouldDrawHit(v)||g)&&(!g&&S?(_.save(),f._applyTransform(this,_,o),this._drawCachedHitCanvas(_),_.restore()):this._drawChildren(v,"drawHit",o,!1,g,g)),this},i.prototype._drawChildren=function(r,o,g,f,v,_){var m=this.getLayer(),S=r&&r.getContext(),C=this.clipWidth(),h=this.clipHeight(),d=this.clipFunc(),y=C&&h||d,x,A;if(y&&m){S.save();var E=this.getAbsoluteTransform(g),F=E.getMatrix();S.transform(F[0],F[1],F[2],F[3],F[4],F[5]),S.beginPath(),d?d.call(this,S,this):(x=this.clipX(),A=this.clipY(),S.rect(x,A,C,h)),S.clip(),F=E.copy().invert().getMatrix(),S.transform(F[0],F[1],F[2],F[3],F[4],F[5])}var M=this.globalCompositeOperation()!=="source-over"&&!_&&o==="drawScene";M&&m&&(S.save(),S._applyGlobalCompositeOperation(this)),this.children.each(function(T){T[o](r,g,f,v)}),M&&m&&S.restore(),y&&m&&S.restore()},i.prototype.shouldDrawHit=function(r){if(r&&r.isCache)return!0;var o=this.getLayer(),g=!1;l.DD._dragElements.forEach(function(v){v.dragStatus==="dragging"&&v.node.getLayer()===o&&(g=!0)});var f=!p.Konva.hitOnDragEnabled&&g;return o&&o.hitGraphEnabled()&&this.isVisible()&&!f},i.prototype.getClientRect=function(r){r=r||{};var o=r.skipTransform,g=r.relativeTo,f,v,_,m,S={x:1/0,y:1/0,width:0,height:0},C=this;this.children.each(function(A){if(A.visible()){var E=A.getClientRect({relativeTo:C,skipShadow:r.skipShadow,skipStroke:r.skipStroke});E.width===0&&E.height===0||(f===void 0?(f=E.x,v=E.y,_=E.x+E.width,m=E.y+E.height):(f=Math.min(f,E.x),v=Math.min(v,E.y),_=Math.max(_,E.x+E.width),m=Math.max(m,E.y+E.height)))}});for(var h=this.find("Shape"),d=!1,y=0;y<h.length;y++){var x=h[y];if(x._isVisible(this)){d=!0;break}}return d&&f!==void 0?S={x:f,y:v,width:_-f,height:m-v}:S={x:0,y:0,width:0,height:0},o?S:this._transformedRect(S,g)},i}(a.Node);return Le.Container=c,n.Factory.addComponentsGetterSetter(c,"clip",["x","y","width","height"]),n.Factory.addGetterSetter(c,"clipX",void 0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"clipY",void 0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"clipWidth",void 0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"clipHeight",void 0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"clipFunc"),e.Collection.mapMethods(c),Le}var Ar={},ae={},eo;function nl(){if(eo)return ae;eo=1,Object.defineProperty(ae,"__esModule",{value:!0});var t=vt(),e=new Map,n=t.Konva._global.PointerEvent!==void 0;function a(s){return e.get(s)}ae.getCapturedShape=a;function l(s){return{evt:s,pointerId:s.pointerId}}ae.createEvent=l;function u(s,i){return e.get(s)===i}ae.hasPointerCapture=u;function p(s,i){c(s);var r=i.getStage();r&&(e.set(s,i),n&&i._fire("gotpointercapture",l(new PointerEvent("gotpointercapture"))))}ae.setPointerCapture=p;function c(s,i){var r=e.get(s);if(r){var o=r.getStage();o&&o.content,e.delete(s),n&&r._fire("lostpointercapture",l(new PointerEvent("lostpointercapture")))}}return ae.releaseCapture=c,ae}var ro;function Vu(){return ro||(ro=1,function(t){var e=Ar.__extends||function(){var tt=function(K,N){return tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,W){B.__proto__=W}||function(B,W){for(var at in W)W.hasOwnProperty(at)&&(B[at]=W[at])},tt(K,N)};return function(K,N){tt(K,N);function B(){this.constructor=K}K.prototype=N===null?Object.create(N):(B.prototype=N.prototype,new B)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=yt(),a=gt(),l=Ge(),u=vt(),p=br(),c=mi(),s=vt(),i=nl(),r="Stage",o="string",g="px",f="mouseout",v="mouseleave",_="mouseover",m="mouseenter",S="mousemove",C="mousedown",h="mouseup",d="pointermove",y="pointerdown",x="pointerup",A="pointercancel",E="lostpointercapture",F="contextmenu",M="click",T="dblclick",D="touchstart",I="touchend",O="tap",b="dbltap",w="touchmove",P="wheel",R="contentMouseout",L="contentMouseover",V="contentMousemove",z="contentMousedown",H="contentMouseup",q="contentContextmenu",it="contentClick",ht="contentDblclick",ut="contentTouchstart",et="contentTouchend",ot="contentDbltap",ft="contentTap",st="contentTouchmove",mt="contentWheel",G="relative",k="konvajs-content",U="_",$="container",j=5,X="",Q=[m,C,S,h,f,D,w,I,_,P,F,y,d,x,A,E],Z=Q.length;function J(tt,K){tt.content.addEventListener(K,function(N){tt[U+K](N)},!1)}var Y="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";t.stages=[];function nt(tt){return tt===void 0&&(tt={}),(tt.clipFunc||tt.clipWidth||tt.clipHeight)&&n.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),tt}var rt=function(tt){e(K,tt);function K(N){var B=tt.call(this,nt(N))||this;return B._pointerPositions=[],B._changedPointerPositions=[],B._buildDOM(),B._bindContentEvents(),t.stages.push(B),B.on("widthChange.konva heightChange.konva",B._resizeDOM),B.on("visibleChange.konva",B._checkVisibility),B.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",function(){nt(B.attrs)}),B._checkVisibility(),B}return K.prototype._validateAdd=function(N){var B=N.getType()==="Layer",W=N.getType()==="FastLayer",at=B||W;at||n.Util.throw("You may only add layers to the stage.")},K.prototype._checkVisibility=function(){if(this.content){var N=this.visible()?"":"none";this.content.style.display=N}},K.prototype.setContainer=function(N){if(typeof N===o){if(N.charAt(0)==="."){var B=N.slice(1);N=document.getElementsByClassName(B)[0]}else{var W;N.charAt(0)!=="#"?W=N:W=N.slice(1),N=document.getElementById(W)}if(!N)throw"Can not find container in document with id "+W}return this._setAttr($,N),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),N.appendChild(this.content)),this},K.prototype.shouldDrawHit=function(){return!0},K.prototype.clear=function(){var N=this.children,B=N.length,W;for(W=0;W<B;W++)N[W].clear();return this},K.prototype.clone=function(N){return N||(N={}),N.container=document.createElement("div"),l.Container.prototype.clone.call(this,N)},K.prototype.destroy=function(){tt.prototype.destroy.call(this);var N=this.content;N&&n.Util._isInDocument(N)&&this.container().removeChild(N);var B=t.stages.indexOf(this);return B>-1&&t.stages.splice(B,1),this},K.prototype.getPointerPosition=function(){var N=this._pointerPositions[0]||this._changedPointerPositions[0];return N?{x:N.x,y:N.y}:(n.Util.warn(Y),null)},K.prototype._getPointerById=function(N){return this._pointerPositions.find(function(B){return B.id===N})},K.prototype.getPointersPositions=function(){return this._pointerPositions},K.prototype.getStage=function(){return this},K.prototype.getContent=function(){return this.content},K.prototype._toKonvaCanvas=function(N){N=N||{};var B=N.x||0,W=N.y||0,at=new p.SceneCanvas({width:N.width||this.width(),height:N.height||this.height(),pixelRatio:N.pixelRatio||1}),lt=at.getContext()._context,ct=this.children;return(B||W)&&lt.translate(-1*B,-1*W),ct.each(function(bt){if(bt.isVisible()){var Et=bt._toKonvaCanvas(N);lt.drawImage(Et._canvas,B,W,Et.getWidth()/Et.getPixelRatio(),Et.getHeight()/Et.getPixelRatio())}}),at},K.prototype.getIntersection=function(N,B){if(!N)return null;var W=this.children,at=W.length,lt=at-1,ct,bt;for(ct=lt;ct>=0;ct--)if(bt=W[ct].getIntersection(N,B),bt)return bt;return null},K.prototype._resizeDOM=function(){var N=this.width(),B=this.height();this.content&&(this.content.style.width=N+g,this.content.style.height=B+g),this.bufferCanvas.setSize(N,B),this.bufferHitCanvas.setSize(N,B),this.children.each(function(W){W.setSize({width:N,height:B}),W.draw()})},K.prototype.add=function(N){if(arguments.length>1){for(var B=0;B<arguments.length;B++)this.add(arguments[B]);return this}tt.prototype.add.call(this,N);var W=this.children.length;return W>j&&n.Util.warn("The stage has "+W+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),N.setSize({width:this.width(),height:this.height()}),N.draw(),u.Konva.isBrowser&&this.content.appendChild(N.canvas._canvas),this},K.prototype.getParent=function(){return null},K.prototype.getLayer=function(){return null},K.prototype.hasPointerCapture=function(N){return i.hasPointerCapture(N,this)},K.prototype.setPointerCapture=function(N){i.setPointerCapture(N,this)},K.prototype.releaseCapture=function(N){i.releaseCapture(N,this)},K.prototype.getLayers=function(){return this.getChildren()},K.prototype._bindContentEvents=function(){if(u.Konva.isBrowser)for(var N=0;N<Z;N++)J(this,Q[N])},K.prototype._mouseenter=function(N){this.setPointersPositions(N),this._fire(m,{evt:N,target:this,currentTarget:this})},K.prototype._mouseover=function(N){this.setPointersPositions(N),this._fire(L,{evt:N}),this._fire(_,{evt:N,target:this,currentTarget:this})},K.prototype._mouseout=function(N){var B;this.setPointersPositions(N);var W=!((B=this.targetShape)===null||B===void 0)&&B.getStage()?this.targetShape:null,at=!c.DD.isDragging||u.Konva.hitOnDragEnabled;W&&at?(W._fireAndBubble(f,{evt:N}),W._fireAndBubble(v,{evt:N}),this._fire(v,{evt:N,target:this,currentTarget:this}),this.targetShape=null):at&&(this._fire(v,{evt:N,target:this,currentTarget:this}),this._fire(f,{evt:N,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire(R,{evt:N})},K.prototype._mousemove=function(N){var B;if(u.Konva.UA.ieMobile)return this._touchmove(N);this.setPointersPositions(N);var W=n.Util._getFirstPointerId(N),at,lt=!((B=this.targetShape)===null||B===void 0)&&B.getStage()?this.targetShape:null,ct=!c.DD.isDragging||u.Konva.hitOnDragEnabled;if(ct){if(at=this.getIntersection(this.getPointerPosition()),at&&at.isListening()){var bt=lt!==at;ct&&bt?(lt&&(lt._fireAndBubble(f,{evt:N,pointerId:W},at),lt._fireAndBubble(v,{evt:N,pointerId:W},at)),at._fireAndBubble(_,{evt:N,pointerId:W},lt),at._fireAndBubble(m,{evt:N,pointerId:W},lt),at._fireAndBubble(S,{evt:N,pointerId:W}),this.targetShape=at):at._fireAndBubble(S,{evt:N,pointerId:W})}else lt&&ct&&(lt._fireAndBubble(f,{evt:N,pointerId:W}),lt._fireAndBubble(v,{evt:N,pointerId:W}),this._fire(_,{evt:N,target:this,currentTarget:this,pointerId:W}),this.targetShape=null),this._fire(S,{evt:N,target:this,currentTarget:this,pointerId:W});this._fire(V,{evt:N})}N.cancelable&&N.preventDefault()},K.prototype._mousedown=function(N){if(u.Konva.UA.ieMobile)return this._touchstart(N);this.setPointersPositions(N);var B=n.Util._getFirstPointerId(N),W=this.getIntersection(this.getPointerPosition());c.DD.justDragged=!1,u.Konva.listenClickTap=!0,W&&W.isListening()?(this.clickStartShape=W,W._fireAndBubble(C,{evt:N,pointerId:B})):this._fire(C,{evt:N,target:this,currentTarget:this,pointerId:B}),this._fire(z,{evt:N})},K.prototype._mouseup=function(N){if(u.Konva.UA.ieMobile)return this._touchend(N);this.setPointersPositions(N);var B=n.Util._getFirstPointerId(N),W=this.getIntersection(this.getPointerPosition()),at=this.clickStartShape,lt=this.clickEndShape,ct=!1;u.Konva.inDblClickWindow?(ct=!0,clearTimeout(this.dblTimeout)):c.DD.justDragged||(u.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){u.Konva.inDblClickWindow=!1},u.Konva.dblClickWindow),W&&W.isListening()?(this.clickEndShape=W,W._fireAndBubble(h,{evt:N,pointerId:B}),u.Konva.listenClickTap&&at&&at._id===W._id&&(W._fireAndBubble(M,{evt:N,pointerId:B}),ct&&lt&&lt===W&&W._fireAndBubble(T,{evt:N,pointerId:B}))):(this._fire(h,{evt:N,target:this,currentTarget:this,pointerId:B}),u.Konva.listenClickTap&&this._fire(M,{evt:N,target:this,currentTarget:this,pointerId:B}),ct&&this._fire(T,{evt:N,target:this,currentTarget:this,pointerId:B})),this._fire(H,{evt:N}),u.Konva.listenClickTap&&(this._fire(it,{evt:N}),ct&&this._fire(ht,{evt:N})),u.Konva.listenClickTap=!1,N.cancelable&&N.preventDefault()},K.prototype._contextmenu=function(N){this.setPointersPositions(N);var B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(F,{evt:N}):this._fire(F,{evt:N,target:this,currentTarget:this}),this._fire(q,{evt:N})},K.prototype._touchstart=function(N){var B=this;this.setPointersPositions(N);var W=!1;this._changedPointerPositions.forEach(function(at){var lt=B.getIntersection(at);u.Konva.listenClickTap=!0,c.DD.justDragged=!1;var ct=lt&&lt.isListening();ct&&(u.Konva.captureTouchEventsEnabled&&lt.setPointerCapture(at.id),B.tapStartShape=lt,lt._fireAndBubble(D,{evt:N,pointerId:at.id},B),W=!0,lt.isListening()&&lt.preventDefault()&&N.cancelable&&N.preventDefault())}),W||this._fire(D,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(ut,{evt:N})},K.prototype._touchmove=function(N){var B=this;this.setPointersPositions(N);var W=!c.DD.isDragging||u.Konva.hitOnDragEnabled;if(W){var at=!1,lt={};this._changedPointerPositions.forEach(function(ct){var bt=i.getCapturedShape(ct.id)||B.getIntersection(ct),Et=bt&&bt.isListening();Et&&(lt[bt._id]||(lt[bt._id]=!0,bt._fireAndBubble(w,{evt:N,pointerId:ct.id}),at=!0,bt.isListening()&&bt.preventDefault()&&N.cancelable&&N.preventDefault()))}),at||this._fire(w,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(st,{evt:N})}c.DD.isDragging&&c.DD.node.preventDefault()&&N.cancelable&&N.preventDefault()},K.prototype._touchend=function(N){var B=this;this.setPointersPositions(N);var W=this.clickEndShape,at=!1;u.Konva.inDblClickWindow?(at=!0,clearTimeout(this.dblTimeout)):c.DD.justDragged||(u.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){u.Konva.inDblClickWindow=!1},u.Konva.dblClickWindow);var lt=!1,ct={},bt=!1,Et=!1;this._changedPointerPositions.forEach(function(Zt){var Ct=i.getCapturedShape(Zt.id)||B.getIntersection(Zt);Ct&&Ct.releaseCapture(Zt.id);var Vt=Ct&&Ct.isListening();Vt&&(ct[Ct._id]||(ct[Ct._id]=!0,B.clickEndShape=Ct,Ct._fireAndBubble(I,{evt:N,pointerId:Zt.id}),lt=!0,u.Konva.listenClickTap&&Ct===B.tapStartShape&&(bt=!0,Ct._fireAndBubble(O,{evt:N,pointerId:Zt.id}),at&&W&&W===Ct&&(Et=!0,Ct._fireAndBubble(b,{evt:N,pointerId:Zt.id}))),Ct.isListening()&&Ct.preventDefault()&&N.cancelable&&N.preventDefault()))}),lt||this._fire(I,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),u.Konva.listenClickTap&&!bt&&this._fire(O,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),at&&!Et&&this._fire(b,{evt:N,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(et,{evt:N}),u.Konva.listenClickTap&&(this._fire(ft,{evt:N}),at&&this._fire(ot,{evt:N})),u.Konva.listenClickTap=!1},K.prototype._wheel=function(N){this.setPointersPositions(N);var B=this.getIntersection(this.getPointerPosition());B&&B.isListening()?B._fireAndBubble(P,{evt:N}):this._fire(P,{evt:N,target:this,currentTarget:this}),this._fire(mt,{evt:N})},K.prototype._pointerdown=function(N){if(u.Konva._pointerEventsEnabled){this.setPointersPositions(N);var B=i.getCapturedShape(N.pointerId)||this.getIntersection(this.getPointerPosition());B&&B._fireAndBubble(y,i.createEvent(N))}},K.prototype._pointermove=function(N){if(u.Konva._pointerEventsEnabled){this.setPointersPositions(N);var B=i.getCapturedShape(N.pointerId)||this.getIntersection(this.getPointerPosition());B&&B._fireAndBubble(d,i.createEvent(N))}},K.prototype._pointerup=function(N){if(u.Konva._pointerEventsEnabled){this.setPointersPositions(N);var B=i.getCapturedShape(N.pointerId)||this.getIntersection(this.getPointerPosition());B&&B._fireAndBubble(x,i.createEvent(N)),i.releaseCapture(N.pointerId)}},K.prototype._pointercancel=function(N){if(u.Konva._pointerEventsEnabled){this.setPointersPositions(N);var B=i.getCapturedShape(N.pointerId)||this.getIntersection(this.getPointerPosition());B&&B._fireAndBubble(x,i.createEvent(N)),i.releaseCapture(N.pointerId)}},K.prototype._lostpointercapture=function(N){i.releaseCapture(N.pointerId)},K.prototype.setPointersPositions=function(N){var B=this,W=this._getContentPosition(),at=null,lt=null;N=N||window.event,N.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],n.Collection.prototype.each.call(N.touches,function(ct){B._pointerPositions.push({id:ct.identifier,x:(ct.clientX-W.left)/W.scaleX,y:(ct.clientY-W.top)/W.scaleY})}),n.Collection.prototype.each.call(N.changedTouches||N.touches,function(ct){B._changedPointerPositions.push({id:ct.identifier,x:(ct.clientX-W.left)/W.scaleX,y:(ct.clientY-W.top)/W.scaleY})})):(at=(N.clientX-W.left)/W.scaleX,lt=(N.clientY-W.top)/W.scaleY,this.pointerPos={x:at,y:lt},this._pointerPositions=[{x:at,y:lt,id:n.Util._getFirstPointerId(N)}],this._changedPointerPositions=[{x:at,y:lt,id:n.Util._getFirstPointerId(N)}])},K.prototype._setPointerPosition=function(N){n.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(N)},K.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var N=this.content.getBoundingClientRect();return{top:N.top,left:N.left,scaleX:N.width/this.content.clientWidth||1,scaleY:N.height/this.content.clientHeight||1}},K.prototype._buildDOM=function(){if(this.bufferCanvas=new p.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new p.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!u.Konva.isBrowser){var N=this.container();if(!N)throw"Stage has no container. A container is required.";N.innerHTML=X,this.content=document.createElement("div"),this.content.style.position=G,this.content.style.userSelect="none",this.content.className=k,this.content.setAttribute("role","presentation"),N.appendChild(this.content),this._resizeDOM()}},K.prototype.cache=function(){return n.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},K.prototype.clearCache=function(){return this},K.prototype.batchDraw=function(){return this.children.each(function(N){N.batchDraw()}),this},K}(l.Container);t.Stage=rt,rt.prototype.nodeType=r,s._registerNode(rt),a.Factory.addGetterSetter(rt,"container")}(Ar)),Ar}var ze={},Ue={},io;function al(){if(io)return Ue;io=1;var t=Ue.__extends||function(){var c=function(s,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var g in o)o.hasOwnProperty(g)&&(r[g]=o[g])},c(s,i)};return function(s,i){c(s,i);function r(){this.constructor=s}s.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(Ue,"__esModule",{value:!0});var e=yt(),n=Ge(),a=Tt(),l=gt(),u=br(),p=function(c){t(s,c);function s(i){var r=c.call(this,i)||this;return r.canvas=new u.SceneCanvas,r._waitingForDraw=!1,r.on("visibleChange",r._checkVisibility),r._checkVisibility(),r.on("imageSmoothingEnabledChange",r._setSmoothEnabled),r._setSmoothEnabled(),r}return s.prototype.createPNGStream=function(){var i=this.canvas._canvas;return i.createPNGStream()},s.prototype.getCanvas=function(){return this.canvas},s.prototype.getHitCanvas=function(){return this.hitCanvas},s.prototype.getContext=function(){return this.getCanvas().getContext()},s.prototype.clear=function(i){return this.getContext().clear(i),this},s.prototype.setZIndex=function(i){c.prototype.setZIndex.call(this,i);var r=this.getStage();return r&&(r.content.removeChild(this.getCanvas()._canvas),i<r.children.length-1?r.content.insertBefore(this.getCanvas()._canvas,r.children[i+1].getCanvas()._canvas):r.content.appendChild(this.getCanvas()._canvas)),this},s.prototype.moveToTop=function(){a.Node.prototype.moveToTop.call(this);var i=this.getStage();return i&&(i.content.removeChild(this.getCanvas()._canvas),i.content.appendChild(this.getCanvas()._canvas)),!0},s.prototype.moveUp=function(){var i=a.Node.prototype.moveUp.call(this);if(!i)return!1;var r=this.getStage();return r?(r.content.removeChild(this.getCanvas()._canvas),this.index<r.children.length-1?r.content.insertBefore(this.getCanvas()._canvas,r.children[this.index+1].getCanvas()._canvas):r.content.appendChild(this.getCanvas()._canvas),!0):!1},s.prototype.moveDown=function(){if(a.Node.prototype.moveDown.call(this)){var i=this.getStage();if(i){var r=i.children;i.content.removeChild(this.getCanvas()._canvas),i.content.insertBefore(this.getCanvas()._canvas,r[this.index+1].getCanvas()._canvas)}return!0}return!1},s.prototype.moveToBottom=function(){if(a.Node.prototype.moveToBottom.call(this)){var i=this.getStage();if(i){var r=i.children;i.content.removeChild(this.getCanvas()._canvas),i.content.insertBefore(this.getCanvas()._canvas,r[1].getCanvas()._canvas)}return!0}return!1},s.prototype.getLayer=function(){return this},s.prototype.hitGraphEnabled=function(){return!0},s.prototype.remove=function(){var i=this.getCanvas()._canvas;return a.Node.prototype.remove.call(this),i&&i.parentNode&&e.Util._isInDocument(i)&&i.parentNode.removeChild(i),this},s.prototype.getStage=function(){return this.parent},s.prototype.setSize=function(i){var r=i.width,o=i.height;return this.canvas.setSize(r,o),this._setSmoothEnabled(),this},s.prototype._toKonvaCanvas=function(i){return i=i||{},i.width=i.width||this.getWidth(),i.height=i.height||this.getHeight(),i.x=i.x!==void 0?i.x:this.x(),i.y=i.y!==void 0?i.y:this.y(),a.Node.prototype._toKonvaCanvas.call(this,i)},s.prototype._checkVisibility=function(){var i=this.visible();i?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"},s.prototype._setSmoothEnabled=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},s.prototype.getWidth=function(){if(this.parent)return this.parent.width()},s.prototype.setWidth=function(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},s.prototype.getHeight=function(){if(this.parent)return this.parent.height()},s.prototype.setHeight=function(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},s.prototype.getIntersection=function(i,r){return null},s.prototype.batchDraw=function(){var i=this;return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(function(){i.draw(),i._waitingForDraw=!1})),this},s.prototype._applyTransform=function(i,r,o){var g=i.getAbsoluteTransform(o).getMatrix();r.transform(g[0],g[1],g[2],g[3],g[4],g[5])},s}(n.Container);return Ue.BaseLayer=p,p.prototype.nodeType="BaseLayer",l.Factory.addGetterSetter(p,"imageSmoothingEnabled",!0),l.Factory.addGetterSetter(p,"clearBeforeDraw",!0),e.Collection.mapMethods(p),Ue}var Or={},no;function Mt(){return no||(no=1,function(t){var e=Or.__extends||function(){var F=function(M,T){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,I){D.__proto__=I}||function(D,I){for(var O in I)I.hasOwnProperty(O)&&(D[O]=I[O])},F(M,T)};return function(M,T){F(M,T);function D(){this.constructor=M}M.prototype=T===null?Object.create(T):(D.prototype=T.prototype,new D)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=yt(),a=gt(),l=Tt(),u=_t(),p=vt(),c=nl(),s="hasShadow",i="shadowRGBA",r="patternImage",o="linearGradient",g="radialGradient",f;function v(){return f||(f=n.Util.createCanvasElement().getContext("2d"),f)}t.shapes={};function _(F){F.fill()}function m(F){F.stroke()}function S(F){F.fill()}function C(F){F.stroke()}function h(){this._clearCache(s)}function d(){this._clearCache(i)}function y(){this._clearCache(r)}function x(){this._clearCache(o)}function A(){this._clearCache(g)}var E=function(F){e(M,F);function M(T){for(var D=F.call(this,T)||this,I;I=n.Util.getRandomColor(),!(I&&!(I in t.shapes)););return D.colorKey=I,t.shapes[I]=D,D.on("shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",h),D.on("shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",d),D.on("fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",y),D.on("fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",x),D.on("fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",A),D}return M.prototype.getContext=function(){return this.getLayer().getContext()},M.prototype.getCanvas=function(){return this.getLayer().getCanvas()},M.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},M.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},M.prototype.hasShadow=function(){return this._getCache(s,this._hasShadow)},M.prototype._hasShadow=function(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},M.prototype._getFillPattern=function(){return this._getCache(r,this.__getFillPattern)},M.prototype.__getFillPattern=function(){if(this.fillPatternImage()){var T=v(),D=T.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");return D}},M.prototype._getLinearGradient=function(){return this._getCache(o,this.__getLinearGradient)},M.prototype.__getLinearGradient=function(){var T=this.fillLinearGradientColorStops();if(T){for(var D=v(),I=this.fillLinearGradientStartPoint(),O=this.fillLinearGradientEndPoint(),b=D.createLinearGradient(I.x,I.y,O.x,O.y),w=0;w<T.length;w+=2)b.addColorStop(T[w],T[w+1]);return b}},M.prototype._getRadialGradient=function(){return this._getCache(g,this.__getRadialGradient)},M.prototype.__getRadialGradient=function(){var T=this.fillRadialGradientColorStops();if(T){for(var D=v(),I=this.fillRadialGradientStartPoint(),O=this.fillRadialGradientEndPoint(),b=D.createRadialGradient(I.x,I.y,this.fillRadialGradientStartRadius(),O.x,O.y,this.fillRadialGradientEndRadius()),w=0;w<T.length;w+=2)b.addColorStop(T[w],T[w+1]);return b}},M.prototype.getShadowRGBA=function(){return this._getCache(i,this._getShadowRGBA)},M.prototype._getShadowRGBA=function(){if(this.hasShadow()){var T=n.Util.colorToRGBA(this.shadowColor());return"rgba("+T.r+","+T.g+","+T.b+","+T.a*(this.shadowOpacity()||1)+")"}},M.prototype.hasFill=function(){return this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())},M.prototype.hasStroke=function(){return this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops())},M.prototype.hasHitStroke=function(){var T=this.hitStrokeWidth();return T==="auto"?this.hasStroke():this.strokeEnabled()&&!!T},M.prototype.intersects=function(T){var D=this.getStage(),I=D.bufferHitCanvas,O;return I.getContext().clear(),this.drawHit(I),O=I.context.getImageData(Math.round(T.x),Math.round(T.y),1,1).data,O[3]>0},M.prototype.destroy=function(){return l.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this},M.prototype._useBufferCanvas=function(T){return!!((!T||this.hasShadow())&&this.perfectDrawEnabled()&&this.getAbsoluteOpacity()!==1&&this.hasFill()&&this.hasStroke()&&this.getStage())},M.prototype.setStrokeHitEnabled=function(T){n.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),T?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},M.prototype.getStrokeHitEnabled=function(){return this.hitStrokeWidth()!==0},M.prototype.getSelfRect=function(){var T=this.size();return{x:this._centroid?-T.width/2:0,y:this._centroid?-T.height/2:0,width:T.width,height:T.height}},M.prototype.getClientRect=function(T){T=T||{};var D=T.skipTransform,I=T.relativeTo,O=this.getSelfRect(),b=!T.skipStroke&&this.hasStroke(),w=b&&this.strokeWidth()||0,P=O.width+w,R=O.height+w,L=!T.skipShadow&&this.hasShadow(),V=L?this.shadowOffsetX():0,z=L?this.shadowOffsetY():0,H=P+Math.abs(V),q=R+Math.abs(z),it=L&&this.shadowBlur()||0,ht=H+it*2,ut=q+it*2,et=0;Math.round(w/2)!==w/2&&(et=1);var ot={width:ht+et,height:ut+et,x:-Math.round(w/2+it)+Math.min(V,0)+O.x,y:-Math.round(w/2+it)+Math.min(z,0)+O.y};return D?ot:this._transformedRect(ot,I)},M.prototype.drawScene=function(T,D,I,O){var b=this.getLayer(),w=T||b.getCanvas(),P=w.getContext(),R=this._getCanvasCache(),L=this.sceneFunc(),V=this.hasShadow(),z=this.hasStroke(),H,q,it;if(!this.isVisible()&&!I)return this;if(R)return P.save(),b._applyTransform(this,P,D),this._drawCachedSceneCanvas(P),P.restore(),this;if(!L)return this;if(P.save(),this._useBufferCanvas(I)&&!O){if(H=this.getStage(),q=H.bufferCanvas,it=q.getContext(),it.clear(),it.save(),it._applyLineJoin(this),!I)if(b)b._applyTransform(this,it,D);else{var ht=this.getAbsoluteTransform(D).getMatrix();P.transform(ht[0],ht[1],ht[2],ht[3],ht[4],ht[5])}L.call(this,it,this),it.restore();var ut=q.pixelRatio;V&&!w.hitCanvas?(P.save(),P._applyShadow(this),P._applyOpacity(this),P._applyGlobalCompositeOperation(this),P.drawImage(q._canvas,0,0,q.width/ut,q.height/ut),P.restore()):(P._applyOpacity(this),P._applyGlobalCompositeOperation(this),P.drawImage(q._canvas,0,0,q.width/ut,q.height/ut))}else{if(P._applyLineJoin(this),!I)if(b)b._applyTransform(this,P,D);else{var et=this.getAbsoluteTransform(D).getMatrix();P.transform(et[0],et[1],et[2],et[3],et[4],et[5])}V&&z&&!w.hitCanvas?(P.save(),I||(P._applyOpacity(this),P._applyGlobalCompositeOperation(this)),P._applyShadow(this),L.call(this,P,this),P.restore(),this.hasFill()&&this.shadowForStrokeEnabled()&&L.call(this,P,this)):V&&!w.hitCanvas?(P.save(),I||(P._applyOpacity(this),P._applyGlobalCompositeOperation(this)),P._applyShadow(this),L.call(this,P,this),P.restore()):(I||(P._applyOpacity(this),P._applyGlobalCompositeOperation(this)),L.call(this,P,this))}return P.restore(),this},M.prototype.drawHit=function(T,D,I){var O=this.getLayer(),b=T||O.hitCanvas,w=b&&b.getContext(),P=this.hitFunc()||this.sceneFunc(),R=this._getCanvasCache(),L=R&&R.hit;if(this.colorKey||(console.log(this),n.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),!this.shouldDrawHit()&&!I)return this;if(L)return w.save(),O._applyTransform(this,w,D),this._drawCachedHitCanvas(w),w.restore(),this;if(!P)return this;if(w.save(),w._applyLineJoin(this),!I)if(O)O._applyTransform(this,w,D);else{var V=this.getAbsoluteTransform(D).getMatrix();w.transform(V[0],V[1],V[2],V[3],V[4],V[5])}return P.call(this,w,this),w.restore(),this},M.prototype.drawHitFromCache=function(T){T===void 0&&(T=0);var D=this._getCanvasCache(),I=this._getCachedSceneCanvas(),O=D.hit,b=O.getContext(),w=O.getWidth(),P=O.getHeight(),R,L,V,z,H,q;b.clear(),b.drawImage(I._canvas,0,0,w,P);try{for(R=b.getImageData(0,0,w,P),L=R.data,V=L.length,z=n.Util._hexToRgb(this.colorKey),H=0;H<V;H+=4)q=L[H+3],q>T?(L[H]=z.r,L[H+1]=z.g,L[H+2]=z.b,L[H+3]=255):L[H+3]=0;b.putImageData(R,0,0)}catch(it){n.Util.error("Unable to draw hit graph from cached scene canvas. "+it.message)}return this},M.prototype.hasPointerCapture=function(T){return c.hasPointerCapture(T,this)},M.prototype.setPointerCapture=function(T){c.setPointerCapture(T,this)},M.prototype.releaseCapture=function(T){c.releaseCapture(T,this)},M}(l.Node);t.Shape=E,E.prototype._fillFunc=_,E.prototype._strokeFunc=m,E.prototype._fillFuncHit=S,E.prototype._strokeFuncHit=C,E.prototype._centroid=!1,E.prototype.nodeType="Shape",p._registerNode(E),a.Factory.addGetterSetter(E,"stroke",void 0,u.getStringValidator()),a.Factory.addGetterSetter(E,"strokeWidth",2,u.getNumberValidator()),a.Factory.addGetterSetter(E,"hitStrokeWidth","auto",u.getNumberOrAutoValidator()),a.Factory.addGetterSetter(E,"strokeHitEnabled",!0,u.getBooleanValidator()),a.Factory.addGetterSetter(E,"perfectDrawEnabled",!0,u.getBooleanValidator()),a.Factory.addGetterSetter(E,"shadowForStrokeEnabled",!0,u.getBooleanValidator()),a.Factory.addGetterSetter(E,"lineJoin"),a.Factory.addGetterSetter(E,"lineCap"),a.Factory.addGetterSetter(E,"sceneFunc"),a.Factory.addGetterSetter(E,"hitFunc"),a.Factory.addGetterSetter(E,"dash"),a.Factory.addGetterSetter(E,"dashOffset",0,u.getNumberValidator()),a.Factory.addGetterSetter(E,"shadowColor",void 0,u.getStringValidator()),a.Factory.addGetterSetter(E,"shadowBlur",0,u.getNumberValidator()),a.Factory.addGetterSetter(E,"shadowOpacity",1,u.getNumberValidator()),a.Factory.addComponentsGetterSetter(E,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(E,"shadowOffsetX",0,u.getNumberValidator()),a.Factory.addGetterSetter(E,"shadowOffsetY",0,u.getNumberValidator()),a.Factory.addGetterSetter(E,"fillPatternImage"),a.Factory.addGetterSetter(E,"fill",void 0,u.getStringValidator()),a.Factory.addGetterSetter(E,"fillPatternX",0,u.getNumberValidator()),a.Factory.addGetterSetter(E,"fillPatternY",0,u.getNumberValidator()),a.Factory.addGetterSetter(E,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(E,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(E,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(E,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(E,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(E,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(E,"fillEnabled",!0),a.Factory.addGetterSetter(E,"strokeEnabled",!0),a.Factory.addGetterSetter(E,"shadowEnabled",!0),a.Factory.addGetterSetter(E,"dashEnabled",!0),a.Factory.addGetterSetter(E,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(E,"fillPriority","color"),a.Factory.addComponentsGetterSetter(E,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(E,"fillPatternOffsetX",0,u.getNumberValidator()),a.Factory.addGetterSetter(E,"fillPatternOffsetY",0,u.getNumberValidator()),a.Factory.addComponentsGetterSetter(E,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(E,"fillPatternScaleX",1,u.getNumberValidator()),a.Factory.addGetterSetter(E,"fillPatternScaleY",1,u.getNumberValidator()),a.Factory.addComponentsGetterSetter(E,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(E,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(E,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(E,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(E,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(E,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(E,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(E,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(E,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(E,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(E,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(E,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(E,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(E,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(E,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(E,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(E,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(E,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(E,"fillPatternRotation",0),a.Factory.backCompat(E,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),n.Collection.mapMethods(E)}(Or)),Or}var ao;function Bu(){if(ao)return ze;ao=1;var t=ze.__extends||function(){var _=function(m,S){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,h){C.__proto__=h}||function(C,h){for(var d in h)h.hasOwnProperty(d)&&(C[d]=h[d])},_(m,S)};return function(m,S){_(m,S);function C(){this.constructor=m}m.prototype=S===null?Object.create(S):(C.prototype=S.prototype,new C)}}();Object.defineProperty(ze,"__esModule",{value:!0});var e=yt(),n=Ge(),a=gt(),l=al(),u=br(),p=Mt(),c=_t(),s=vt(),i="#",r="beforeDraw",o="draw",g=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],f=g.length,v=function(_){t(m,_);function m(){var S=_!==null&&_.apply(this,arguments)||this;return S.hitCanvas=new u.HitCanvas({pixelRatio:1}),S}return m.prototype.setSize=function(S){var C=S.width,h=S.height;return _.prototype.setSize.call(this,{width:C,height:h}),this.hitCanvas.setSize(C,h),this},m.prototype._validateAdd=function(S){var C=S.getType();C!=="Group"&&C!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")},m.prototype.getIntersection=function(S,C){var h,d,y,x;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var A=1,E=!1;;){for(d=0;d<f;d++){if(y=g[d],h=this._getIntersection({x:S.x+y.x*A,y:S.y+y.y*A}),x=h.shape,x&&C)return x.findAncestor(C,!0);if(x)return x;if(E=!!h.antialiased,!h.antialiased)break}if(E)A+=1;else return null}},m.prototype._getIntersection=function(S){var C=this.hitCanvas.pixelRatio,h=this.hitCanvas.context.getImageData(Math.round(S.x*C),Math.round(S.y*C),1,1).data,d=h[3],y,x;return d===255?(y=e.Util._rgbToHex(h[0],h[1],h[2]),x=p.shapes[i+y],x?{shape:x}:{antialiased:!0}):d>0?{antialiased:!0}:{}},m.prototype.drawScene=function(S,C){var h=this.getLayer(),d=S||h&&h.getCanvas();return this._fire(r,{node:this}),this.clearBeforeDraw()&&d.getContext().clear(),n.Container.prototype.drawScene.call(this,d,C),this._fire(o,{node:this}),this},m.prototype.drawHit=function(S,C){var h=this.getLayer(),d=S||h&&h.hitCanvas;return h&&h.clearBeforeDraw()&&h.getHitCanvas().getContext().clear(),n.Container.prototype.drawHit.call(this,d,C),this},m.prototype.clear=function(S){return l.BaseLayer.prototype.clear.call(this,S),this.getHitCanvas().getContext().clear(S),this},m.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},m.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},m.prototype.toggleHitCanvas=function(){if(this.parent){var S=this.parent,C=!!this.hitCanvas._canvas.parentNode;C?S.content.removeChild(this.hitCanvas._canvas):S.content.appendChild(this.hitCanvas._canvas)}},m}(l.BaseLayer);return ze.Layer=v,v.prototype.nodeType="Layer",s._registerNode(v),a.Factory.addGetterSetter(v,"hitGraphEnabled",!0,c.getBooleanValidator()),e.Collection.mapMethods(v),ze}var Ve={},oo;function Hu(){if(oo)return Ve;oo=1;var t=Ve.__extends||function(){var p=function(c,s){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])},p(c,s)};return function(c,s){p(c,s);function i(){this.constructor=c}c.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(Ve,"__esModule",{value:!0});var e=yt(),n=Ge(),a=al(),l=vt(),u=function(p){t(c,p);function c(){return p!==null&&p.apply(this,arguments)||this}return c.prototype._validateAdd=function(s){var i=s.getType();i!=="Shape"&&e.Util.throw("You may only add shapes to a fast layer.")},c.prototype.hitGraphEnabled=function(){return!1},c.prototype.drawScene=function(s){var i=this.getLayer(),r=s||i&&i.getCanvas();return this.clearBeforeDraw()&&r.getContext().clear(),n.Container.prototype.drawScene.call(this,r),this},c.prototype.draw=function(){return this.drawScene(),this},c}(a.BaseLayer);return Ve.FastLayer=u,u.prototype.nodeType="FastLayer",l._registerNode(u),e.Collection.mapMethods(u),Ve}var Be={},so;function Wn(){if(so)return Be;so=1;var t=Be.__extends||function(){var u=function(p,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,i){s.__proto__=i}||function(s,i){for(var r in i)i.hasOwnProperty(r)&&(s[r]=i[r])},u(p,c)};return function(p,c){u(p,c);function s(){this.constructor=p}p.prototype=c===null?Object.create(c):(s.prototype=c.prototype,new s)}}();Object.defineProperty(Be,"__esModule",{value:!0});var e=yt(),n=Ge(),a=vt(),l=function(u){t(p,u);function p(){return u!==null&&u.apply(this,arguments)||this}return p.prototype._validateAdd=function(c){var s=c.getType();s!=="Group"&&s!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")},p}(n.Container);return Be.Group=l,l.prototype.nodeType="Group",a._registerNode(l),e.Collection.mapMethods(l),Be}var Mr={},lo;function jn(){if(lo)return Mr;lo=1,Object.defineProperty(Mr,"__esModule",{value:!0});var t=vt(),e=function(){return t.glob.performance&&t.glob.performance.now?function(){return t.glob.performance.now()}:function(){return new Date().getTime()}}(),n=function(){function a(l,u){this.id=a.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:e(),frameRate:0},this.func=l,this.setLayers(u)}return a.prototype.setLayers=function(l){var u=[];return l?l.length>0?u=l:u=[l]:u=[],this.layers=u,this},a.prototype.getLayers=function(){return this.layers},a.prototype.addLayer=function(l){var u=this.layers,p=u.length,c;for(c=0;c<p;c++)if(u[c]._id===l._id)return!1;return this.layers.push(l),!0},a.prototype.isRunning=function(){var l=a,u=l.animations,p=u.length,c;for(c=0;c<p;c++)if(u[c].id===this.id)return!0;return!1},a.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=e(),a._addAnimation(this),this},a.prototype.stop=function(){return a._removeAnimation(this),this},a.prototype._updateFrameObject=function(l){this.frame.timeDiff=l-this.frame.lastTime,this.frame.lastTime=l,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},a._addAnimation=function(l){this.animations.push(l),this._handleAnimation()},a._removeAnimation=function(l){var u=l.id,p=this.animations,c=p.length,s;for(s=0;s<c;s++)if(p[s].id===u){this.animations.splice(s,1);break}},a._runFrames=function(){var l={},u=this.animations,p,c,s,i,r,o,g,f,v;for(i=0;i<u.length;i++)if(p=u[i],c=p.layers,s=p.func,p._updateFrameObject(e()),o=c.length,s?v=s.call(p,p.frame)!==!1:v=!0,!!v)for(r=0;r<o;r++)g=c[r],g._id!==void 0&&(l[g._id]=g);for(f in l)l.hasOwnProperty(f)&&l[f].draw()},a._animationLoop=function(){var l=a;l.animations.length?(l._runFrames(),requestAnimationFrame(l._animationLoop)):l.animRunning=!1},a._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},a.animations=[],a.animIdCounter=0,a.animRunning=!1,a}();return Mr.Animation=n,Mr}var sn={},ho;function qu(){return ho||(ho=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=yt(),n=jn(),a=Tt(),l=vt(),u={node:1,duration:1,easing:1,onFinish:1,yoyo:1},p=1,c=2,s=3,i=0,r=["fill","stroke","shadowColor"],o=function(){function f(v,_,m,S,C,h,d){this.prop=v,this.propFunc=_,this.begin=S,this._pos=S,this.duration=h,this._change=0,this.prevPos=0,this.yoyo=d,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=m,this._change=C-this.begin,this.pause()}return f.prototype.fire=function(v){var _=this[v];_&&_()},f.prototype.setTime=function(v){v>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():v<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=v,this.update())},f.prototype.getTime=function(){return this._time},f.prototype.setPosition=function(v){this.prevPos=this._pos,this.propFunc(v),this._pos=v},f.prototype.getPosition=function(v){return v===void 0&&(v=this._time),this.func(v,this.begin,this._change,this.duration)},f.prototype.play=function(){this.state=c,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},f.prototype.reverse=function(){this.state=s,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},f.prototype.seek=function(v){this.pause(),this._time=v,this.update(),this.fire("onSeek")},f.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},f.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},f.prototype.update=function(){this.setPosition(this.getPosition(this._time))},f.prototype.onEnterFrame=function(){var v=this.getTimer()-this._startTime;this.state===c?this.setTime(v):this.state===s&&this.setTime(this.duration-v)},f.prototype.pause=function(){this.state=p,this.fire("onPause")},f.prototype.getTimer=function(){return new Date().getTime()},f}(),g=function(){function f(v){var _=this,m=v.node,S=m._id,C,h=v.easing||t.Easings.Linear,d=!!v.yoyo,y;typeof v.duration>"u"?C=.3:v.duration===0?C=.001:C=v.duration,this.node=m,this._id=i++;var x=m.getLayer()||(m instanceof l.Konva.Stage?m.getLayers():null);x||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new n.Animation(function(){_.tween.onEnterFrame()},x),this.tween=new o(y,function(A){_._tweenFunc(A)},h,0,1,C*1e3,d),this._addListeners(),f.attrs[S]||(f.attrs[S]={}),f.attrs[S][this._id]||(f.attrs[S][this._id]={}),f.tweens[S]||(f.tweens[S]={});for(y in v)u[y]===void 0&&this._addAttr(y,v[y]);this.reset(),this.onFinish=v.onFinish,this.onReset=v.onReset}return f.prototype._addAttr=function(v,_){var m=this.node,S=m._id,C,h,d,y,x,A,E,F;if(d=f.tweens[S][v],d&&delete f.attrs[S][d][v],C=m.getAttr(v),e.Util._isArray(_))if(h=[],x=Math.max(_.length,C.length),v==="points"&&_.length!==C.length&&(_.length>C.length?(E=C,C=e.Util._prepareArrayForTween(C,_,m.closed())):(A=_,_=e.Util._prepareArrayForTween(_,C,m.closed()))),v.indexOf("fill")===0)for(y=0;y<x;y++)if(y%2===0)h.push(_[y]-C[y]);else{var M=e.Util.colorToRGBA(C[y]);F=e.Util.colorToRGBA(_[y]),C[y]=M,h.push({r:F.r-M.r,g:F.g-M.g,b:F.b-M.b,a:F.a-M.a})}else for(y=0;y<x;y++)h.push(_[y]-C[y]);else r.indexOf(v)!==-1?(C=e.Util.colorToRGBA(C),F=e.Util.colorToRGBA(_),h={r:F.r-C.r,g:F.g-C.g,b:F.b-C.b,a:F.a-C.a}):h=_-C;f.attrs[S][this._id][v]={start:C,diff:h,end:_,trueEnd:A,trueStart:E},f.tweens[S][v]=this._id},f.prototype._tweenFunc=function(v){var _=this.node,m=f.attrs[_._id][this._id],S,C,h,d,y,x,A,E;for(S in m){if(C=m[S],h=C.start,d=C.diff,E=C.end,e.Util._isArray(h))if(y=[],A=Math.max(h.length,E.length),S.indexOf("fill")===0)for(x=0;x<A;x++)x%2===0?y.push((h[x]||0)+d[x]*v):y.push("rgba("+Math.round(h[x].r+d[x].r*v)+","+Math.round(h[x].g+d[x].g*v)+","+Math.round(h[x].b+d[x].b*v)+","+(h[x].a+d[x].a*v)+")");else for(x=0;x<A;x++)y.push((h[x]||0)+d[x]*v);else r.indexOf(S)!==-1?y="rgba("+Math.round(h.r+d.r*v)+","+Math.round(h.g+d.g*v)+","+Math.round(h.b+d.b*v)+","+(h.a+d.a*v)+")":y=h+d*v;_.setAttr(S,y)}},f.prototype._addListeners=function(){var v=this;this.tween.onPlay=function(){v.anim.start()},this.tween.onReverse=function(){v.anim.start()},this.tween.onPause=function(){v.anim.stop()},this.tween.onFinish=function(){var _=v.node,m=f.attrs[_._id][v._id];m.points&&m.points.trueEnd&&_.setAttr("points",m.points.trueEnd),v.onFinish&&v.onFinish.call(v)},this.tween.onReset=function(){var _=v.node,m=f.attrs[_._id][v._id];m.points&&m.points.trueStart&&_.points(m.points.trueStart),v.onReset&&v.onReset()}},f.prototype.play=function(){return this.tween.play(),this},f.prototype.reverse=function(){return this.tween.reverse(),this},f.prototype.reset=function(){return this.tween.reset(),this},f.prototype.seek=function(v){return this.tween.seek(v*1e3),this},f.prototype.pause=function(){return this.tween.pause(),this},f.prototype.finish=function(){return this.tween.finish(),this},f.prototype.destroy=function(){var v=this.node._id,_=this._id,m=f.tweens[v],S;this.pause();for(S in m)delete f.tweens[v][S];delete f.attrs[v][_]},f.attrs={},f.tweens={},f}();t.Tween=g,a.Node.prototype.to=function(f){var v=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),v&&v()};var _=new g(f);_.play()},t.Easings={BackEaseIn:function(f,v,_,m){var S=1.70158;return _*(f/=m)*f*((S+1)*f-S)+v},BackEaseOut:function(f,v,_,m){var S=1.70158;return _*((f=f/m-1)*f*((S+1)*f+S)+1)+v},BackEaseInOut:function(f,v,_,m){var S=1.70158;return(f/=m/2)<1?_/2*(f*f*(((S*=1.525)+1)*f-S))+v:_/2*((f-=2)*f*(((S*=1.525)+1)*f+S)+2)+v},ElasticEaseIn:function(f,v,_,m,S,C){var h=0;return f===0?v:(f/=m)===1?v+_:(C||(C=m*.3),!S||S<Math.abs(_)?(S=_,h=C/4):h=C/(2*Math.PI)*Math.asin(_/S),-(S*Math.pow(2,10*(f-=1))*Math.sin((f*m-h)*(2*Math.PI)/C))+v)},ElasticEaseOut:function(f,v,_,m,S,C){var h=0;return f===0?v:(f/=m)===1?v+_:(C||(C=m*.3),!S||S<Math.abs(_)?(S=_,h=C/4):h=C/(2*Math.PI)*Math.asin(_/S),S*Math.pow(2,-10*f)*Math.sin((f*m-h)*(2*Math.PI)/C)+_+v)},ElasticEaseInOut:function(f,v,_,m,S,C){var h=0;return f===0?v:(f/=m/2)===2?v+_:(C||(C=m*(.3*1.5)),!S||S<Math.abs(_)?(S=_,h=C/4):h=C/(2*Math.PI)*Math.asin(_/S),f<1?-.5*(S*Math.pow(2,10*(f-=1))*Math.sin((f*m-h)*(2*Math.PI)/C))+v:S*Math.pow(2,-10*(f-=1))*Math.sin((f*m-h)*(2*Math.PI)/C)*.5+_+v)},BounceEaseOut:function(f,v,_,m){return(f/=m)<1/2.75?_*(7.5625*f*f)+v:f<2/2.75?_*(7.5625*(f-=1.5/2.75)*f+.75)+v:f<2.5/2.75?_*(7.5625*(f-=2.25/2.75)*f+.9375)+v:_*(7.5625*(f-=2.625/2.75)*f+.984375)+v},BounceEaseIn:function(f,v,_,m){return _-t.Easings.BounceEaseOut(m-f,0,_,m)+v},BounceEaseInOut:function(f,v,_,m){return f<m/2?t.Easings.BounceEaseIn(f*2,0,_,m)*.5+v:t.Easings.BounceEaseOut(f*2-m,0,_,m)*.5+_*.5+v},EaseIn:function(f,v,_,m){return _*(f/=m)*f+v},EaseOut:function(f,v,_,m){return-_*(f/=m)*(f-2)+v},EaseInOut:function(f,v,_,m){return(f/=m/2)<1?_/2*f*f+v:-_/2*(--f*(f-2)-1)+v},StrongEaseIn:function(f,v,_,m){return _*(f/=m)*f*f*f*f+v},StrongEaseOut:function(f,v,_,m){return _*((f=f/m-1)*f*f*f*f+1)+v},StrongEaseInOut:function(f,v,_,m){return(f/=m/2)<1?_/2*f*f*f*f*f+v:_/2*((f-=2)*f*f*f*f+2)+v},Linear:function(f,v,_,m){return _*f/m+v}}}(sn)),sn}var uo;function Wu(){if(uo)return Tr;uo=1,Object.defineProperty(Tr,"__esModule",{value:!0});var t=vt(),e=yt(),n=Tt(),a=Ge(),l=Vu(),u=Bu(),p=Hu(),c=Wn(),s=mi(),i=Mt(),r=jn(),o=qu(),g=il(),f=br();return Tr.Konva=e.Util._assign(t.Konva,{Collection:e.Collection,Util:e.Util,Transform:e.Transform,Node:n.Node,ids:n.ids,names:n.names,Container:a.Container,Stage:l.Stage,stages:l.stages,Layer:u.Layer,FastLayer:p.FastLayer,Group:c.Group,DD:s.DD,Shape:i.Shape,shapes:i.shapes,Animation:r.Animation,Tween:o.Tween,Easings:o.Easings,Context:g.Context,Canvas:f.Canvas}),Tr}var He={},co;function ju(){if(co)return He;co=1;var t=He.__extends||function(){var s=function(i,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,g){o.__proto__=g}||function(o,g){for(var f in g)g.hasOwnProperty(f)&&(o[f]=g[f])},s(i,r)};return function(i,r){s(i,r);function o(){this.constructor=i}i.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(He,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=vt(),u=_t(),p=vt(),c=function(s){t(i,s);function i(){return s!==null&&s.apply(this,arguments)||this}return i.prototype._sceneFunc=function(r){var o=l.Konva.getAngle(this.angle()),g=this.clockwise();r.beginPath(),r.arc(0,0,this.outerRadius(),0,o,g),r.arc(0,0,this.innerRadius(),o,0,!g),r.closePath(),r.fillStrokeShape(this)},i.prototype.getWidth=function(){return this.outerRadius()*2},i.prototype.getHeight=function(){return this.outerRadius()*2},i.prototype.setWidth=function(r){this.outerRadius(r/2)},i.prototype.setHeight=function(r){this.outerRadius(r/2)},i}(a.Shape);return He.Arc=c,c.prototype._centroid=!0,c.prototype.className="Arc",c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],p._registerNode(c),n.Factory.addGetterSetter(c,"innerRadius",0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"outerRadius",0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"angle",0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"clockwise",!1,u.getBooleanValidator()),e.Collection.mapMethods(c),He}var qe={},xe={},fo;function ol(){if(fo)return xe;fo=1;var t=xe.__extends||function(){var s=function(i,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,g){o.__proto__=g}||function(o,g){for(var f in g)g.hasOwnProperty(f)&&(o[f]=g[f])},s(i,r)};return function(i,r){s(i,r);function o(){this.constructor=i}i.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),e=xe.__spreadArrays||function(){for(var s=0,i=0,r=arguments.length;i<r;i++)s+=arguments[i].length;for(var o=Array(s),g=0,i=0;i<r;i++)for(var f=arguments[i],v=0,_=f.length;v<_;v++,g++)o[g]=f[v];return o};Object.defineProperty(xe,"__esModule",{value:!0});var n=yt(),a=gt(),l=Mt(),u=_t(),p=vt(),c=function(s){t(i,s);function i(r){var o=s.call(this,r)||this;return o.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")}),o}return i.prototype._sceneFunc=function(r){var o=this.points(),g=o.length,f=this.tension(),v=this.closed(),_=this.bezier(),m,S,C;if(g){if(r.beginPath(),r.moveTo(o[0],o[1]),f!==0&&g>4){for(m=this.getTensionPoints(),S=m.length,C=v?0:4,v||r.quadraticCurveTo(m[0],m[1],m[2],m[3]);C<S-2;)r.bezierCurveTo(m[C++],m[C++],m[C++],m[C++],m[C++],m[C++]);v||r.quadraticCurveTo(m[S-2],m[S-1],o[g-2],o[g-1])}else if(_)for(C=2;C<g;)r.bezierCurveTo(o[C++],o[C++],o[C++],o[C++],o[C++],o[C++]);else for(C=2;C<g;C+=2)r.lineTo(o[C],o[C+1]);v?(r.closePath(),r.fillStrokeShape(this)):r.strokeShape(this)}},i.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},i.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():n.Util._expandPoints(this.points(),this.tension())},i.prototype._getTensionPointsClosed=function(){var r=this.points(),o=r.length,g=this.tension(),f=n.Util._getControlPoints(r[o-2],r[o-1],r[0],r[1],r[2],r[3],g),v=n.Util._getControlPoints(r[o-4],r[o-3],r[o-2],r[o-1],r[0],r[1],g),_=n.Util._expandPoints(r,g),m=[f[2],f[3]].concat(_).concat([v[0],v[1],r[o-2],r[o-1],v[2],v[3],f[0],f[1],r[0],r[1]]);return m},i.prototype.getWidth=function(){return this.getSelfRect().width},i.prototype.getHeight=function(){return this.getSelfRect().height},i.prototype.getSelfRect=function(){var r=this.points();if(r.length<4)return{x:r[0]||0,y:r[1]||0,width:0,height:0};this.tension()!==0?r=e([r[0],r[1]],this._getTensionPoints(),[r[r.length-2],r[r.length-1]]):r=this.points();for(var o=r[0],g=r[0],f=r[1],v=r[1],_,m,S=0;S<r.length/2;S++)_=r[S*2],m=r[S*2+1],o=Math.min(o,_),g=Math.max(g,_),f=Math.min(f,m),v=Math.max(v,m);return{x:o,y:f,width:g-o,height:v-f}},i}(l.Shape);return xe.Line=c,c.prototype.className="Line",c.prototype._attrsAffectingSize=["points","bezier","tension"],p._registerNode(c),a.Factory.addGetterSetter(c,"closed",!1),a.Factory.addGetterSetter(c,"bezier",!1),a.Factory.addGetterSetter(c,"tension",0,u.getNumberValidator()),a.Factory.addGetterSetter(c,"points",[],u.getNumberArrayValidator()),n.Collection.mapMethods(c),xe}var po;function Ku(){if(po)return qe;po=1;var t=qe.__extends||function(){var c=function(s,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var g in o)o.hasOwnProperty(g)&&(r[g]=o[g])},c(s,i)};return function(s,i){c(s,i);function r(){this.constructor=s}s.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(qe,"__esModule",{value:!0});var e=yt(),n=gt(),a=ol(),l=_t(),u=vt(),p=function(c){t(s,c);function s(){return c!==null&&c.apply(this,arguments)||this}return s.prototype._sceneFunc=function(i){c.prototype._sceneFunc.call(this,i);var r=Math.PI*2,o=this.points(),g=o,f=this.tension()!==0&&o.length>4;f&&(g=this.getTensionPoints());var v=o.length,_,m;f?(_=o[v-2]-(g[g.length-2]+g[g.length-4])/2,m=o[v-1]-(g[g.length-1]+g[g.length-3])/2):(_=o[v-2]-o[v-4],m=o[v-1]-o[v-3]);var S=(Math.atan2(m,_)+r)%r,C=this.pointerLength(),h=this.pointerWidth();i.save(),i.beginPath(),i.translate(o[v-2],o[v-1]),i.rotate(S),i.moveTo(0,0),i.lineTo(-C,h/2),i.lineTo(-C,-h/2),i.closePath(),i.restore(),this.pointerAtBeginning()&&(i.save(),i.translate(o[0],o[1]),f?(_=(g[0]+g[2])/2-o[0],m=(g[1]+g[3])/2-o[1]):(_=o[2]-o[0],m=o[3]-o[1]),i.rotate((Math.atan2(-m,-_)+r)%r),i.moveTo(0,0),i.lineTo(-C,h/2),i.lineTo(-C,-h/2),i.closePath(),i.restore());var d=this.dashEnabled();d&&(this.attrs.dashEnabled=!1,i.setLineDash([])),i.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)},s.prototype.getSelfRect=function(){var i=c.prototype.getSelfRect.call(this),r=this.pointerWidth()/2;return{x:i.x-r,y:i.y-r,width:i.width+r*2,height:i.height+r*2}},s}(a.Line);return qe.Arrow=p,p.prototype.className="Arrow",u._registerNode(p),n.Factory.addGetterSetter(p,"pointerLength",10,l.getNumberValidator()),n.Factory.addGetterSetter(p,"pointerWidth",10,l.getNumberValidator()),n.Factory.addGetterSetter(p,"pointerAtBeginning",!1),e.Collection.mapMethods(p),qe}var We={},go;function Yu(){if(go)return We;go=1;var t=We.__extends||function(){var c=function(s,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var g in o)o.hasOwnProperty(g)&&(r[g]=o[g])},c(s,i)};return function(s,i){c(s,i);function r(){this.constructor=s}s.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(We,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=_t(),u=vt(),p=function(c){t(s,c);function s(){return c!==null&&c.apply(this,arguments)||this}return s.prototype._sceneFunc=function(i){i.beginPath(),i.arc(0,0,this.radius(),0,Math.PI*2,!1),i.closePath(),i.fillStrokeShape(this)},s.prototype.getWidth=function(){return this.radius()*2},s.prototype.getHeight=function(){return this.radius()*2},s.prototype.setWidth=function(i){this.radius()!==i/2&&this.radius(i/2)},s.prototype.setHeight=function(i){this.radius()!==i/2&&this.radius(i/2)},s}(a.Shape);return We.Circle=p,p.prototype._centroid=!0,p.prototype.className="Circle",p.prototype._attrsAffectingSize=["radius"],u._registerNode(p),n.Factory.addGetterSetter(p,"radius",0,l.getNumberValidator()),e.Collection.mapMethods(p),We}var je={},vo;function Xu(){if(vo)return je;vo=1;var t=je.__extends||function(){var c=function(s,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var g in o)o.hasOwnProperty(g)&&(r[g]=o[g])},c(s,i)};return function(s,i){c(s,i);function r(){this.constructor=s}s.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(je,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=_t(),u=vt(),p=function(c){t(s,c);function s(){return c!==null&&c.apply(this,arguments)||this}return s.prototype._sceneFunc=function(i){var r=this.radiusX(),o=this.radiusY();i.beginPath(),i.save(),r!==o&&i.scale(1,o/r),i.arc(0,0,r,0,Math.PI*2,!1),i.restore(),i.closePath(),i.fillStrokeShape(this)},s.prototype.getWidth=function(){return this.radiusX()*2},s.prototype.getHeight=function(){return this.radiusY()*2},s.prototype.setWidth=function(i){this.radiusX(i/2)},s.prototype.setHeight=function(i){this.radiusY(i/2)},s}(a.Shape);return je.Ellipse=p,p.prototype.className="Ellipse",p.prototype._centroid=!0,p.prototype._attrsAffectingSize=["radiusX","radiusY"],u._registerNode(p),n.Factory.addComponentsGetterSetter(p,"radius",["x","y"]),n.Factory.addGetterSetter(p,"radiusX",0,l.getNumberValidator()),n.Factory.addGetterSetter(p,"radiusY",0,l.getNumberValidator()),e.Collection.mapMethods(p),je}var Ke={},_o;function $u(){if(_o)return Ke;_o=1;var t=Ke.__extends||function(){var c=function(s,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var g in o)o.hasOwnProperty(g)&&(r[g]=o[g])},c(s,i)};return function(s,i){c(s,i);function r(){this.constructor=s}s.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(Ke,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=_t(),u=vt(),p=function(c){t(s,c);function s(){return c!==null&&c.apply(this,arguments)||this}return s.prototype._useBufferCanvas=function(){return!!((this.hasShadow()||this.getAbsoluteOpacity()!==1)&&this.hasStroke()&&this.getStage())},s.prototype._sceneFunc=function(i){var r=this.width(),o=this.height(),g=this.image(),f,v,_;g&&(f=this.cropWidth(),v=this.cropHeight(),f&&v?_=[g,this.cropX(),this.cropY(),f,v,0,0,r,o]:_=[g,0,0,r,o]),(this.hasFill()||this.hasStroke())&&(i.beginPath(),i.rect(0,0,r,o),i.closePath(),i.fillStrokeShape(this)),g&&i.drawImage.apply(i,_)},s.prototype._hitFunc=function(i){var r=this.width(),o=this.height();i.beginPath(),i.rect(0,0,r,o),i.closePath(),i.fillStrokeShape(this)},s.prototype.getWidth=function(){var i,r=this.image();return(i=this.attrs.width)!==null&&i!==void 0?i:r?r.width:0},s.prototype.getHeight=function(){var i,r=this.image();return(i=this.attrs.height)!==null&&i!==void 0?i:r?r.height:0},s.fromURL=function(i,r){var o=e.Util.createImageElement();o.onload=function(){var g=new s({image:o});r(g)},o.crossOrigin="Anonymous",o.src=i},s}(a.Shape);return Ke.Image=p,p.prototype.className="Image",u._registerNode(p),n.Factory.addGetterSetter(p,"image"),n.Factory.addComponentsGetterSetter(p,"crop",["x","y","width","height"]),n.Factory.addGetterSetter(p,"cropX",0,l.getNumberValidator()),n.Factory.addGetterSetter(p,"cropY",0,l.getNumberValidator()),n.Factory.addGetterSetter(p,"cropWidth",0,l.getNumberValidator()),n.Factory.addGetterSetter(p,"cropHeight",0,l.getNumberValidator()),e.Collection.mapMethods(p),Ke}var Pe={},yo;function Ju(){if(yo)return Pe;yo=1;var t=Pe.__extends||function(){var S=function(C,h){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,y){d.__proto__=y}||function(d,y){for(var x in y)y.hasOwnProperty(x)&&(d[x]=y[x])},S(C,h)};return function(C,h){S(C,h);function d(){this.constructor=C}C.prototype=h===null?Object.create(h):(d.prototype=h.prototype,new d)}}();Object.defineProperty(Pe,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=Wn(),u=_t(),p=vt(),c=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width"],s="Change.konva",i="none",r="up",o="right",g="down",f="left",v=c.length,_=function(S){t(C,S);function C(h){var d=S.call(this,h)||this;return d.on("add.konva",function(y){this._addListeners(y.child),this._sync()}),d}return C.prototype.getText=function(){return this.find("Text")[0]},C.prototype.getTag=function(){return this.find("Tag")[0]},C.prototype._addListeners=function(h){var d=this,y,x=function(){d._sync()};for(y=0;y<v;y++)h.on(c[y]+s,x)},C.prototype.getWidth=function(){return this.getText().width()},C.prototype.getHeight=function(){return this.getText().height()},C.prototype._sync=function(){var h=this.getText(),d=this.getTag(),y,x,A,E,F,M,T;if(h&&d){switch(y=h.width(),x=h.height(),A=d.pointerDirection(),E=d.pointerWidth(),T=d.pointerHeight(),F=0,M=0,A){case r:F=y/2,M=-1*T;break;case o:F=y+E,M=x/2;break;case g:F=y/2,M=x+T;break;case f:F=-1*E,M=x/2;break}d.setAttrs({x:-1*F,y:-1*M,width:y,height:x}),h.setAttrs({x:-1*F,y:-1*M})}},C}(l.Group);Pe.Label=_,_.prototype.className="Label",p._registerNode(_),e.Collection.mapMethods(_);var m=function(S){t(C,S);function C(){return S!==null&&S.apply(this,arguments)||this}return C.prototype._sceneFunc=function(h){var d=this.width(),y=this.height(),x=this.pointerDirection(),A=this.pointerWidth(),E=this.pointerHeight(),F=Math.min(this.cornerRadius(),d/2,y/2);h.beginPath(),F?h.moveTo(F,0):h.moveTo(0,0),x===r&&(h.lineTo((d-A)/2,0),h.lineTo(d/2,-1*E),h.lineTo((d+A)/2,0)),F?(h.lineTo(d-F,0),h.arc(d-F,F,F,Math.PI*3/2,0,!1)):h.lineTo(d,0),x===o&&(h.lineTo(d,(y-E)/2),h.lineTo(d+A,y/2),h.lineTo(d,(y+E)/2)),F?(h.lineTo(d,y-F),h.arc(d-F,y-F,F,0,Math.PI/2,!1)):h.lineTo(d,y),x===g&&(h.lineTo((d+A)/2,y),h.lineTo(d/2,y+E),h.lineTo((d-A)/2,y)),F?(h.lineTo(F,y),h.arc(F,y-F,F,Math.PI/2,Math.PI,!1)):h.lineTo(0,y),x===f&&(h.lineTo(0,(y+E)/2),h.lineTo(-1*A,y/2),h.lineTo(0,(y-E)/2)),F&&(h.lineTo(0,F),h.arc(F,F,F,Math.PI,Math.PI*3/2,!1)),h.closePath(),h.fillStrokeShape(this)},C.prototype.getSelfRect=function(){var h=0,d=0,y=this.pointerWidth(),x=this.pointerHeight(),A=this.pointerDirection(),E=this.width(),F=this.height();return A===r?(d-=x,F+=x):A===g?F+=x:A===f?(h-=y*1.5,E+=y):A===o&&(E+=y*1.5),{x:h,y:d,width:E,height:F}},C}(a.Shape);return Pe.Tag=m,m.prototype.className="Tag",p._registerNode(m),n.Factory.addGetterSetter(m,"pointerDirection",i),n.Factory.addGetterSetter(m,"pointerWidth",0,u.getNumberValidator()),n.Factory.addGetterSetter(m,"pointerHeight",0,u.getNumberValidator()),n.Factory.addGetterSetter(m,"cornerRadius",0,u.getNumberValidator()),e.Collection.mapMethods(m),Pe}var Ye={},mo;function sl(){if(mo)return Ye;mo=1;var t=Ye.__extends||function(){var p=function(c,s){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])},p(c,s)};return function(c,s){p(c,s);function i(){this.constructor=c}c.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(Ye,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=vt(),u=function(p){t(c,p);function c(s){var i=p.call(this,s)||this;i.dataArray=[],i.pathLength=0,i.dataArray=c.parsePathData(i.data()),i.pathLength=0;for(var r=0;r<i.dataArray.length;++r)i.pathLength+=i.dataArray[r].pathLength;return i.on("dataChange.konva",function(){this.dataArray=c.parsePathData(this.data()),this.pathLength=0;for(var o=0;o<this.dataArray.length;++o)this.pathLength+=this.dataArray[o].pathLength}),i}return c.prototype._sceneFunc=function(s){var i=this.dataArray;s.beginPath();for(var r=!1,o=0;o<i.length;o++){var g=i[o].command,f=i[o].points;switch(g){case"L":s.lineTo(f[0],f[1]);break;case"M":s.moveTo(f[0],f[1]);break;case"C":s.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":s.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":var v=f[0],_=f[1],m=f[2],S=f[3],C=f[4],h=f[5],d=f[6],y=f[7],x=m>S?m:S,A=m>S?1:m/S,E=m>S?S/m:1;s.translate(v,_),s.rotate(d),s.scale(A,E),s.arc(0,0,x,C,C+h,1-y),s.scale(1/A,1/E),s.rotate(-d),s.translate(-v,-_);break;case"z":r=!0,s.closePath();break}}!r&&!this.hasFill()?s.strokeShape(this):s.fillStrokeShape(this)},c.prototype.getSelfRect=function(){var s=[];this.dataArray.forEach(function(m){if(m.command==="A"){var S=m.points[4],C=m.points[5],h=m.points[4]+C,d=Math.PI/180;if(Math.abs(S-h)<d&&(d=Math.abs(S-h)),C<0)for(var y=S-d;y>h;y-=d){var x=c.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],y,0);s.push(x.x,x.y)}else for(var y=S+d;y<h;y+=d){var x=c.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],y,0);s.push(x.x,x.y)}}else if(m.command==="C")for(var y=0;y<=1;y+=.01){var x=c.getPointOnCubicBezier(y,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3],m.points[4],m.points[5]);s.push(x.x,x.y)}else s=s.concat(m.points)});for(var i=s[0],r=s[0],o=s[1],g=s[1],f,v,_=0;_<s.length/2;_++)f=s[_*2],v=s[_*2+1],isNaN(f)||(i=Math.min(i,f),r=Math.max(r,f)),isNaN(v)||(o=Math.min(o,v),g=Math.max(g,v));return{x:Math.round(i),y:Math.round(o),width:Math.round(r-i),height:Math.round(g-o)}},c.prototype.getLength=function(){return this.pathLength},c.prototype.getPointAtLength=function(s){var i,r=0,o=this.dataArray.length;if(!o)return null;for(;r<o&&s>this.dataArray[r].pathLength;)s-=this.dataArray[r].pathLength,++r;if(r===o)return i=this.dataArray[r-1].points.slice(-2),{x:i[0],y:i[1]};if(s<.01)return i=this.dataArray[r].points.slice(0,2),{x:i[0],y:i[1]};var g=this.dataArray[r],f=g.points;switch(g.command){case"L":return c.getPointOnLine(s,g.start.x,g.start.y,f[0],f[1]);case"C":return c.getPointOnCubicBezier(s/g.pathLength,g.start.x,g.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return c.getPointOnQuadraticBezier(s/g.pathLength,g.start.x,g.start.y,f[0],f[1],f[2],f[3]);case"A":var v=f[0],_=f[1],m=f[2],S=f[3],C=f[4],h=f[5],d=f[6];return C+=h*s/g.pathLength,c.getPointOnEllipticalArc(v,_,m,S,C,d)}return null},c.getLineLength=function(s,i,r,o){return Math.sqrt((r-s)*(r-s)+(o-i)*(o-i))},c.getPointOnLine=function(s,i,r,o,g,f,v){f===void 0&&(f=i),v===void 0&&(v=r);var _=(g-r)/(o-i+1e-8),m=Math.sqrt(s*s/(1+_*_));o<i&&(m*=-1);var S=_*m,C;if(o===i)C={x:f,y:v+S};else if((v-r)/(f-i+1e-8)===_)C={x:f+m,y:v+S};else{var h,d,y=this.getLineLength(i,r,o,g);if(y<1e-8)return;var x=(f-i)*(o-i)+(v-r)*(g-r);x=x/(y*y),h=i+x*(o-i),d=r+x*(g-r);var A=this.getLineLength(f,v,h,d),E=Math.sqrt(s*s-A*A);m=Math.sqrt(E*E/(1+_*_)),o<i&&(m*=-1),S=_*m,C={x:h+m,y:d+S}}return C},c.getPointOnCubicBezier=function(s,i,r,o,g,f,v,_,m){function S(A){return A*A*A}function C(A){return 3*A*A*(1-A)}function h(A){return 3*A*(1-A)*(1-A)}function d(A){return(1-A)*(1-A)*(1-A)}var y=_*S(s)+f*C(s)+o*h(s)+i*d(s),x=m*S(s)+v*C(s)+g*h(s)+r*d(s);return{x:y,y:x}},c.getPointOnQuadraticBezier=function(s,i,r,o,g,f,v){function _(d){return d*d}function m(d){return 2*d*(1-d)}function S(d){return(1-d)*(1-d)}var C=f*_(s)+o*m(s)+i*S(s),h=v*_(s)+g*m(s)+r*S(s);return{x:C,y:h}},c.getPointOnEllipticalArc=function(s,i,r,o,g,f){var v=Math.cos(f),_=Math.sin(f),m={x:r*Math.cos(g),y:o*Math.sin(g)};return{x:s+(m.x*v-m.y*_),y:i+(m.x*_+m.y*v)}},c.parsePathData=function(s){if(!s)return[];var i=s,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(var o=0;o<r.length;o++)i=i.replace(new RegExp(r[o],"g"),"|"+r[o]);var g=i.split("|"),f=[],v=[],_=0,m=0,S=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,C;for(o=1;o<g.length;o++){var h=g[o],d=h.charAt(0);for(h=h.slice(1),v.length=0;C=S.exec(h);)v.push(C[0]);for(var y=[],x=0,A=v.length;x<A;x++){var E=parseFloat(v[x]);isNaN(E)?y.push(0):y.push(E)}for(;y.length>0&&!isNaN(y[0]);){var F=null,M=[],T=_,D=m,I,O,b,w,P,R,L,V,z,H;switch(d){case"l":_+=y.shift(),m+=y.shift(),F="L",M.push(_,m);break;case"L":_=y.shift(),m=y.shift(),M.push(_,m);break;case"m":var q=y.shift(),it=y.shift();if(_+=q,m+=it,F="M",f.length>2&&f[f.length-1].command==="z"){for(var ht=f.length-2;ht>=0;ht--)if(f[ht].command==="M"){_=f[ht].points[0]+q,m=f[ht].points[1]+it;break}}M.push(_,m),d="l";break;case"M":_=y.shift(),m=y.shift(),F="M",M.push(_,m),d="L";break;case"h":_+=y.shift(),F="L",M.push(_,m);break;case"H":_=y.shift(),F="L",M.push(_,m);break;case"v":m+=y.shift(),F="L",M.push(_,m);break;case"V":m=y.shift(),F="L",M.push(_,m);break;case"C":M.push(y.shift(),y.shift(),y.shift(),y.shift()),_=y.shift(),m=y.shift(),M.push(_,m);break;case"c":M.push(_+y.shift(),m+y.shift(),_+y.shift(),m+y.shift()),_+=y.shift(),m+=y.shift(),F="C",M.push(_,m);break;case"S":O=_,b=m,I=f[f.length-1],I.command==="C"&&(O=_+(_-I.points[2]),b=m+(m-I.points[3])),M.push(O,b,y.shift(),y.shift()),_=y.shift(),m=y.shift(),F="C",M.push(_,m);break;case"s":O=_,b=m,I=f[f.length-1],I.command==="C"&&(O=_+(_-I.points[2]),b=m+(m-I.points[3])),M.push(O,b,_+y.shift(),m+y.shift()),_+=y.shift(),m+=y.shift(),F="C",M.push(_,m);break;case"Q":M.push(y.shift(),y.shift()),_=y.shift(),m=y.shift(),M.push(_,m);break;case"q":M.push(_+y.shift(),m+y.shift()),_+=y.shift(),m+=y.shift(),F="Q",M.push(_,m);break;case"T":O=_,b=m,I=f[f.length-1],I.command==="Q"&&(O=_+(_-I.points[0]),b=m+(m-I.points[1])),_=y.shift(),m=y.shift(),F="Q",M.push(O,b,_,m);break;case"t":O=_,b=m,I=f[f.length-1],I.command==="Q"&&(O=_+(_-I.points[0]),b=m+(m-I.points[1])),_+=y.shift(),m+=y.shift(),F="Q",M.push(O,b,_,m);break;case"A":w=y.shift(),P=y.shift(),R=y.shift(),L=y.shift(),V=y.shift(),z=_,H=m,_=y.shift(),m=y.shift(),F="A",M=this.convertEndpointToCenterParameterization(z,H,_,m,L,V,w,P,R);break;case"a":w=y.shift(),P=y.shift(),R=y.shift(),L=y.shift(),V=y.shift(),z=_,H=m,_+=y.shift(),m+=y.shift(),F="A",M=this.convertEndpointToCenterParameterization(z,H,_,m,L,V,w,P,R);break}f.push({command:F||d,points:M,start:{x:T,y:D},pathLength:this.calcLength(T,D,F||d,M)})}(d==="z"||d==="Z")&&f.push({command:"z",points:[],start:void 0,pathLength:0})}return f},c.calcLength=function(s,i,r,o){var g,f,v,_,m=c;switch(r){case"L":return m.getLineLength(s,i,o[0],o[1]);case"C":for(g=0,f=m.getPointOnCubicBezier(0,s,i,o[0],o[1],o[2],o[3],o[4],o[5]),_=.01;_<=1;_+=.01)v=m.getPointOnCubicBezier(_,s,i,o[0],o[1],o[2],o[3],o[4],o[5]),g+=m.getLineLength(f.x,f.y,v.x,v.y),f=v;return g;case"Q":for(g=0,f=m.getPointOnQuadraticBezier(0,s,i,o[0],o[1],o[2],o[3]),_=.01;_<=1;_+=.01)v=m.getPointOnQuadraticBezier(_,s,i,o[0],o[1],o[2],o[3]),g+=m.getLineLength(f.x,f.y,v.x,v.y),f=v;return g;case"A":g=0;var S=o[4],C=o[5],h=o[4]+C,d=Math.PI/180;if(Math.abs(S-h)<d&&(d=Math.abs(S-h)),f=m.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],S,0),C<0)for(_=S-d;_>h;_-=d)v=m.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],_,0),g+=m.getLineLength(f.x,f.y,v.x,v.y),f=v;else for(_=S+d;_<h;_+=d)v=m.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],_,0),g+=m.getLineLength(f.x,f.y,v.x,v.y),f=v;return v=m.getPointOnEllipticalArc(o[0],o[1],o[2],o[3],h,0),g+=m.getLineLength(f.x,f.y,v.x,v.y),g}return 0},c.convertEndpointToCenterParameterization=function(s,i,r,o,g,f,v,_,m){var S=m*(Math.PI/180),C=Math.cos(S)*(s-r)/2+Math.sin(S)*(i-o)/2,h=-1*Math.sin(S)*(s-r)/2+Math.cos(S)*(i-o)/2,d=C*C/(v*v)+h*h/(_*_);d>1&&(v*=Math.sqrt(d),_*=Math.sqrt(d));var y=Math.sqrt((v*v*(_*_)-v*v*(h*h)-_*_*(C*C))/(v*v*(h*h)+_*_*(C*C)));g===f&&(y*=-1),isNaN(y)&&(y=0);var x=y*v*h/_,A=y*-_*C/v,E=(s+r)/2+Math.cos(S)*x-Math.sin(S)*A,F=(i+o)/2+Math.sin(S)*x+Math.cos(S)*A,M=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},T=function(P,R){return(P[0]*R[0]+P[1]*R[1])/(M(P)*M(R))},D=function(P,R){return(P[0]*R[1]<P[1]*R[0]?-1:1)*Math.acos(T(P,R))},I=D([1,0],[(C-x)/v,(h-A)/_]),O=[(C-x)/v,(h-A)/_],b=[(-1*C-x)/v,(-1*h-A)/_],w=D(O,b);return T(O,b)<=-1&&(w=Math.PI),T(O,b)>=1&&(w=0),f===0&&w>0&&(w=w-2*Math.PI),f===1&&w<0&&(w=w+2*Math.PI),[E,F,v,_,I,w,S,f]},c}(a.Shape);return Ye.Path=u,u.prototype.className="Path",u.prototype._attrsAffectingSize=["data"],l._registerNode(u),n.Factory.addGetterSetter(u,"data"),e.Collection.mapMethods(u),Ye}var Xe={},bo;function ll(){if(bo)return Xe;bo=1;var t=Xe.__extends||function(){var p=function(c,s){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o])},p(c,s)};return function(c,s){p(c,s);function i(){this.constructor=c}c.prototype=s===null?Object.create(s):(i.prototype=s.prototype,new i)}}();Object.defineProperty(Xe,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=vt(),u=function(p){t(c,p);function c(){return p!==null&&p.apply(this,arguments)||this}return c.prototype._sceneFunc=function(s){var i=this.cornerRadius(),r=this.width(),o=this.height();if(s.beginPath(),!i)s.rect(0,0,r,o);else{var g=0,f=0,v=0,_=0;typeof i=="number"?g=f=v=_=Math.min(i,r/2,o/2):(g=Math.min(i[0],r/2,o/2),f=Math.min(i[1],r/2,o/2),_=Math.min(i[2],r/2,o/2),v=Math.min(i[3],r/2,o/2)),s.moveTo(g,0),s.lineTo(r-f,0),s.arc(r-f,f,f,Math.PI*3/2,0,!1),s.lineTo(r,o-_),s.arc(r-_,o-_,_,0,Math.PI/2,!1),s.lineTo(v,o),s.arc(v,o-v,v,Math.PI/2,Math.PI,!1),s.lineTo(0,g),s.arc(g,g,g,Math.PI,Math.PI*3/2,!1)}s.closePath(),s.fillStrokeShape(this)},c}(a.Shape);return Xe.Rect=u,u.prototype.className="Rect",l._registerNode(u),n.Factory.addGetterSetter(u,"cornerRadius",0),e.Collection.mapMethods(u),Xe}var $e={},So;function Qu(){if(So)return $e;So=1;var t=$e.__extends||function(){var c=function(s,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var g in o)o.hasOwnProperty(g)&&(r[g]=o[g])},c(s,i)};return function(s,i){c(s,i);function r(){this.constructor=s}s.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty($e,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=_t(),u=vt(),p=function(c){t(s,c);function s(){return c!==null&&c.apply(this,arguments)||this}return s.prototype._sceneFunc=function(i){var r=this.sides(),o=this.radius(),g,f,v;for(i.beginPath(),i.moveTo(0,0-o),g=1;g<r;g++)f=o*Math.sin(g*2*Math.PI/r),v=-1*o*Math.cos(g*2*Math.PI/r),i.lineTo(f,v);i.closePath(),i.fillStrokeShape(this)},s.prototype.getWidth=function(){return this.radius()*2},s.prototype.getHeight=function(){return this.radius()*2},s.prototype.setWidth=function(i){this.radius(i/2)},s.prototype.setHeight=function(i){this.radius(i/2)},s}(a.Shape);return $e.RegularPolygon=p,p.prototype.className="RegularPolygon",p.prototype._centroid=!0,p.prototype._attrsAffectingSize=["radius"],u._registerNode(p),n.Factory.addGetterSetter(p,"radius",0,l.getNumberValidator()),n.Factory.addGetterSetter(p,"sides",0,l.getNumberValidator()),e.Collection.mapMethods(p),$e}var Je={},Co;function Zu(){if(Co)return Je;Co=1;var t=Je.__extends||function(){var s=function(i,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,g){o.__proto__=g}||function(o,g){for(var f in g)g.hasOwnProperty(f)&&(o[f]=g[f])},s(i,r)};return function(i,r){s(i,r);function o(){this.constructor=i}i.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(Je,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=_t(),u=vt(),p=Math.PI*2,c=function(s){t(i,s);function i(){return s!==null&&s.apply(this,arguments)||this}return i.prototype._sceneFunc=function(r){r.beginPath(),r.arc(0,0,this.innerRadius(),0,p,!1),r.moveTo(this.outerRadius(),0),r.arc(0,0,this.outerRadius(),p,0,!0),r.closePath(),r.fillStrokeShape(this)},i.prototype.getWidth=function(){return this.outerRadius()*2},i.prototype.getHeight=function(){return this.outerRadius()*2},i.prototype.setWidth=function(r){this.outerRadius(r/2)},i.prototype.setHeight=function(r){this.outerRadius(r/2)},i}(a.Shape);return Je.Ring=c,c.prototype.className="Ring",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["innerRadius","outerRadius"],u._registerNode(c),n.Factory.addGetterSetter(c,"innerRadius",0,l.getNumberValidator()),n.Factory.addGetterSetter(c,"outerRadius",0,l.getNumberValidator()),e.Collection.mapMethods(c),Je}var Qe={},wo;function tc(){if(wo)return Qe;wo=1;var t=Qe.__extends||function(){var s=function(i,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,g){o.__proto__=g}||function(o,g){for(var f in g)g.hasOwnProperty(f)&&(o[f]=g[f])},s(i,r)};return function(i,r){s(i,r);function o(){this.constructor=i}i.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(Qe,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=jn(),u=_t(),p=vt(),c=function(s){t(i,s);function i(r){var o=s.call(this,r)||this;return o._updated=!0,o.anim=new l.Animation(function(){var g=o._updated;return o._updated=!1,g}),o.on("animationChange.konva",function(){this.frameIndex(0)}),o.on("frameIndexChange.konva",function(){this._updated=!0}),o.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),o}return i.prototype._sceneFunc=function(r){var o=this.animation(),g=this.frameIndex(),f=g*4,v=this.animations()[o],_=this.frameOffsets(),m=v[f+0],S=v[f+1],C=v[f+2],h=v[f+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(r.beginPath(),r.rect(0,0,C,h),r.closePath(),r.fillStrokeShape(this)),d)if(_){var y=_[o],x=g*2;r.drawImage(d,m,S,C,h,y[x+0],y[x+1],C,h)}else r.drawImage(d,m,S,C,h,0,0,C,h)},i.prototype._hitFunc=function(r){var o=this.animation(),g=this.frameIndex(),f=g*4,v=this.animations()[o],_=this.frameOffsets(),m=v[f+2],S=v[f+3];if(r.beginPath(),_){var C=_[o],h=g*2;r.rect(C[h+0],C[h+1],m,S)}else r.rect(0,0,m,S);r.closePath(),r.fillShape(this)},i.prototype._useBufferCanvas=function(){return(this.hasShadow()||this.getAbsoluteOpacity()!==1)&&this.hasStroke()},i.prototype._setInterval=function(){var r=this;this.interval=setInterval(function(){r._updateIndex()},1e3/this.frameRate())},i.prototype.start=function(){if(!this.isRunning()){var r=this.getLayer();this.anim.setLayers(r),this._setInterval(),this.anim.start()}},i.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},i.prototype.isRunning=function(){return this.anim.isRunning()},i.prototype._updateIndex=function(){var r=this.frameIndex(),o=this.animation(),g=this.animations(),f=g[o],v=f.length/4;r<v-1?this.frameIndex(r+1):this.frameIndex(0)},i}(a.Shape);return Qe.Sprite=c,c.prototype.className="Sprite",p._registerNode(c),n.Factory.addGetterSetter(c,"animation"),n.Factory.addGetterSetter(c,"animations"),n.Factory.addGetterSetter(c,"frameOffsets"),n.Factory.addGetterSetter(c,"image"),n.Factory.addGetterSetter(c,"frameIndex",0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"frameRate",17,u.getNumberValidator()),n.Factory.backCompat(c,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),e.Collection.mapMethods(c),Qe}var Ze={},xo;function ec(){if(xo)return Ze;xo=1;var t=Ze.__extends||function(){var c=function(s,i){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var g in o)o.hasOwnProperty(g)&&(r[g]=o[g])},c(s,i)};return function(s,i){c(s,i);function r(){this.constructor=s}s.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(Ze,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=_t(),u=vt(),p=function(c){t(s,c);function s(){return c!==null&&c.apply(this,arguments)||this}return s.prototype._sceneFunc=function(i){var r=this.innerRadius(),o=this.outerRadius(),g=this.numPoints();i.beginPath(),i.moveTo(0,0-o);for(var f=1;f<g*2;f++){var v=f%2===0?o:r,_=v*Math.sin(f*Math.PI/g),m=-1*v*Math.cos(f*Math.PI/g);i.lineTo(_,m)}i.closePath(),i.fillStrokeShape(this)},s.prototype.getWidth=function(){return this.outerRadius()*2},s.prototype.getHeight=function(){return this.outerRadius()*2},s.prototype.setWidth=function(i){this.outerRadius(i/2)},s.prototype.setHeight=function(i){this.outerRadius(i/2)},s}(a.Shape);return Ze.Star=p,p.prototype.className="Star",p.prototype._centroid=!0,p.prototype._attrsAffectingSize=["innerRadius","outerRadius"],u._registerNode(p),n.Factory.addGetterSetter(p,"numPoints",5,l.getNumberValidator()),n.Factory.addGetterSetter(p,"innerRadius",0,l.getNumberValidator()),n.Factory.addGetterSetter(p,"outerRadius",0,l.getNumberValidator()),e.Collection.mapMethods(p),Ze}var tr={},Po;function hl(){if(Po)return tr;Po=1;var t=tr.__extends||function(){var L=function(V,z){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,q){H.__proto__=q}||function(H,q){for(var it in q)q.hasOwnProperty(it)&&(H[it]=q[it])},L(V,z)};return function(V,z){L(V,z);function H(){this.constructor=V}V.prototype=z===null?Object.create(z):(H.prototype=z.prototype,new H)}}();Object.defineProperty(tr,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=vt(),u=_t(),p=vt(),c="auto",s="center",i="justify",r="Change.konva",o="2d",g="-",f="left",v="text",_="Text",m="top",S="bottom",C="middle",h="normal",d="px ",y=" ",x="right",A="word",E="char",F="none",M="…",T=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],D=T.length,I;function O(){return I||(I=e.Util.createCanvasElement().getContext(o),I)}function b(L){L.fillText(this._partialText,this._partialTextX,this._partialTextY)}function w(L){L.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function P(L){return L=L||{},!L.fillLinearGradientColorStops&&!L.fillRadialGradientColorStops&&!L.fillPatternImage&&(L.fill=L.fill||"black"),L}var R=function(L){t(V,L);function V(z){var H=L.call(this,P(z))||this;H._partialTextX=0,H._partialTextY=0;for(var q=0;q<D;q++)H.on(T[q]+r,H._setTextData);return H._setTextData(),H}return V.prototype._sceneFunc=function(z){var H=this.padding(),q=this.fontSize(),it=this.lineHeight()*q,ht=this.textArr,ut=ht.length,et=this.verticalAlign(),ot=0,ft=this.align(),st=this.getWidth(),mt=this.letterSpacing(),G=this.fill(),k=this.textDecoration(),U=k.indexOf("underline")!==-1,$=k.indexOf("line-through")!==-1,j,X=0,X=it/2,Q=0,Z=0;for(z.setAttr("font",this._getContextFont()),z.setAttr("textBaseline",C),z.setAttr("textAlign",f),et===C?ot=(this.getHeight()-ut*it-H*2)/2:et===S&&(ot=this.getHeight()-ut*it-H*2),z.translate(H,ot+H),j=0;j<ut;j++){var Q=0,Z=0,J=ht[j],Y=J.text,nt=J.width,rt=j!==ut-1,tt,K,N;if(z.save(),ft===x?Q+=st-nt-H*2:ft===s&&(Q+=(st-nt-H*2)/2),U&&(z.save(),z.beginPath(),z.moveTo(Q,X+Z+Math.round(q/2)),tt=Y.split(" ").length-1,K=tt===0,N=ft===i&&rt&&!K?st-H*2:nt,z.lineTo(Q+Math.round(N),X+Z+Math.round(q/2)),z.lineWidth=q/15,z.strokeStyle=G,z.stroke(),z.restore()),$&&(z.save(),z.beginPath(),z.moveTo(Q,X+Z),tt=Y.split(" ").length-1,K=tt===0,N=ft===i&&rt&&!K?st-H*2:nt,z.lineTo(Q+Math.round(N),X+Z),z.lineWidth=q/15,z.strokeStyle=G,z.stroke(),z.restore()),mt!==0||ft===i){tt=Y.split(" ").length-1;for(var B=0;B<Y.length;B++){var W=Y[B];W===" "&&j!==ut-1&&ft===i&&(Q+=Math.floor((st-H*2-nt)/tt)),this._partialTextX=Q,this._partialTextY=X+Z,this._partialText=W,z.fillStrokeShape(this),Q+=Math.round(this.measureSize(W).width)+mt}}else this._partialTextX=Q,this._partialTextY=X+Z,this._partialText=Y,z.fillStrokeShape(this);z.restore(),ut>1&&(X+=it)}},V.prototype._hitFunc=function(z){var H=this.getWidth(),q=this.getHeight();z.beginPath(),z.rect(0,0,H,q),z.closePath(),z.fillStrokeShape(this)},V.prototype.setText=function(z){var H=e.Util._isString(z)?z:z==null?"":z+"";return this._setAttr(v,H),this},V.prototype.getWidth=function(){var z=this.attrs.width===c||this.attrs.width===void 0;return z?this.getTextWidth()+this.padding()*2:this.attrs.width},V.prototype.getHeight=function(){var z=this.attrs.height===c||this.attrs.height===void 0;return z?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height},V.prototype.getTextWidth=function(){return this.textWidth},V.prototype.getTextHeight=function(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},V.prototype.measureSize=function(z){var H=O(),q=this.fontSize(),it;return H.save(),H.font=this._getContextFont(),it=H.measureText(z),H.restore(),{width:it.width,height:q}},V.prototype._getContextFont=function(){return l.Konva.UA.isIE?this.fontStyle()+y+this.fontSize()+d+this.fontFamily():this.fontStyle()+y+this.fontVariant()+y+this.fontSize()+d+this.fontFamily()},V.prototype._addTextLine=function(z){this.align()===i&&(z=z.trim());var H=this._getTextWidth(z);return this.textArr.push({text:z,width:H})},V.prototype._getTextWidth=function(z){var H=this.letterSpacing(),q=z.length;return O().measureText(z).width+(q?H*(q-1):0)},V.prototype._setTextData=function(){var z=this.text().split(`
`),H=+this.fontSize(),q=0,it=this.lineHeight()*H,ht=this.attrs.width,ut=this.attrs.height,et=ht!==c&&ht!==void 0,ot=ut!==c&&ut!==void 0,ft=this.padding(),st=ht-ft*2,mt=ut-ft*2,G=0,k=this.wrap(),U=k!==F,$=k!==E&&U,j=this.ellipsis()&&!U;this.textArr=[],O().font=this._getContextFont();for(var X=j?this._getTextWidth(M):0,Q=0,Z=z.length;Q<Z;++Q){var J=z[Q],Y=this._getTextWidth(J);if(et&&Y>st)for(;J.length>0;){for(var nt=0,rt=J.length,tt="",K=0;nt<rt;){var N=nt+rt>>>1,B=J.slice(0,N+1),W=this._getTextWidth(B)+X;W<=st?(nt=N+1,tt=B+(j?M:""),K=W):rt=N}if(tt){if($){var at,lt=J[tt.length],ct=lt===y||lt===g;ct&&K<=st?at=tt.length:at=Math.max(tt.lastIndexOf(y),tt.lastIndexOf(g))+1,at>0&&(nt=at,tt=tt.slice(0,nt),K=this._getTextWidth(tt))}if(tt=tt.trimRight(),this._addTextLine(tt),q=Math.max(q,K),G+=it,!U||ot&&G+it>mt)break;if(J=J.slice(nt),J=J.trimLeft(),J.length>0&&(Y=this._getTextWidth(J),Y<=st)){this._addTextLine(J),G+=it,q=Math.max(q,Y);break}}else break}else this._addTextLine(J),G+=it,q=Math.max(q,Y);if(ot&&G+it>mt)break}this.textHeight=H,this.textWidth=q},V.prototype.getStrokeScaleEnabled=function(){return!0},V}(a.Shape);return tr.Text=R,R.prototype._fillFunc=b,R.prototype._strokeFunc=w,R.prototype.className=_,R.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight"],p._registerNode(R),n.Factory.overWriteSetter(R,"width",u.getNumberOrAutoValidator()),n.Factory.overWriteSetter(R,"height",u.getNumberOrAutoValidator()),n.Factory.addGetterSetter(R,"fontFamily","Arial"),n.Factory.addGetterSetter(R,"fontSize",12,u.getNumberValidator()),n.Factory.addGetterSetter(R,"fontStyle",h),n.Factory.addGetterSetter(R,"fontVariant",h),n.Factory.addGetterSetter(R,"padding",0,u.getNumberValidator()),n.Factory.addGetterSetter(R,"align",f),n.Factory.addGetterSetter(R,"verticalAlign",m),n.Factory.addGetterSetter(R,"lineHeight",1,u.getNumberValidator()),n.Factory.addGetterSetter(R,"wrap",A),n.Factory.addGetterSetter(R,"ellipsis",!1),n.Factory.addGetterSetter(R,"letterSpacing",0,u.getNumberValidator()),n.Factory.addGetterSetter(R,"text","",u.getStringValidator()),n.Factory.addGetterSetter(R,"textDecoration",""),e.Collection.mapMethods(R),tr}var er={},To;function rc(){if(To)return er;To=1;var t=er.__extends||function(){var f=function(v,_){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var C in S)S.hasOwnProperty(C)&&(m[C]=S[C])},f(v,_)};return function(v,_){f(v,_);function m(){this.constructor=v}v.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}();Object.defineProperty(er,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=sl(),u=hl(),p=_t(),c=vt(),s="",i="normal";function r(f){f.fillText(this.partialText,0,0)}function o(f){f.strokeText(this.partialText,0,0)}var g=function(f){t(v,f);function v(_){var m=f.call(this,_)||this;return m.dummyCanvas=e.Util.createCanvasElement(),m.dataArray=[],m.dataArray=l.Path.parsePathData(m.attrs.data),m.on("dataChange.konva",function(){this.dataArray=l.Path.parsePathData(this.attrs.data),this._setTextData()}),m.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",m._setTextData),_&&_.getKerning&&(e.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),m.kerningFunc(_.getKerning)),m._setTextData(),m}return v.prototype._sceneFunc=function(_){_.setAttr("font",this._getContextFont()),_.setAttr("textBaseline",this.textBaseline()),_.setAttr("textAlign","left"),_.save();var m=this.textDecoration(),S=this.fill(),C=this.fontSize(),h=this.glyphInfo;m==="underline"&&_.beginPath();for(var d=0;d<h.length;d++){_.save();var y=h[d].p0;_.translate(y.x,y.y),_.rotate(h[d].rotation),this.partialText=h[d].text,_.fillStrokeShape(this),m==="underline"&&(d===0&&_.moveTo(0,C/2+1),_.lineTo(C,C/2+1)),_.restore()}m==="underline"&&(_.strokeStyle=S,_.lineWidth=C/20,_.stroke()),_.restore()},v.prototype._hitFunc=function(_){_.beginPath();var m=this.glyphInfo;if(m.length>=1){var S=m[0].p0;_.moveTo(S.x,S.y)}for(var C=0;C<m.length;C++){var h=m[C].p1;_.lineTo(h.x,h.y)}_.setAttr("lineWidth",this.fontSize()),_.setAttr("strokeStyle",this.colorKey),_.stroke()},v.prototype.getTextWidth=function(){return this.textWidth},v.prototype.getTextHeight=function(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},v.prototype.setText=function(_){return u.Text.prototype.setText.call(this,_)},v.prototype._getContextFont=function(){return u.Text.prototype._getContextFont.call(this)},v.prototype._getTextSize=function(_){var m=this.dummyCanvas,S=m.getContext("2d");S.save(),S.font=this._getContextFont();var C=S.measureText(_);return S.restore(),{width:C.width,height:parseInt(this.attrs.fontSize,10)}},v.prototype._setTextData=function(){var _=this,m=this._getTextSize(this.attrs.text),S=this.letterSpacing(),C=this.align(),h=this.kerningFunc();this.textWidth=m.width,this.textHeight=m.height;var d=Math.max(this.textWidth+((this.attrs.text||"").length-1)*S,0);this.glyphInfo=[];for(var y=0,x=0;x<_.dataArray.length;x++)_.dataArray[x].pathLength>0&&(y+=_.dataArray[x].pathLength);var A=0;C==="center"&&(A=Math.max(0,y/2-d/2)),C==="right"&&(A=Math.max(0,y-d));for(var E=this.text().split(""),F=this.text().split(" ").length-1,M,T,D,I=-1,O=0,b=function(){O=0;for(var ut=_.dataArray,et=I+1;et<ut.length;et++){if(ut[et].pathLength>0)return I=et,ut[et];ut[et].command==="M"&&(M={x:ut[et].points[0],y:ut[et].points[1]})}return{}},w=function(ut){var et=_._getTextSize(ut).width+S;ut===" "&&C==="justify"&&(et+=(y-d)/F);var ot=0,ft=0;for(T=void 0;Math.abs(et-ot)/et>.01&&ft<25;){ft++;for(var st=ot;D===void 0;)D=b(),D&&st+D.pathLength<et&&(st+=D.pathLength,D=void 0);if(D==={}||M===void 0)return;var mt=!1;switch(D.command){case"L":l.Path.getLineLength(M.x,M.y,D.points[0],D.points[1])>et?T=l.Path.getPointOnLine(et,M.x,M.y,D.points[0],D.points[1],M.x,M.y):D=void 0;break;case"A":var G=D.points[4],k=D.points[5],U=D.points[4]+k;O===0?O=G+1e-8:et>ot?O+=Math.PI/180*k/Math.abs(k):O-=Math.PI/360*k/Math.abs(k),(k<0&&O<U||k>=0&&O>U)&&(O=U,mt=!0),T=l.Path.getPointOnEllipticalArc(D.points[0],D.points[1],D.points[2],D.points[3],O,D.points[6]);break;case"C":O===0?et>D.pathLength?O=1e-8:O=et/D.pathLength:et>ot?O+=(et-ot)/D.pathLength:O-=(ot-et)/D.pathLength,O>1&&(O=1,mt=!0),T=l.Path.getPointOnCubicBezier(O,D.start.x,D.start.y,D.points[0],D.points[1],D.points[2],D.points[3],D.points[4],D.points[5]);break;case"Q":O===0?O=et/D.pathLength:et>ot?O+=(et-ot)/D.pathLength:O-=(ot-et)/D.pathLength,O>1&&(O=1,mt=!0),T=l.Path.getPointOnQuadraticBezier(O,D.start.x,D.start.y,D.points[0],D.points[1],D.points[2],D.points[3]);break}T!==void 0&&(ot=l.Path.getLineLength(M.x,M.y,T.x,T.y)),mt&&(mt=!1,D=void 0)}},P="C",R=_._getTextSize(P).width+S,L=A/R-1,V=0;V<L&&(w(P),!(M===void 0||T===void 0));V++)M=T;for(var z=0;z<E.length&&(w(E[z]),!(M===void 0||T===void 0));z++){var H=l.Path.getLineLength(M.x,M.y,T.x,T.y),q=0;if(h)try{q=h(E[z-1],E[z])*this.fontSize()}catch{q=0}M.x+=q,T.x+=q,this.textWidth+=q;var it=l.Path.getPointOnLine(q+H/2,M.x,M.y,T.x,T.y),ht=Math.atan2(T.y-M.y,T.x-M.x);this.glyphInfo.push({transposeX:it.x,transposeY:it.y,text:E[z],rotation:ht,p0:M,p1:T}),M=T}},v.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var _=[];this.glyphInfo.forEach(function(E){_.push(E.p0.x),_.push(E.p0.y),_.push(E.p1.x),_.push(E.p1.y)});for(var m=_[0]||0,S=_[0]||0,C=_[1]||0,h=_[1]||0,d,y,x=0;x<_.length/2;x++)d=_[x*2],y=_[x*2+1],m=Math.min(m,d),S=Math.max(S,d),C=Math.min(C,y),h=Math.max(h,y);var A=this.fontSize();return{x:m-A/2,y:C-A/2,width:S-m+A,height:h-C+A}},v}(a.Shape);return er.TextPath=g,g.prototype._fillFunc=r,g.prototype._strokeFunc=o,g.prototype._fillFuncHit=r,g.prototype._strokeFuncHit=o,g.prototype.className="TextPath",g.prototype._attrsAffectingSize=["text","fontSize","data"],c._registerNode(g),n.Factory.addGetterSetter(g,"data"),n.Factory.addGetterSetter(g,"fontFamily","Arial"),n.Factory.addGetterSetter(g,"fontSize",12,p.getNumberValidator()),n.Factory.addGetterSetter(g,"fontStyle",i),n.Factory.addGetterSetter(g,"align","left"),n.Factory.addGetterSetter(g,"letterSpacing",0,p.getNumberValidator()),n.Factory.addGetterSetter(g,"textBaseline","middle"),n.Factory.addGetterSetter(g,"fontVariant",i),n.Factory.addGetterSetter(g,"text",s),n.Factory.addGetterSetter(g,"textDecoration",null),n.Factory.addGetterSetter(g,"kerningFunc",null),e.Collection.mapMethods(g),er}var Te={},Ao;function ic(){if(Ao)return Te;Ao=1;var t=Te.__extends||function(){var F=function(M,T){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,I){D.__proto__=I}||function(D,I){for(var O in I)I.hasOwnProperty(O)&&(D[O]=I[O])},F(M,T)};return function(M,T){F(M,T);function D(){this.constructor=M}M.prototype=T===null?Object.create(T):(D.prototype=T.prototype,new D)}}(),e=Te.__assign||function(){return e=Object.assign||function(F){for(var M,T=1,D=arguments.length;T<D;T++){M=arguments[T];for(var I in M)Object.prototype.hasOwnProperty.call(M,I)&&(F[I]=M[I])}return F},e.apply(this,arguments)};Object.defineProperty(Te,"__esModule",{value:!0});var n=yt(),a=gt(),l=Tt(),u=Mt(),p=ll(),c=Wn(),s=vt(),i=_t(),r=vt(),o="tr-konva",g=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(function(F){return F+("."+o)}).join(" "),f="nodesRect",v=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(function(F){return F+("."+o)}).join(" "),_={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},m="ontouchstart"in s.Konva._global;function S(F,M){if(F==="rotater")return"crosshair";M+=n.Util._degToRad(_[F]||0);var T=(n.Util._radToDeg(M)%360+360)%360;return n.Util._inRange(T,315+22.5,360)||n.Util._inRange(T,0,22.5)?"ns-resize":n.Util._inRange(T,45-22.5,45+22.5)?"nesw-resize":n.Util._inRange(T,90-22.5,90+22.5)?"ew-resize":n.Util._inRange(T,135-22.5,135+22.5)?"nwse-resize":n.Util._inRange(T,180-22.5,180+22.5)?"ns-resize":n.Util._inRange(T,225-22.5,225+22.5)?"nesw-resize":n.Util._inRange(T,270-22.5,270+22.5)?"ew-resize":n.Util._inRange(T,315-22.5,315+22.5)?"nwse-resize":(n.Util.error("Transformer has unknown angle for cursor detection: "+T),"pointer")}var C=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function h(F){return{x:F.x+F.width/2*Math.cos(F.rotation)+F.height/2*Math.sin(-F.rotation),y:F.y+F.height/2*Math.cos(F.rotation)+F.width/2*Math.sin(F.rotation)}}function d(F,M,T){var D=T.x+(F.x-T.x)*Math.cos(M)-(F.y-T.y)*Math.sin(M),I=T.y+(F.x-T.x)*Math.sin(M)+(F.y-T.y)*Math.cos(M);return e(e({},F),{rotation:F.rotation+M,x:D,y:I})}function y(F,M){var T=h(F);return d(F,M,T)}function x(F,M,T){for(var D=M,I=0;I<F.length;I++){var O=s.Konva.getAngle(F[I]),b=Math.abs(O-M)%(Math.PI*2),w=Math.min(b,Math.PI*2-b);w<T&&(D=O)}return D}var A=function(F){t(M,F);function M(T){var D=F.call(this,T)||this;return D._transforming=!1,D._createElements(),D._handleMouseMove=D._handleMouseMove.bind(D),D._handleMouseUp=D._handleMouseUp.bind(D),D.update=D.update.bind(D),D.on(g,D.update),D.getNode()&&D.update(),D}return M.prototype.attachTo=function(T){return this.setNode(T),this},M.prototype.setNode=function(T){return n.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([T])},M.prototype.getNode=function(){return this._nodes&&this._nodes[0]},M.prototype.setNodes=function(T){var D=this;T===void 0&&(T=[]),this._nodes&&this._nodes.length&&this.detach(),this._nodes=T,T.length===1?this.rotation(T[0].rotation()):this.rotation(0),this._nodes.forEach(function(O){var b=O._attrsAffectingSize.map(function(P){return P+"Change."+o}).join(" "),w=function(){D._resetTransformCache(),D._transforming||D.update()};O.on(b,w),O.on(v,w),O.on("_clearTransformCache."+o,w),O.on("xChange."+o+" yChange."+o,w),D._proxyDrag(O)}),this._resetTransformCache();var I=!!this.findOne(".top-left");return I&&this.update(),this},M.prototype._proxyDrag=function(T){var D=this,I;T.on("dragstart."+o,function(){I=T.getAbsolutePosition()}),T.on("dragmove."+o,function(){if(I){var O=T.getAbsolutePosition(),b=O.x-I.x,w=O.y-I.y;D.nodes().forEach(function(P){if(P!==T&&!P.isDragging()){var R=P.getAbsolutePosition();P.setAbsolutePosition({x:R.x+b,y:R.y+w}),P.startDrag()}}),I=null}})},M.prototype.getNodes=function(){return this._nodes},M.prototype.getActiveAnchor=function(){return this._movingAnchorName},M.prototype.detach=function(){this._nodes&&this._nodes.forEach(function(T){T.off("."+o)}),this._nodes=[],this._resetTransformCache()},M.prototype._resetTransformCache=function(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},M.prototype._getNodeRect=function(){return this._getCache(f,this.__getNodeRect)},M.prototype.__getNodeShape=function(T,D,I){D===void 0&&(D=this.rotation());var O=T.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),b=T.getAbsoluteScale(I),w=T.getAbsolutePosition(I),P=O.x*b.x-T.offsetX()*b.x,R=O.y*b.y-T.offsetY()*b.y,L=(s.Konva.getAngle(T.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),V={x:w.x+P*Math.cos(L)+R*Math.sin(-L),y:w.y+R*Math.cos(L)+P*Math.sin(L),width:O.width*b.x,height:O.height*b.y,rotation:L};return d(V,-s.Konva.getAngle(D),{x:0,y:0})},M.prototype.__getNodeRect=function(){var T=this,D=this.getNode();if(!D)return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};var I=[];this.nodes().map(function(V){var z=V.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:T.ignoreStroke()}),H=[{x:z.x,y:z.y},{x:z.x+z.width,y:z.y},{x:z.x+z.width,y:z.y+z.height},{x:z.x,y:z.y+z.height}],q=V.getAbsoluteTransform();H.forEach(function(it){var ht=q.point(it);I.push(ht)})});var O=new n.Transform;O.rotate(-s.Konva.getAngle(this.rotation()));var b,w,P,R;I.forEach(function(V){var z=O.point(V);b===void 0&&(b=P=z.x,w=R=z.y),b=Math.min(b,z.x),w=Math.min(w,z.y),P=Math.max(P,z.x),R=Math.max(R,z.y)}),O.invert();var L=O.point({x:b,y:w});return{x:L.x,y:L.y,width:P-b,height:R-w,rotation:s.Konva.getAngle(this.rotation())}},M.prototype.getX=function(){return this._getNodeRect().x},M.prototype.getY=function(){return this._getNodeRect().y},M.prototype.getWidth=function(){return this._getNodeRect().width},M.prototype.getHeight=function(){return this._getNodeRect().height},M.prototype._createElements=function(){this._createBack(),C.forEach((function(T){this._createAnchor(T)}).bind(this)),this._createAnchor("rotater")},M.prototype._createAnchor=function(T){var D=this,I=new p.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:T+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:m?10:"auto"}),O=this;I.on("mousedown touchstart",function(b){O._handleMouseDown(b)}),I.on("dragstart",function(b){I.stopDrag(),b.cancelBubble=!0}),I.on("dragend",function(b){b.cancelBubble=!0}),I.on("mouseenter",function(){var b=s.Konva.getAngle(D.rotation()),w=S(T,b);I.getStage().content.style.cursor=w,D._cursorChange=!0}),I.on("mouseout",function(){I.getStage().content.style.cursor="",D._cursorChange=!1}),this.add(I)},M.prototype._createBack=function(){var T=this,D=new u.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(I){var O=this.getParent(),b=O.padding();I.beginPath(),I.rect(-b,-b,this.width()+b*2,this.height()+b*2),I.moveTo(this.width()/2,-b),O.rotateEnabled()&&I.lineTo(this.width()/2,-O.rotateAnchorOffset()*n.Util._sign(this.height())-b),I.fillStrokeShape(this)},hitFunc:function(I,O){if(T.shouldOverdrawWholeArea()){var b=T.padding();I.beginPath(),I.rect(-b,-b,O.width()+b*2,O.height()+b*2),I.fillStrokeShape(O)}}});this.add(D),this._proxyDrag(D)},M.prototype._handleMouseDown=function(T){this._movingAnchorName=T.target.name().split(" ")[0];var D=this._getNodeRect(),I=D.width,O=D.height,b=Math.sqrt(Math.pow(I,2)+Math.pow(O,2));this.sin=Math.abs(O/b),this.cos=Math.abs(I/b),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0;var w=T.target.getAbsolutePosition(),P=T.target.getStage().getPointerPosition();this._anchorDragOffset={x:P.x-w.x,y:P.y-w.y},this._fire("transformstart",{evt:T,target:this.getNode()}),this.getNode()._fire("transformstart",{evt:T,target:this.getNode()})},M.prototype._handleMouseMove=function(T){var D,I,O,b=this.findOne("."+this._movingAnchorName),w=b.getStage();w.setPointersPositions(T);var P=w.getPointerPosition(),R={x:P.x-this._anchorDragOffset.x,y:P.y-this._anchorDragOffset.y},L=b.getAbsolutePosition();b.setAbsolutePosition(R);var V=b.getAbsolutePosition();if(!(L.x===V.x&&L.y===V.y)){if(this._movingAnchorName==="rotater"){var z=this._getNodeRect();D=b.x()-z.width/2,I=-b.y()+z.height/2;var H=Math.atan2(-I,D)+Math.PI/2;z.height<0&&(H-=Math.PI);var q=s.Konva.getAngle(this.rotation()),it=q+H,ht=s.Konva.getAngle(this.rotationSnapTolerance()),ut=x(this.rotationSnaps(),it,ht),et=ut-z.rotation,ot=y(z,et);this._fitNodesInto(ot,T);return}var ft=this.keepRatio()||T.shiftKey,U=this.centeredScaling()||T.altKey;if(this._movingAnchorName==="top-left"){if(ft){var st=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};O=Math.sqrt(Math.pow(st.x-b.x(),2)+Math.pow(st.y-b.y(),2));var mt=this.findOne(".top-left").x()>st.x?-1:1,G=this.findOne(".top-left").y()>st.y?-1:1;D=O*this.cos*mt,I=O*this.sin*G,this.findOne(".top-left").x(st.x-D),this.findOne(".top-left").y(st.y-I)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(b.y());else if(this._movingAnchorName==="top-right"){if(ft){var st=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};O=Math.sqrt(Math.pow(b.x()-st.x,2)+Math.pow(st.y-b.y(),2));var mt=this.findOne(".top-right").x()<st.x?-1:1,G=this.findOne(".top-right").y()>st.y?-1:1;D=O*this.cos*mt,I=O*this.sin*G,this.findOne(".top-right").x(st.x+D),this.findOne(".top-right").y(st.y-I)}var k=b.position();this.findOne(".top-left").y(k.y),this.findOne(".bottom-right").x(k.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(b.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(b.x());else if(this._movingAnchorName==="bottom-left"){if(ft){var st=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};O=Math.sqrt(Math.pow(st.x-b.x(),2)+Math.pow(b.y()-st.y,2));var mt=st.x<b.x()?-1:1,G=b.y()<st.y?-1:1;D=O*this.cos*mt,I=O*this.sin*G,b.x(st.x-D),b.y(st.y+I)}k=b.position(),this.findOne(".top-left").x(k.x),this.findOne(".bottom-right").y(k.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(b.y());else if(this._movingAnchorName==="bottom-right"){if(ft){var st=U?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};O=Math.sqrt(Math.pow(b.x()-st.x,2)+Math.pow(b.y()-st.y,2));var mt=this.findOne(".bottom-right").x()<st.x?-1:1,G=this.findOne(".bottom-right").y()<st.y?-1:1;D=O*this.cos*mt,I=O*this.sin*G,this.findOne(".bottom-right").x(st.x+D),this.findOne(".bottom-right").y(st.y+I)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var U=this.centeredScaling()||T.altKey;if(U){var $=this.findOne(".top-left"),j=this.findOne(".bottom-right"),X=$.x(),Q=$.y(),Z=this.getWidth()-j.x(),J=this.getHeight()-j.y();j.move({x:-X,y:-Q}),$.move({x:Z,y:J})}var Y=this.findOne(".top-left").getAbsolutePosition();D=Y.x,I=Y.y;var nt=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),rt=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:D,y:I,width:nt,height:rt,rotation:s.Konva.getAngle(this.rotation())},T)}},M.prototype._handleMouseUp=function(T){this._removeEvents(T)},M.prototype.getAbsoluteTransform=function(){return this.getTransform()},M.prototype._removeEvents=function(T){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var D=this.getNode();this._fire("transformend",{evt:T,target:D}),D&&D.fire("transformend",{evt:T,target:D}),this._movingAnchorName=null}},M.prototype._fitNodesInto=function(T,D){var I=this,O=this._getNodeRect(),b=1;if(n.Util._inRange(T.width,-this.padding()*2-b,b)){this.update();return}if(n.Util._inRange(T.height,-this.padding()*2-b,b)){this.update();return}var w=new n.Transform;if(w.rotate(s.Konva.getAngle(this.rotation())),this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("left")>=0){var P=w.point({x:-this.padding()*2,y:0});T.x+=P.x,T.y+=P.y,T.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=P.x,this._anchorDragOffset.y-=P.y}else if(this._movingAnchorName&&T.width<0&&this._movingAnchorName.indexOf("right")>=0){var P=w.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=P.x,this._anchorDragOffset.y-=P.y,T.width+=this.padding()*2}if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("top")>=0){var P=w.point({x:0,y:-this.padding()*2});T.x+=P.x,T.y+=P.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=P.x,this._anchorDragOffset.y-=P.y,T.height+=this.padding()*2}else if(this._movingAnchorName&&T.height<0&&this._movingAnchorName.indexOf("bottom")>=0){var P=w.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=P.x,this._anchorDragOffset.y-=P.y,T.height+=this.padding()*2}if(this.boundBoxFunc()){var R=this.boundBoxFunc()(O,T);R?T=R:n.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var L=1e7,V=new n.Transform;V.translate(O.x,O.y),V.rotate(O.rotation),V.scale(O.width/L,O.height/L);var z=new n.Transform;z.translate(T.x,T.y),z.rotate(T.rotation),z.scale(T.width/L,T.height/L);var H=z.multiply(V.invert());this._nodes.forEach(function(q){var it=q.getParent().getAbsoluteTransform(),ht=q.getTransform().copy();ht.translate(q.offsetX(),q.offsetY());var ut=new n.Transform;ut.multiply(it.copy().invert()).multiply(H).multiply(it).multiply(ht);var et=ut.decompose();q._batchTransformChanges(function(){q.setAttrs(et)}),I._fire("transform",{evt:D,target:q}),q._fire("transform",{evt:D,target:q})}),this.rotation(n.Util._getRotation(T.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()},M.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},M.prototype._batchChangeChild=function(T,D){var I=this.findOne(T);I._batchTransformChanges(function(){I.setAttrs(D)})},M.prototype.update=function(){var T=this,D=this._getNodeRect();this.rotation(n.Util._getRotation(D.rotation));var I=D.width,O=D.height,b=this.enabledAnchors(),w=this.resizeEnabled(),P=this.padding(),R=this.anchorSize();this.find("._anchor").each(function(L){L._batchTransformChanges(function(){L.setAttrs({width:R,height:R,offsetX:R/2,offsetY:R/2,stroke:T.anchorStroke(),strokeWidth:T.anchorStrokeWidth(),fill:T.anchorFill(),cornerRadius:T.anchorCornerRadius()})})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:R/2+P,offsetY:R/2+P,visible:w&&b.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:I/2,y:0,offsetY:R/2+P,visible:w&&b.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:I,y:0,offsetX:R/2-P,offsetY:R/2+P,visible:w&&b.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:O/2,offsetX:R/2+P,visible:w&&b.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:I,y:O/2,offsetX:R/2-P,visible:w&&b.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:O,offsetX:R/2+P,offsetY:R/2-P,visible:w&&b.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:I/2,y:O,offsetY:R/2-P,visible:w&&b.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:I,y:O,offsetX:R/2-P,offsetY:R/2-P,visible:w&&b.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:I/2,y:-this.rotateAnchorOffset()*n.Util._sign(O)-P,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:I,height:O,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0})},M.prototype.isTransforming=function(){return this._transforming},M.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var T=this.findOne("."+this._movingAnchorName);T&&T.stopDrag()}},M.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),c.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},M.prototype.toObject=function(){return l.Node.prototype.toObject.call(this)},M}(c.Group);Te.Transformer=A;function E(F){return F instanceof Array||n.Util.warn("enabledAnchors value should be an array"),F instanceof Array&&F.forEach(function(M){C.indexOf(M)===-1&&n.Util.warn("Unknown anchor name: "+M+". Available names are: "+C.join(", "))}),F||[]}return A.prototype.className="Transformer",r._registerNode(A),a.Factory.addGetterSetter(A,"enabledAnchors",C,E),a.Factory.addGetterSetter(A,"resizeEnabled",!0),a.Factory.addGetterSetter(A,"anchorSize",10,i.getNumberValidator()),a.Factory.addGetterSetter(A,"rotateEnabled",!0),a.Factory.addGetterSetter(A,"rotationSnaps",[]),a.Factory.addGetterSetter(A,"rotateAnchorOffset",50,i.getNumberValidator()),a.Factory.addGetterSetter(A,"rotationSnapTolerance",5,i.getNumberValidator()),a.Factory.addGetterSetter(A,"borderEnabled",!0),a.Factory.addGetterSetter(A,"anchorStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(A,"anchorStrokeWidth",1,i.getNumberValidator()),a.Factory.addGetterSetter(A,"anchorFill","white"),a.Factory.addGetterSetter(A,"anchorCornerRadius",0,i.getNumberValidator()),a.Factory.addGetterSetter(A,"borderStroke","rgb(0, 161, 255)"),a.Factory.addGetterSetter(A,"borderStrokeWidth",1,i.getNumberValidator()),a.Factory.addGetterSetter(A,"borderDash"),a.Factory.addGetterSetter(A,"keepRatio",!0),a.Factory.addGetterSetter(A,"centeredScaling",!1),a.Factory.addGetterSetter(A,"ignoreStroke",!1),a.Factory.addGetterSetter(A,"padding",0,i.getNumberValidator()),a.Factory.addGetterSetter(A,"node"),a.Factory.addGetterSetter(A,"nodes"),a.Factory.addGetterSetter(A,"boundBoxFunc"),a.Factory.addGetterSetter(A,"shouldOverdrawWholeArea",!1),a.Factory.backCompat(A,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),n.Collection.mapMethods(A),Te}var rr={},Oo;function nc(){if(Oo)return rr;Oo=1;var t=rr.__extends||function(){var s=function(i,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,g){o.__proto__=g}||function(o,g){for(var f in g)g.hasOwnProperty(f)&&(o[f]=g[f])},s(i,r)};return function(i,r){s(i,r);function o(){this.constructor=i}i.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(rr,"__esModule",{value:!0});var e=yt(),n=gt(),a=Mt(),l=vt(),u=_t(),p=vt(),c=function(s){t(i,s);function i(){return s!==null&&s.apply(this,arguments)||this}return i.prototype._sceneFunc=function(r){r.beginPath(),r.arc(0,0,this.radius(),0,l.Konva.getAngle(this.angle()),this.clockwise()),r.lineTo(0,0),r.closePath(),r.fillStrokeShape(this)},i.prototype.getWidth=function(){return this.radius()*2},i.prototype.getHeight=function(){return this.radius()*2},i.prototype.setWidth=function(r){this.radius(r/2)},i.prototype.setHeight=function(r){this.radius(r/2)},i}(a.Shape);return rr.Wedge=c,c.prototype.className="Wedge",c.prototype._centroid=!0,c.prototype._attrsAffectingSize=["radius"],p._registerNode(c),n.Factory.addGetterSetter(c,"radius",0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"angle",0,u.getNumberValidator()),n.Factory.addGetterSetter(c,"clockwise",!1),n.Factory.backCompat(c,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),e.Collection.mapMethods(c),rr}var Er={},Mo;function ac(){if(Mo)return Er;Mo=1,Object.defineProperty(Er,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var l=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],u=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function p(c,s){var i=c.data,r=c.width,o=c.height,g,f,v,_,m,S,C,h,d,y,x,A,E,F,M,T,D,I,O,b,w,P,R,L,V=s+s+1,z=r-1,H=o-1,q=s+1,it=q*(q+1)/2,ht=new a,ut=null,et=ht,ot=null,ft=null,st=l[s],mt=u[s];for(v=1;v<V;v++)et=et.next=new a,v===q&&(ut=et);for(et.next=ht,C=S=0,f=0;f<o;f++){for(T=D=I=O=h=d=y=x=0,A=q*(b=i[S]),E=q*(w=i[S+1]),F=q*(P=i[S+2]),M=q*(R=i[S+3]),h+=it*b,d+=it*w,y+=it*P,x+=it*R,et=ht,v=0;v<q;v++)et.r=b,et.g=w,et.b=P,et.a=R,et=et.next;for(v=1;v<q;v++)_=S+((z<v?z:v)<<2),h+=(et.r=b=i[_])*(L=q-v),d+=(et.g=w=i[_+1])*L,y+=(et.b=P=i[_+2])*L,x+=(et.a=R=i[_+3])*L,T+=b,D+=w,I+=P,O+=R,et=et.next;for(ot=ht,ft=ut,g=0;g<r;g++)i[S+3]=R=x*st>>mt,R!==0?(R=255/R,i[S]=(h*st>>mt)*R,i[S+1]=(d*st>>mt)*R,i[S+2]=(y*st>>mt)*R):i[S]=i[S+1]=i[S+2]=0,h-=A,d-=E,y-=F,x-=M,A-=ot.r,E-=ot.g,F-=ot.b,M-=ot.a,_=C+((_=g+s+1)<z?_:z)<<2,T+=ot.r=i[_],D+=ot.g=i[_+1],I+=ot.b=i[_+2],O+=ot.a=i[_+3],h+=T,d+=D,y+=I,x+=O,ot=ot.next,A+=b=ft.r,E+=w=ft.g,F+=P=ft.b,M+=R=ft.a,T-=b,D-=w,I-=P,O-=R,ft=ft.next,S+=4;C+=r}for(g=0;g<r;g++){for(D=I=O=T=d=y=x=h=0,S=g<<2,A=q*(b=i[S]),E=q*(w=i[S+1]),F=q*(P=i[S+2]),M=q*(R=i[S+3]),h+=it*b,d+=it*w,y+=it*P,x+=it*R,et=ht,v=0;v<q;v++)et.r=b,et.g=w,et.b=P,et.a=R,et=et.next;for(m=r,v=1;v<=s;v++)S=m+g<<2,h+=(et.r=b=i[S])*(L=q-v),d+=(et.g=w=i[S+1])*L,y+=(et.b=P=i[S+2])*L,x+=(et.a=R=i[S+3])*L,T+=b,D+=w,I+=P,O+=R,et=et.next,v<H&&(m+=r);for(S=g,ot=ht,ft=ut,f=0;f<o;f++)_=S<<2,i[_+3]=R=x*st>>mt,R>0?(R=255/R,i[_]=(h*st>>mt)*R,i[_+1]=(d*st>>mt)*R,i[_+2]=(y*st>>mt)*R):i[_]=i[_+1]=i[_+2]=0,h-=A,d-=E,y-=F,x-=M,A-=ot.r,E-=ot.g,F-=ot.b,M-=ot.a,_=g+((_=f+q)<H?_:H)*r<<2,h+=T+=ot.r=i[_],d+=D+=ot.g=i[_+1],y+=I+=ot.b=i[_+2],x+=O+=ot.a=i[_+3],ot=ot.next,A+=b=ft.r,E+=w=ft.g,F+=P=ft.b,M+=R=ft.a,T-=b,D-=w,I-=P,O-=R,ft=ft.next,S+=r}}return Er.Blur=function(s){var i=Math.round(this.blurRadius());i>0&&p(s,i)},t.Factory.addGetterSetter(e.Node,"blurRadius",0,n.getNumberValidator(),t.Factory.afterSetFilter),Er}var Fr={},Eo;function oc(){if(Eo)return Fr;Eo=1,Object.defineProperty(Fr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();return Fr.Brighten=function(a){var l=this.brightness()*255,u=a.data,p=u.length,c;for(c=0;c<p;c+=4)u[c]+=l,u[c+1]+=l,u[c+2]+=l},t.Factory.addGetterSetter(e.Node,"brightness",0,n.getNumberValidator(),t.Factory.afterSetFilter),Fr}var Rr={},Fo;function sc(){if(Fo)return Rr;Fo=1,Object.defineProperty(Rr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();return Rr.Contrast=function(a){var l=Math.pow((this.contrast()+100)/100,2),u=a.data,p=u.length,c=150,s=150,i=150,r;for(r=0;r<p;r+=4)c=u[r],s=u[r+1],i=u[r+2],c/=255,c-=.5,c*=l,c+=.5,c*=255,s/=255,s-=.5,s*=l,s+=.5,s*=255,i/=255,i-=.5,i*=l,i+=.5,i*=255,c=c<0?0:c>255?255:c,s=s<0?0:s>255?255:s,i=i<0?0:i>255?255:i,u[r]=c,u[r+1]=s,u[r+2]=i},t.Factory.addGetterSetter(e.Node,"contrast",0,n.getNumberValidator(),t.Factory.afterSetFilter),Rr}var Nr={},Ro;function lc(){if(Ro)return Nr;Ro=1,Object.defineProperty(Nr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=yt(),a=_t();return Nr.Emboss=function(l){var u=this.embossStrength()*10,p=this.embossWhiteLevel()*255,c=this.embossDirection(),s=this.embossBlend(),i=0,r=0,o=l.data,g=l.width,f=l.height,v=g*4,_=f;switch(c){case"top-left":i=-1,r=-1;break;case"top":i=-1,r=0;break;case"top-right":i=-1,r=1;break;case"right":i=0,r=1;break;case"bottom-right":i=1,r=1;break;case"bottom":i=1,r=0;break;case"bottom-left":i=1,r=-1;break;case"left":i=0,r=-1;break;default:n.Util.error("Unknown emboss direction: "+c)}do{var m=(_-1)*v,S=i;_+S<1&&(S=0),_+S>f&&(S=0);var C=(_-1+S)*g*4,h=g;do{var d=m+(h-1)*4,y=r;h+y<1&&(y=0),h+y>g&&(y=0);var x=C+(h-1+y)*4,A=o[d]-o[x],E=o[d+1]-o[x+1],F=o[d+2]-o[x+2],M=A,T=M>0?M:-M,D=E>0?E:-E,I=F>0?F:-F;if(D>T&&(M=E),I>T&&(M=F),M*=u,s){var O=o[d]+M,b=o[d+1]+M,w=o[d+2]+M;o[d]=O>255?255:O<0?0:O,o[d+1]=b>255?255:b<0?0:b,o[d+2]=w>255?255:w<0?0:w}else{var P=p-M;P<0?P=0:P>255&&(P=255),o[d]=o[d+1]=o[d+2]=P}}while(--h)}while(--_)},t.Factory.addGetterSetter(e.Node,"embossStrength",.5,a.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossWhiteLevel",.5,a.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossDirection","top-left",null,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"embossBlend",!1,null,t.Factory.afterSetFilter),Nr}var Dr={},No;function hc(){if(No)return Dr;No=1,Object.defineProperty(Dr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();function a(l,u,p,c,s){var i=p-u,r=s-c,o;return i===0?c+r/2:r===0?c:(o=(l-u)/i,o=r*o+c,o)}return Dr.Enhance=function(l){var u=l.data,p=u.length,c=u[0],s=c,i,r=u[1],o=r,g,f=u[2],v=f,_,m,S=this.enhance();if(S!==0){for(m=0;m<p;m+=4)i=u[m+0],i<c?c=i:i>s&&(s=i),g=u[m+1],g<r?r=g:g>o&&(o=g),_=u[m+2],_<f?f=_:_>v&&(v=_);s===c&&(s=255,c=0),o===r&&(o=255,r=0),v===f&&(v=255,f=0);var C,h,d,y,x,A,E,F,M;for(S>0?(h=s+S*(255-s),d=c-S*(c-0),x=o+S*(255-o),A=r-S*(r-0),F=v+S*(255-v),M=f-S*(f-0)):(C=(s+c)*.5,h=s+S*(s-C),d=c+S*(c-C),y=(o+r)*.5,x=o+S*(o-y),A=r+S*(r-y),E=(v+f)*.5,F=v+S*(v-E),M=f+S*(f-E)),m=0;m<p;m+=4)u[m+0]=a(u[m+0],c,s,d,h),u[m+1]=a(u[m+1],r,o,A,x),u[m+2]=a(u[m+2],f,v,M,F)}},t.Factory.addGetterSetter(e.Node,"enhance",0,n.getNumberValidator(),t.Factory.afterSetFilter),Dr}var Gr={},Do;function uc(){return Do||(Do=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.Grayscale=function(t){var e=t.data,n=e.length,a,l;for(a=0;a<n;a+=4)l=.34*e[a]+.5*e[a+1]+.16*e[a+2],e[a]=l,e[a+1]=l,e[a+2]=l}),Gr}var Ir={},Go;function cc(){if(Go)return Ir;Go=1,Object.defineProperty(Ir,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();return t.Factory.addGetterSetter(e.Node,"hue",0,n.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,n.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"luminance",0,n.getNumberValidator(),t.Factory.afterSetFilter),Ir.HSL=function(a){var l=a.data,u=l.length,p=1,c=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,i=this.luminance()*127,r,o=p*c*Math.cos(s*Math.PI/180),g=p*c*Math.sin(s*Math.PI/180),f=.299*p+.701*o+.167*g,v=.587*p-.587*o+.33*g,_=.114*p-.114*o-.497*g,m=.299*p-.299*o-.328*g,S=.587*p+.413*o+.035*g,C=.114*p-.114*o+.293*g,h=.299*p-.3*o+1.25*g,d=.587*p-.586*o-1.05*g,y=.114*p+.886*o-.2*g,x,A,E,F;for(r=0;r<u;r+=4)x=l[r+0],A=l[r+1],E=l[r+2],F=l[r+3],l[r+0]=f*x+v*A+_*E+i,l[r+1]=m*x+S*A+C*E+i,l[r+2]=h*x+d*A+y*E+i,l[r+3]=F},Ir}var kr={},Io;function fc(){if(Io)return kr;Io=1,Object.defineProperty(kr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();return kr.HSV=function(a){var l=a.data,u=l.length,p=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,i,r=p*c*Math.cos(s*Math.PI/180),o=p*c*Math.sin(s*Math.PI/180),g=.299*p+.701*r+.167*o,f=.587*p-.587*r+.33*o,v=.114*p-.114*r-.497*o,_=.299*p-.299*r-.328*o,m=.587*p+.413*r+.035*o,S=.114*p-.114*r+.293*o,C=.299*p-.3*r+1.25*o,h=.587*p-.586*r-1.05*o,d=.114*p+.886*r-.2*o,y,x,A,E;for(i=0;i<u;i+=4)y=l[i+0],x=l[i+1],A=l[i+2],E=l[i+3],l[i+0]=g*y+f*x+v*A,l[i+1]=_*y+m*x+S*A,l[i+2]=C*y+h*x+d*A,l[i+3]=E},t.Factory.addGetterSetter(e.Node,"hue",0,n.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"saturation",0,n.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"value",0,n.getNumberValidator(),t.Factory.afterSetFilter),kr}var Lr={},ko;function dc(){return ko||(ko=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.Invert=function(t){var e=t.data,n=e.length,a;for(a=0;a<n;a+=4)e[a]=255-e[a],e[a+1]=255-e[a+1],e[a+2]=255-e[a+2]}),Lr}var zr={},Lo;function pc(){if(Lo)return zr;Lo=1,Object.defineProperty(zr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=yt(),a=_t(),l=function(p,c,s){var i=p.data,r=c.data,o=p.width,g=p.height,f=s.polarCenterX||o/2,v=s.polarCenterY||g/2,_,m,S,C=0,h=0,d=0,y=0,x,A=Math.sqrt(f*f+v*v);m=o-f,S=g-v,x=Math.sqrt(m*m+S*S),A=x>A?x:A;var E=g,F=o,M,T,D=360/F*Math.PI/180,I,O;for(T=0;T<F;T+=1)for(I=Math.sin(T*D),O=Math.cos(T*D),M=0;M<E;M+=1)m=Math.floor(f+A*M/E*O),S=Math.floor(v+A*M/E*I),_=(S*o+m)*4,C=i[_+0],h=i[_+1],d=i[_+2],y=i[_+3],_=(T+M*o)*4,r[_+0]=C,r[_+1]=h,r[_+2]=d,r[_+3]=y},u=function(p,c,s){var i=p.data,r=c.data,o=p.width,g=p.height,f=s.polarCenterX||o/2,v=s.polarCenterY||g/2,_,m,S,C,h,d=0,y=0,x=0,A=0,E,F=Math.sqrt(f*f+v*v);m=o-f,S=g-v,E=Math.sqrt(m*m+S*S),F=E>F?E:F;var M=g,T=o,D,I,O=0,b,w;for(m=0;m<o;m+=1)for(S=0;S<g;S+=1)C=m-f,h=S-v,D=Math.sqrt(C*C+h*h)*M/F,I=(Math.atan2(h,C)*180/Math.PI+360+O)%360,I=I*T/360,b=Math.floor(I),w=Math.floor(D),_=(w*o+b)*4,d=i[_+0],y=i[_+1],x=i[_+2],A=i[_+3],_=(S*o+m)*4,r[_+0]=d,r[_+1]=y,r[_+2]=x,r[_+3]=A};return zr.Kaleidoscope=function(p){var c=p.width,s=p.height,i,r,o,g,f,v,_,m,S,C,h=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),y=Math.floor(c*(d%360)/360);if(!(h<1)){var x=n.Util.createCanvasElement();x.width=c,x.height=s;var A=x.getContext("2d").getImageData(0,0,c,s);l(p,A,{polarCenterX:c/2,polarCenterY:s/2});for(var E=c/Math.pow(2,h);E<=8;)E=E*2,h-=1;E=Math.ceil(E);var F=E,M=0,T=F,D=1;for(y+E>c&&(M=F,T=0,D=-1),r=0;r<s;r+=1)for(i=M;i!==T;i+=D)o=Math.round(i+y)%c,S=(c*r+o)*4,f=A.data[S+0],v=A.data[S+1],_=A.data[S+2],m=A.data[S+3],C=(c*r+i)*4,A.data[C+0]=f,A.data[C+1]=v,A.data[C+2]=_,A.data[C+3]=m;for(r=0;r<s;r+=1)for(F=Math.floor(E),g=0;g<h;g+=1){for(i=0;i<F+1;i+=1)S=(c*r+i)*4,f=A.data[S+0],v=A.data[S+1],_=A.data[S+2],m=A.data[S+3],C=(c*r+F*2-i-1)*4,A.data[C+0]=f,A.data[C+1]=v,A.data[C+2]=_,A.data[C+3]=m;F*=2}u(A,p,{polarRotation:0})}},t.Factory.addGetterSetter(e.Node,"kaleidoscopePower",2,a.getNumberValidator(),t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"kaleidoscopeAngle",0,a.getNumberValidator(),t.Factory.afterSetFilter),zr}var Ur={},zo;function gc(){if(zo)return Ur;zo=1,Object.defineProperty(Ur,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();function a(o,g,f){var v=(f*o.width+g)*4,_=[];return _.push(o.data[v++],o.data[v++],o.data[v++],o.data[v++]),_}function l(o,g){return Math.sqrt(Math.pow(o[0]-g[0],2)+Math.pow(o[1]-g[1],2)+Math.pow(o[2]-g[2],2))}function u(o){for(var g=[0,0,0],f=0;f<o.length;f++)g[0]+=o[f][0],g[1]+=o[f][1],g[2]+=o[f][2];return g[0]/=o.length,g[1]/=o.length,g[2]/=o.length,g}function p(o,g){var f=a(o,0,0),v=a(o,o.width-1,0),_=a(o,0,o.height-1),m=a(o,o.width-1,o.height-1),S=g||10;if(l(f,v)<S&&l(v,m)<S&&l(m,_)<S&&l(_,f)<S){for(var C=u([v,f,m,_]),h=[],d=0;d<o.width*o.height;d++){var y=l(C,[o.data[d*4],o.data[d*4+1],o.data[d*4+2]]);h[d]=y<S?0:255}return h}}function c(o,g){for(var f=0;f<o.width*o.height;f++)o.data[4*f+3]=g[f]}function s(o,g,f){for(var v=[1,1,1,1,0,1,1,1,1],_=Math.round(Math.sqrt(v.length)),m=Math.floor(_/2),S=[],C=0;C<f;C++)for(var h=0;h<g;h++){for(var d=C*g+h,y=0,x=0;x<_;x++)for(var A=0;A<_;A++){var E=C+x-m,F=h+A-m;if(E>=0&&E<f&&F>=0&&F<g){var M=E*g+F,T=v[x*_+A];y+=o[M]*T}}S[d]=y===255*8?255:0}return S}function i(o,g,f){for(var v=[1,1,1,1,1,1,1,1,1],_=Math.round(Math.sqrt(v.length)),m=Math.floor(_/2),S=[],C=0;C<f;C++)for(var h=0;h<g;h++){for(var d=C*g+h,y=0,x=0;x<_;x++)for(var A=0;A<_;A++){var E=C+x-m,F=h+A-m;if(E>=0&&E<f&&F>=0&&F<g){var M=E*g+F,T=v[x*_+A];y+=o[M]*T}}S[d]=y>=255*4?255:0}return S}function r(o,g,f){for(var v=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],_=Math.round(Math.sqrt(v.length)),m=Math.floor(_/2),S=[],C=0;C<f;C++)for(var h=0;h<g;h++){for(var d=C*g+h,y=0,x=0;x<_;x++)for(var A=0;A<_;A++){var E=C+x-m,F=h+A-m;if(E>=0&&E<f&&F>=0&&F<g){var M=E*g+F,T=v[x*_+A];y+=o[M]*T}}S[d]=y}return S}return Ur.Mask=function(o){var g=this.threshold(),f=p(o,g);return f&&(f=s(f,o.width,o.height),f=i(f,o.width,o.height),f=r(f,o.width,o.height),c(o,f)),o},t.Factory.addGetterSetter(e.Node,"threshold",0,n.getNumberValidator(),t.Factory.afterSetFilter),Ur}var Vr={},Uo;function vc(){if(Uo)return Vr;Uo=1,Object.defineProperty(Vr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();return Vr.Noise=function(a){var l=this.noise()*255,u=a.data,p=u.length,c=l/2,s;for(s=0;s<p;s+=4)u[s+0]+=c-2*c*Math.random(),u[s+1]+=c-2*c*Math.random(),u[s+2]+=c-2*c*Math.random()},t.Factory.addGetterSetter(e.Node,"noise",.2,n.getNumberValidator(),t.Factory.afterSetFilter),Vr}var Br={},Vo;function _c(){if(Vo)return Br;Vo=1,Object.defineProperty(Br,"__esModule",{value:!0});var t=gt(),e=yt(),n=Tt(),a=_t();return Br.Pixelate=function(l){var u=Math.ceil(this.pixelSize()),p=l.width,c=l.height,s,i,r,o,g,f,v,_=Math.ceil(p/u),m=Math.ceil(c/u),S,C,h,d,y,x,A,E=l.data;if(u<=0){e.Util.error("pixelSize value can not be <= 0");return}for(y=0;y<_;y+=1)for(x=0;x<m;x+=1){for(o=0,g=0,f=0,v=0,S=y*u,C=S+u,h=x*u,d=h+u,A=0,s=S;s<C;s+=1)if(!(s>=p))for(i=h;i<d;i+=1)i>=c||(r=(p*i+s)*4,o+=E[r+0],g+=E[r+1],f+=E[r+2],v+=E[r+3],A+=1);for(o=o/A,g=g/A,f=f/A,v=v/A,s=S;s<C;s+=1)if(!(s>=p))for(i=h;i<d;i+=1)i>=c||(r=(p*i+s)*4,E[r+0]=o,E[r+1]=g,E[r+2]=f,E[r+3]=v)}},t.Factory.addGetterSetter(n.Node,"pixelSize",8,a.getNumberValidator(),t.Factory.afterSetFilter),Br}var Hr={},Bo;function yc(){if(Bo)return Hr;Bo=1,Object.defineProperty(Hr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();return Hr.Posterize=function(a){var l=Math.round(this.levels()*254)+1,u=a.data,p=u.length,c=255/l,s;for(s=0;s<p;s+=1)u[s]=Math.floor(u[s]/c)*c},t.Factory.addGetterSetter(e.Node,"levels",.5,n.getNumberValidator(),t.Factory.afterSetFilter),Hr}var qr={},Ho;function mc(){if(Ho)return qr;Ho=1,Object.defineProperty(qr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();return qr.RGB=function(a){var l=a.data,u=l.length,p=this.red(),c=this.green(),s=this.blue(),i,r;for(i=0;i<u;i+=4)r=(.34*l[i]+.5*l[i+1]+.16*l[i+2])/255,l[i]=r*p,l[i+1]=r*c,l[i+2]=r*s,l[i+3]=l[i+3]},t.Factory.addGetterSetter(e.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),t.Factory.addGetterSetter(e.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),t.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,t.Factory.afterSetFilter),qr}var Wr={},qo;function bc(){if(qo)return Wr;qo=1,Object.defineProperty(Wr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();return Wr.RGBA=function(a){var l=a.data,u=l.length,p=this.red(),c=this.green(),s=this.blue(),i=this.alpha(),r,o;for(r=0;r<u;r+=4)o=1-i,l[r]=p*i+l[r]*o,l[r+1]=c*i+l[r+1]*o,l[r+2]=s*i+l[r+2]*o},t.Factory.addGetterSetter(e.Node,"red",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),t.Factory.addGetterSetter(e.Node,"green",0,function(a){return this._filterUpToDate=!1,a>255?255:a<0?0:Math.round(a)}),t.Factory.addGetterSetter(e.Node,"blue",0,n.RGBComponent,t.Factory.afterSetFilter),t.Factory.addGetterSetter(e.Node,"alpha",1,function(a){return this._filterUpToDate=!1,a>1?1:a<0?0:a}),Wr}var jr={},Wo;function Sc(){return Wo||(Wo=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.Sepia=function(t){var e=t.data,n=e.length,a,l,u,p;for(a=0;a<n;a+=4)l=e[a+0],u=e[a+1],p=e[a+2],e[a+0]=Math.min(255,l*.393+u*.769+p*.189),e[a+1]=Math.min(255,l*.349+u*.686+p*.168),e[a+2]=Math.min(255,l*.272+u*.534+p*.131)}),jr}var Kr={},jo;function Cc(){return jo||(jo=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.Solarize=function(t){var e=t.data,n=t.width,a=t.height,l=n*4,u=a;do{var p=(u-1)*l,c=n;do{var s=p+(c-1)*4,i=e[s],r=e[s+1],o=e[s+2];i>127&&(i=255-i),r>127&&(r=255-r),o>127&&(o=255-o),e[s]=i,e[s+1]=r,e[s+2]=o}while(--c)}while(--u)}),Kr}var Yr={},Ko;function wc(){if(Ko)return Yr;Ko=1,Object.defineProperty(Yr,"__esModule",{value:!0});var t=gt(),e=Tt(),n=_t();return Yr.Threshold=function(a){var l=this.threshold()*255,u=a.data,p=u.length,c;for(c=0;c<p;c+=1)u[c]=u[c]<l?0:255},t.Factory.addGetterSetter(e.Node,"threshold",.5,n.getNumberValidator(),t.Factory.afterSetFilter),Yr}var Yo;function xc(){if(Yo)return Pr;Yo=1,Object.defineProperty(Pr,"__esModule",{value:!0});var t=Wu(),e=ju(),n=Ku(),a=Yu(),l=Xu(),u=$u(),p=Ju(),c=ol(),s=sl(),i=ll(),r=Qu(),o=Zu(),g=tc(),f=ec(),v=hl(),_=rc(),m=ic(),S=nc(),C=ac(),h=oc(),d=sc(),y=lc(),x=hc(),A=uc(),E=cc(),F=fc(),M=dc(),T=pc(),D=gc(),I=vc(),O=_c(),b=yc(),w=mc(),P=bc(),R=Sc(),L=Cc(),V=wc();return Pr.Konva=t.Konva.Util._assign(t.Konva,{Arc:e.Arc,Arrow:n.Arrow,Circle:a.Circle,Ellipse:l.Ellipse,Image:u.Image,Label:p.Label,Tag:p.Tag,Line:c.Line,Path:s.Path,Rect:i.Rect,RegularPolygon:r.RegularPolygon,Ring:o.Ring,Sprite:g.Sprite,Star:f.Star,Text:v.Text,TextPath:_.TextPath,Transformer:m.Transformer,Wedge:S.Wedge,Filters:{Blur:C.Blur,Brighten:h.Brighten,Contrast:d.Contrast,Emboss:y.Emboss,Enhance:x.Enhance,Grayscale:A.Grayscale,HSL:E.HSL,HSV:F.HSV,Invert:M.Invert,Kaleidoscope:T.Kaleidoscope,Mask:D.Mask,Noise:I.Noise,Pixelate:O.Pixelate,Posterize:b.Posterize,RGB:w.RGB,RGBA:P.RGBA,Sepia:R.Sepia,Solarize:L.Solarize,Threshold:V.Threshold}}),Pr}var Xo;function Pc(){return Xo||(Xo=1,function(t,e){var n=xc().Konva;n._injectGlobal(n),e.default=n,t.exports=e.default}(xr,xr.exports)),xr.exports}var ln,$o;function Tc(){if($o)return ln;$o=1;let t;try{t=Pc()}catch{t={Stage:class{constructor(s){throw new Error("Konva not loaded")}}}}yi(),ni(),Qt();const e=fe(),{vector:n,...a}=ne(),l=rl();function u(c,s){return e.diff(s.x(),s.y(),c.metadata.currentPosition.x,c.metadata.currentPosition.y)}class p extends l{initialize(s,i){var r=new t.Stage({container:i,width:s.width,height:s.height,draggable:!s.fixed});this._initializeLayer(r,s)}_initializeLayer(s,i){var r=new t.Layer;s.add(r),i.__konvaLayer__=r}draw(s){s.__konvaLayer__.draw()}reinitialize(s){const i=s.__konvaLayer__,r=i.getStage();i.destroy(),this._initializeLayer(r,s)}resize(s,i,r){const g=s.__konvaLayer__.getStage();g.width(i),g.height(r)}scale(s,i){s.__konvaLayer__.getStage().scale(i)}sketch(s,i,r,o){r.group=new t.Group({x:i.metadata.currentPosition.x,y:i.metadata.currentPosition.y,draggable:!i.metadata.fixed,dragBoundFunc:s.preventOffstageDrag?g=>{const f=a.minus(n(s.width,s.height),i.size.radius);return a.max(a.min(g,f),i.size.radius)}:null}),r.shape=new t.Line({points:o.draw(i,i.diameter,s.borderFill),bezier:o.isBezier(),tension:o.isBezier()?null:s.lineSoftness,stroke:i.metadata.strokeColor||s.strokeColor,strokeWidth:s.strokeWidth,closed:!0,...a.multiply(i.radius,-1)}),this.fill(s,i,r),r.group.add(r.shape),s.__konvaLayer__.add(r.group)}fill(s,i,r){const o=s.imageMetadataFor(i);r.shape.fill(o?null:i.metadata.color||"black"),r.shape.fillPatternImage(o&&o.content),r.shape.fillPatternScale(o&&{x:o.scale,y:o.scale}),r.shape.fillPatternOffset(o&&a.divide(o.offset,o.scale))}label(s,i,r){r.label=new t.Text({...a.minus({x:i.metadata.label.x||r.group.width()/2,y:i.metadata.label.y||r.group.height()/2},i.radius),text:i.metadata.label.text,fontSize:i.metadata.label.fontSize,fontFamily:i.metadata.label.fontFamily||"Sans Serif",fill:i.metadata.label.color||"white"}),r.group.add(r.label)}physicalTranslate(s,i,r){i.x(r.centralAnchor.x),i.y(r.centralAnchor.y)}logicalTranslate(s,i,r){a.update(i.metadata.currentPosition,r.x(),r.y())}onDrag(s,i,r,o){r.on("mouseover",()=>{document.body.style.cursor="pointer"}),r.on("mouseout",()=>{document.body.style.cursor="default"}),r.on("dragmove",()=>{let[g,f]=u(i,r);r.zIndex(s.figuresCount-1),o(g,f)})}onDragEnd(s,i,r,o){r.on("dragend",()=>{o()})}registerKeyboardGestures(s,i){const r=s.__konvaLayer__.getStage().container();r.tabIndex=-1,this._registerKeyDown(s,r,i),this._registerKeyUp(s,r,i)}_registerKeyDown(s,i,r){i.addEventListener("keydown",function(o){for(let g in r)o.keyCode==g&&r[g](s.puzzle)})}_registerKeyUp(s,i,r){i.addEventListener("keyup",function(o){for(let g in r)o.keyCode==g&&s.puzzle.tryDisconnectionWhileDragging()})}}return ln=p,ln}var hn,Jo;function Ac(){if(Jo)return hn;Jo=1;const t=fe(),{anchor:e,Anchor:n}=Ne(),a=_i(),l=Qt(),{Tab:u,Slot:p,None:c}=di(),{NullValidator:s,PieceValidator:i,PuzzleValidator:r}=vi(),{Horizontal:o,Vertical:g}=Zs(),f=Un(),v=ni(),_=yi(),m=tl(),{InsertSequence:S,...C}=Hn(),h=qn(),d=el(),{vector:y,...x}=ne(),{radius:A,diameter:E}=Vn(),F=Bn(),M=ni(),T=Qs(),D=gi();return hn={anchor:e,vector:y,radius:A,diameter:E,Anchor:n,Puzzle:a,Piece:l,Canvas:_,Manufacturer:m,InsertSequence:S,PieceValidator:i,PuzzleValidator:r,NullValidator:s,Horizontal:o,Vertical:g,Tab:u,Slot:p,None:c,Pair:t,Metadata:h,SpatialMetadata:d,Outline:v,Structure:f,Vector:x,Shuffler:F,generators:C,outline:M,dragMode:T,connector:D,painters:{Dummy:Uu(),Konva:Tc()}},hn}var Oc=Ac();const Qo=ku(Oc),Mc=()=>{const t=new Qo.Canvas("puzzle",{width:800,height:650,pieceSize:100,proximity:20,borderFill:10,strokeWidth:2,lineSoftness:.18,painter:new Qo.painters.Konva});t.autogenerate({horizontalPiecesCount:2,verticalPiecesCount:2,metadata:[{color:"#B83361"},{color:"#B87D32"},{color:"#A4C234"},{color:"#37AB8C"}]}),t.draw()},Ec={mounted(){Mc()}},Fc=(t,e)=>{const n=t.__vccOpts||t;for(const[a,l]of e)n[a]=l;return n};function Rc(t,e,n,a,l,u){return Yh(),Jh(jt,null,[e[0]||(e[0]=ye("header",null,null,-1)),e[1]||(e[1]=ye("main",null,[ye("div",{id:"app"},[ye("div",null,"Headbreaker from Vue"),ye("div",{id:"puzzle"})])],-1))],64)}const Nc=Fc(Ec,[["render",Rc]]);Du(Nc).mount("#app");
